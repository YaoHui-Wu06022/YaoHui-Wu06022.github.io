<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ROSæœºå™¨äººç³»ç»Ÿ | ãŒã‚“ã°ã‚ã†</title><meta name="author" content="ä»Šå¤©ç¡å¤Ÿäº†å—"><meta name="copyright" content="ä»Šå¤©ç¡å¤Ÿäº†å—"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="æœºå™¨äººç³»ç»Ÿä»¿çœŸåœ¨ ROS ä¸­ï¼Œä»¿çœŸå®ç°ä¸»è¦æ¶‰åŠçš„å†…å®¹ï¼š  å¯¹æœºå™¨äººå»ºæ¨¡(URDF) åˆ›å»ºä»¿çœŸç¯å¢ƒ(Gazebo) æ„ŸçŸ¥ç¯å¢ƒ(Rviz)  å¦‚æœå®‰è£…çš„æ˜¯å®Œæ•´ç‰ˆrosï¼ŒGazeboå’ŒRvizé»˜è®¤å®‰è£… URDFï¼šUnified Robot Description Format å¯ä»¥ä»¥ä¸€ç§ XML çš„æ–¹å¼æè¿°æœºå™¨äººçš„éƒ¨åˆ†ç»“æ„ï¼Œæ¯”å¦‚åº•ç›˜ã€æ‘„åƒå¤´ã€æ¿€å…‰é›·è¾¾ã€æœºæ¢°è‡‚ä»¥åŠä¸åŒå…³èŠ‚çš„è‡ªç”±åº¦â€¦..ï¼Œè¯¥æ–‡ä»¶å¯ä»¥è¢« C+">
<meta property="og:type" content="article">
<meta property="og:title" content="ROSæœºå™¨äººç³»ç»Ÿ">
<meta property="og:url" content="http://yhblogs.cn/posts/3254549402.html">
<meta property="og:site_name" content="ãŒã‚“ã°ã‚ã†">
<meta property="og:description" content="æœºå™¨äººç³»ç»Ÿä»¿çœŸåœ¨ ROS ä¸­ï¼Œä»¿çœŸå®ç°ä¸»è¦æ¶‰åŠçš„å†…å®¹ï¼š  å¯¹æœºå™¨äººå»ºæ¨¡(URDF) åˆ›å»ºä»¿çœŸç¯å¢ƒ(Gazebo) æ„ŸçŸ¥ç¯å¢ƒ(Rviz)  å¦‚æœå®‰è£…çš„æ˜¯å®Œæ•´ç‰ˆrosï¼ŒGazeboå’ŒRvizé»˜è®¤å®‰è£… URDFï¼šUnified Robot Description Format å¯ä»¥ä»¥ä¸€ç§ XML çš„æ–¹å¼æè¿°æœºå™¨äººçš„éƒ¨åˆ†ç»“æ„ï¼Œæ¯”å¦‚åº•ç›˜ã€æ‘„åƒå¤´ã€æ¿€å…‰é›·è¾¾ã€æœºæ¢°è‡‚ä»¥åŠä¸åŒå…³èŠ‚çš„è‡ªç”±åº¦â€¦..ï¼Œè¯¥æ–‡ä»¶å¯ä»¥è¢« C+">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/wallhaven-1q83qg.jpg">
<meta property="article:published_time" content="2025-06-10T16:04:57.000Z">
<meta property="article:modified_time" content="2026-01-31T12:00:30.721Z">
<meta property="article:author" content="ä»Šå¤©ç¡å¤Ÿäº†å—">
<meta property="article:tag" content="ğŸ¤–ROS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/wallhaven-1q83qg.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yhblogs.cn/posts/3254549402.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ROSæœºå™¨äººç³»ç»Ÿ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2026-01-31 12:00:30'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/font_3319458_ks437t3n4r.css"><link rel="stylesheet" href="/css/modify.css"><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/b_2a1aef95f351a5f7ef72eb81e6838fd6.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">81</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">1</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouye"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-rili"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-biaoqian"></i><span> æ ‡ç­¾</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="ãŒã‚“ã°ã‚ã†"><img class="site-icon" src="/img/favicon.png"><span class="site-name">ãŒã‚“ã°ã‚ã†</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouye"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-rili"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-biaoqian"></i><span> æ ‡ç­¾</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">ROSæœºå™¨äººç³»ç»Ÿ</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">å‘è¡¨äº</span><time datetime="2025-06-10T16:04:57.000Z" title="å‘è¡¨äº 2025-06-10 16:04:57">2025-06-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">23.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>102åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="ROSæœºå™¨äººç³»ç»Ÿ"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h2 id="æœºå™¨äººç³»ç»Ÿä»¿çœŸ"><a href="#æœºå™¨äººç³»ç»Ÿä»¿çœŸ" class="headerlink" title="æœºå™¨äººç³»ç»Ÿä»¿çœŸ"></a>æœºå™¨äººç³»ç»Ÿä»¿çœŸ</h2><p>åœ¨ ROS ä¸­ï¼Œä»¿çœŸå®ç°ä¸»è¦æ¶‰åŠçš„å†…å®¹ï¼š</p>
<ul>
<li>å¯¹æœºå™¨äººå»ºæ¨¡(URDF)</li>
<li>åˆ›å»ºä»¿çœŸç¯å¢ƒ(Gazebo)</li>
<li>æ„ŸçŸ¥ç¯å¢ƒ(Rviz)</li>
</ul>
<p>å¦‚æœå®‰è£…çš„æ˜¯å®Œæ•´ç‰ˆrosï¼ŒGazeboå’ŒRvizé»˜è®¤å®‰è£…</p>
<p><strong>URDF</strong>ï¼šUnified Robot Description Format</p>
<p>å¯ä»¥ä»¥ä¸€ç§ XML çš„æ–¹å¼æè¿°æœºå™¨äººçš„éƒ¨åˆ†ç»“æ„ï¼Œæ¯”å¦‚åº•ç›˜ã€æ‘„åƒå¤´ã€æ¿€å…‰é›·è¾¾ã€æœºæ¢°è‡‚ä»¥åŠä¸åŒå…³èŠ‚çš„è‡ªç”±åº¦â€¦..ï¼Œè¯¥æ–‡ä»¶å¯ä»¥è¢« C++ å†…ç½®çš„è§£é‡Šå™¨è½¬æ¢æˆå¯è§†åŒ–çš„æœºå™¨äººæ¨¡å‹ï¼Œæ˜¯ ROS ä¸­å®ç°æœºå™¨äººä»¿çœŸçš„é‡è¦ç»„ä»¶</p>
<p><strong>rviz</strong>ï¼šROS Visualization Tool</p>
<p>ä»¥ä¸‰ç»´æ–¹å¼æ˜¾ç¤ºROSæ¶ˆæ¯ï¼Œå¯ä»¥å°†æ•°æ®è¿›è¡Œå¯è§†åŒ–è¡¨è¾¾</p>
<p><strong>Gazebo</strong>ï¼š</p>
<p>Gazeboæ˜¯ä¸€æ¬¾3DåŠ¨æ€æ¨¡æ‹Ÿå™¨ï¼Œç”¨äºæ˜¾ç¤ºæœºå™¨äººæ¨¡å‹å¹¶åˆ›å»ºä»¿çœŸç¯å¢ƒï¼Œèƒ½å¤Ÿåœ¨å¤æ‚çš„å®¤å†…å’Œå®¤å¤–ç¯å¢ƒä¸­å‡†ç¡®æœ‰æ•ˆåœ°æ¨¡æ‹Ÿæœºå™¨äºº</p>
<p>ä¸‰è€…åº”ç”¨ä¸­ï¼Œåªæ˜¯åˆ›å»º URDF æ„ä¹‰ä¸å¤§ï¼Œä¸€èˆ¬éœ€è¦ç»“åˆ Gazebo æˆ– Rviz ä½¿ç”¨ï¼Œåœ¨ Gazebo æˆ– Rviz ä¸­å¯ä»¥å°† URDF æ–‡ä»¶è§£æä¸ºå›¾å½¢åŒ–çš„æœºå™¨äººæ¨¡å‹ï¼Œä¸€èˆ¬çš„ä½¿ç”¨ç»„åˆä¸º:</p>
<ul>
<li>å¦‚æœéä»¿çœŸç¯å¢ƒï¼Œé‚£ä¹ˆä½¿ç”¨ URDF ç»“åˆ Rviz ç›´æ¥æ˜¾ç¤ºæ„ŸçŸ¥çš„çœŸå®ç¯å¢ƒä¿¡æ¯</li>
<li>å¦‚æœæ˜¯ä»¿çœŸç¯å¢ƒï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ URDF ç»“åˆ Gazebo æ­å»ºä»¿çœŸç¯å¢ƒï¼Œå¹¶ç»“åˆ Rviz æ˜¾ç¤ºæ„ŸçŸ¥çš„è™šæ‹Ÿç¯å¢ƒä¿¡æ¯</li>
</ul>
<p>ä»¿çœŸç¼ºé™·ï¼š</p>
<p>æœºå™¨äººåœ¨ä»¿çœŸç¯å¢ƒä¸å®é™…ç¯å¢ƒä¸‹çš„è¡¨ç°å·®å¼‚è¾ƒå¤§ï¼Œä»¿çœŸå¹¶ä¸èƒ½å®Œå…¨åšåˆ°æ¨¡æ‹ŸçœŸå®çš„ç‰©ç†ä¸–ç•Œï¼Œå­˜åœ¨ä¸€äº›â€å¤±çœŸâ€çš„æƒ…å†µ</p>
<ol>
<li><p>ä»¿çœŸå™¨æ‰€ä½¿ç”¨çš„ç‰©ç†å¼•æ“ç›®å‰è¿˜ä¸èƒ½å¤Ÿå®Œå…¨ç²¾ç¡®æ¨¡æ‹ŸçœŸå®ä¸–ç•Œçš„ç‰©ç†æƒ…å†µ</p>
</li>
<li><p>ä»¿çœŸå™¨æ„å»ºçš„æ˜¯å…³èŠ‚é©±åŠ¨å™¨ï¼ˆç”µæœº&amp;é½¿è½®ç®±ï¼‰ã€ä¼ æ„Ÿå™¨ä¸ä¿¡å·é€šä¿¡çš„ç»å¯¹ç†æƒ³æƒ…å†µï¼Œç›®å‰ä¸æ”¯æŒæ¨¡æ‹Ÿå®é™…ç¡¬ä»¶ç¼ºé™·æˆ–è€…ä¸€äº›ä¸´ç•ŒçŠ¶æ€ç­‰æƒ…å½¢</p>
</li>
</ol>
<p>ç´ æé“¾æ¥:</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/zx595306686/sim_demo.git">https://github.com/zx595306686/sim_demo.git</a></p>
<blockquote>
<p>åœ¨è™šæ‹Ÿæœºä¸­git cloneä¸‹è½½</p>
</blockquote>
</li>
</ul>
<h3 id="URDFé›†æˆRviz"><a href="#URDFé›†æˆRviz" class="headerlink" title="URDFé›†æˆRviz"></a>URDFé›†æˆRviz</h3><p>URDFä¸Rvizçš„é›†æˆè¾ƒä¹‹äºURDFä¸Gazeboçš„é›†æˆæ›´ä¸ºç®€å•</p>
<p>éœ€æ±‚æè¿°ï¼šåœ¨ Rviz ä¸­æ˜¾ç¤ºä¸€ä¸ªç›’çŠ¶æœºå™¨äºº</p>
<p>å®ç°æµç¨‹ï¼š</p>
<ol>
<li>æ–°å»ºåŠŸèƒ½åŒ…ï¼Œå¯¼å…¥ä¾èµ–</li>
<li>æ ¸å¿ƒï¼šç¼–å†™ urdf æ–‡ä»¶</li>
<li>æ ¸å¿ƒï¼šåœ¨ launch æ–‡ä»¶é›†æˆ URDF ä¸ Rviz</li>
<li>åœ¨ Rviz ä¸­æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹</li>
</ol>
<p><strong>åˆ›å»ºåŠŸèƒ½åŒ…</strong>ï¼š</p>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„åŠŸèƒ½åŒ…ï¼Œåç§°è‡ªå®šä¹‰ï¼Œå¯¼å…¥ä¾èµ–åŒ…ï¼š<code>urdf</code>ä¸<code>xacro</code></p>
<blockquote>
<p>è¿™ä¸ªæ—¶å€™ç›®å½•ä¸‹æ˜¯æ²¡æœ‰srcæ–‡ä»¶çš„ï¼Œå› ä¸ºä¸éœ€è¦ç¼–ç </p>
<p><code>xacro</code>(XML Macros)æ˜¯ ROSä¸­ç”¨äºç®€åŒ–æœºå™¨äººæ¨¡å‹æè¿°çš„æ ¸å¿ƒå·¥å…·åŒ…ï¼Œä¸“é—¨ç”¨äºå¤„ç† URDFæ–‡ä»¶</p>
</blockquote>
<p>åœ¨å½“å‰åŠŸèƒ½åŒ…ä¸‹ï¼Œå†æ–°å»ºå‡ ä¸ªç›®å½•ï¼š</p>
<p><code>urdf</code>: å­˜å‚¨ urdf æ–‡ä»¶çš„ç›®å½•</p>
<p><code>meshes</code>:æœºå™¨äººæ¨¡å‹æ¸²æŸ“æ–‡ä»¶(æš‚ä¸ä½¿ç”¨)</p>
<p><code>config</code>: é…ç½®æ–‡ä»¶</p>
<p><code>launch</code>: å­˜å‚¨ launch å¯åŠ¨æ–‡ä»¶</p>
<p><strong>ç¼–å†™ URDF æ–‡ä»¶</strong>ï¼š</p>
<p>åœ¨urdfæ–‡ä»¶å¤¹ä¸‹æ–°å»ºå­çº§æ–‡ä»¶å¤¹urdfå’Œxacro</p>
<p>urdfæ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ª<code>.urdf</code>æ–‡ä»¶ï¼Œå¤åˆ¶å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"mycar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span>=<span class="string">"0.5 0.2 0.1"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨ launch æ–‡ä»¶ä¸­é›†æˆ URDF ä¸ Rviz</strong>ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1. åœ¨å‚æ•°æœåŠ¡å™¨è½½å…¥urdfæ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‚æ•°ånameå›ºå®š robot_description --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span> = <span class="string">"robot_description"</span> <span class="attr">textfile</span>= <span class="string">"$(find urdf01_rviz)/urdf/urdf/demo01.urdf"</span>  /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2. å¯åŠ¨ rviz --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span>  <span class="attr">pkg</span> = <span class="string">"rviz"</span> <span class="attr">type</span> = <span class="string">"rviz"</span> <span class="attr">name</span> = <span class="string">"rviz"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨ Rviz ä¸­æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹</strong>ï¼š</p>
<p>rviz å¯åŠ¨åï¼Œä¼šå‘ç°å¹¶æ²¡æœ‰ç›’è£…çš„æœºå™¨äººæ¨¡å‹ï¼Œè¿™æ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰æ·»åŠ æœºå™¨äººæ˜¾ç¤ºç»„ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼Œæ·»åŠ æ–¹å¼å¦‚ä¸‹</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/01_URDFæ–‡ä»¶æ‰§è¡Œrvizé…ç½®01.webp" alt="01_URDFæ–‡ä»¶æ‰§è¡Œrvizé…ç½®01" style="zoom: 67%;">

<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/02_URDFæ–‡ä»¶æ‰§è¡Œrvizé…ç½®02.webp" alt="02_URDFæ–‡ä»¶æ‰§è¡Œrvizé…ç½®02" style="zoom:67%;">

<p><strong>ä¼˜åŒ– rviz å¯åŠ¨</strong></p>
<p>é‡å¤å¯åŠ¨<code>launch</code>æ–‡ä»¶æ—¶ï¼ŒRviz ä¹‹å‰çš„ç»„ä»¶é…ç½®ä¿¡æ¯ä¸ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œéœ€è¦é‡å¤æ‰§è¡Œæ˜¾ç¤ºæ“ä½œï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ä¼˜åŒ–ï¼š</p>
<p>é¦–å…ˆï¼Œå°†å½“å‰é…ç½®ä¿å­˜è¿›<code>config</code>ç›®å½•</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/10_rvizé…ç½®ä¿å­˜.webp" alt="10_rvizé…ç½®ä¿å­˜" style="zoom:67%;">

<p>launchæ–‡ä»¶ä¸­ Rviz çš„å¯åŠ¨é…ç½®æ·»åŠ å‚æ•°ï¼š<code>args</code>ï¼Œå€¼è®¾ç½®ä¸º <code>-d é…ç½®æ–‡ä»¶è·¯å¾„</code></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">node</span>  <span class="attr">pkg</span> = <span class="string">"rviz"</span> <span class="attr">type</span> = <span class="string">"rviz"</span> <span class="attr">name</span> = <span class="string">"rviz"</span> <span class="attr">args</span> = <span class="string">"-d $(find urdf01_rviz)/config/show_car.rviz"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å†å¯åŠ¨æ—¶ï¼Œå°±å¯ä»¥åŒ…å«ä¹‹å‰çš„ç»„ä»¶é…ç½®äº†ï¼Œä½¿ç”¨æ›´æ–¹ä¾¿å¿«æ·</p>
<h3 id="URDFè¯­æ³•"><a href="#URDFè¯­æ³•" class="headerlink" title="URDFè¯­æ³•"></a>URDFè¯­æ³•</h3><p>URDF æ–‡ä»¶æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ XML æ–‡ä»¶ï¼Œåœ¨ ROS ä¸­é¢„å®šä¹‰äº†ä¸€ç³»åˆ—çš„æ ‡ç­¾ç”¨äºæè¿°æœºå™¨äººæ¨¡å‹</p>
<p>æœºå™¨äººæ¨¡å‹å¯èƒ½è¾ƒä¸ºå¤æ‚ï¼Œä½†æ˜¯ ROS çš„ URDF ä¸­æœºå™¨äººçš„ç»„æˆå´æ˜¯è¾ƒä¸ºç®€å•ï¼Œ</p>
<p>URDFä¸»è¦æœ‰å››ç±»æ ‡ç­¾</p>
<ul>
<li>robot æ ¹æ ‡ç­¾ï¼Œç±»ä¼¼äº launchæ–‡ä»¶ä¸­çš„launchæ ‡ç­¾</li>
<li>link è¿æ†æ ‡ç­¾</li>
<li>joint å…³èŠ‚æ ‡ç­¾</li>
<li>gazebo</li>
</ul>
<p>jointæ ‡ç­¾å¯¹åº”çš„æ•°æ®åœ¨æ¨¡å‹ä¸­æ˜¯ä¸å¯è§çš„</p>
<p>gazeboæ ‡ç­¾ä¸æ˜¯æœºå™¨äººæ¨¡å‹å¿…é¡»çš„ï¼Œåªæœ‰åœ¨ä»¿çœŸæ—¶æ‰éœ€è®¾ç½®ï¼Œç”¨äºé…ç½®ä»¿çœŸç¯å¢ƒæ‰€éœ€å‚æ•°</p>
<p><font color="Violetred">å±æ€§è·Ÿåœ¨æ ‡ç­¾çš„&lt;&gt;å†…</font></p>
<p><strong>robot</strong></p>
<p>urdf ä¸­ä¸ºäº†ä¿è¯ xml è¯­æ³•çš„å®Œæ•´æ€§ï¼Œä½¿ç”¨äº†<code>robot</code>æ ‡ç­¾ä½œä¸ºæ ¹æ ‡ç­¾</p>
<p>æ‰€æœ‰çš„ link å’Œ joint ä»¥åŠå…¶ä»–æ ‡ç­¾éƒ½å¿…é¡»åŒ…å«åœ¨ robot æ ‡ç­¾å†…</p>
<p>åœ¨è¯¥æ ‡ç­¾å†…å¯ä»¥é€šè¿‡ name å±æ€§è®¾ç½®æœºå™¨äººæ¨¡å‹çš„åç§°</p>
<h4 id="link"><a href="#link" class="headerlink" title="link"></a>link</h4><p>urdf ä¸­çš„ link æ ‡ç­¾ç”¨äºæè¿°æœºå™¨äººæŸä¸ªéƒ¨ä»¶(ä¹Ÿå³åˆšä½“éƒ¨åˆ†)çš„å¤–è§‚å’Œç‰©ç†å±æ€§</p>
<p>æ¯”å¦‚: æœºå™¨äººåº•åº§ã€è½®å­ã€æ¿€å…‰é›·è¾¾ã€æ‘„åƒå¤´â€¦</p>
<p>æ¯ä¸€ä¸ªéƒ¨ä»¶éƒ½å¯¹åº”ä¸€ä¸ª linkï¼Œåœ¨ link æ ‡ç­¾å†…ï¼Œå¯ä»¥è®¾è®¡è¯¥éƒ¨ä»¶çš„å½¢çŠ¶ã€å°ºå¯¸ã€é¢œè‰²ã€æƒ¯æ€§(inertial)çŸ©é˜µã€ç¢°æ’(collision)å‚æ•°ç­‰ä¸€ç³»åˆ—å±æ€§</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/20250610link.webp" alt="20250610link" style="zoom:50%;">

<p>å±æ€§ï¼šname â€”&gt; ä¸ºè¿æ†å‘½å</p>
<p>å­æ ‡ç­¾ï¼š</p>
<p>visual â€”&gt; æè¿°å¤–è§‚(å¯¹åº”çš„æ•°æ®æ˜¯å¯è§†çš„)</p>
<ul>
<li><p>geometry è®¾ç½®è¿æ†çš„å½¢çŠ¶</p>
<ul>
<li><p>æ ‡ç­¾1: box(ç›’çŠ¶)</p>
<ul>
<li>å±æ€§ï¼šsize = â€œ[x] [y] [z]â€  å•ä½ä¸ºm</li>
</ul>
</li>
<li><p>æ ‡ç­¾2: cylinder(åœ†æŸ±)</p>
<ul>
<li>å±æ€§ï¼šradius=â€œ â€ length=â€œ â€</li>
</ul>
</li>
<li><p>æ ‡ç­¾3: sphere(çƒä½“)</p>
<ul>
<li>å±æ€§ï¼šradius=â€œ â€</li>
</ul>
</li>
<li><p>æ ‡ç­¾4: mesh(ä¸ºè¿æ†æ·»åŠ çš®è‚¤)</p>
<ul>
<li><p>å±æ€§ï¼šfilename=èµ„æºè·¯å¾„</p>
<p>èµ„æºè·¯å¾„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">package://&lt;packagename&gt;/&lt;path&gt;/æ–‡ä»¶</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>origin è®¾ç½®åç§»é‡ä¸å€¾æ–œå¼§åº¦</p>
<ul>
<li><p>å±æ€§1ï¼šxyz=â€[x] [y] [z]â€</p>
</li>
<li><p>å±æ€§2ï¼šrpy=â€[ç¿»æ»š] [ä¿¯ä»°] [åèˆª]â€</p>
<blockquote>
<p>é€†ç€è½´æ–¹å‘çœ‹é€†æ—¶é’ˆæ—‹è½¬ä¸ºæ­£</p>
<p>åç§»å¤šåœ¨jointä¸­å®ç°</p>
</blockquote>
</li>
</ul>
</li>
<li><p>metrial è®¾ç½®ææ–™å±æ€§(é¢œè‰²)</p>
<ul>
<li>å±æ€§: name</li>
<li>æ ‡ç­¾: color<ul>
<li>å±æ€§: rgba=â€[çº¢] [ç»¿] [è“] [é€æ˜åº¦]â€  å–å€¼å‡[0,1]</li>
</ul>
</li>
</ul>
</li>
<li><p>collision â€”&gt; è¿æ†çš„ç¢°æ’å±æ€§</p>
</li>
<li><p>Inertial â€”&gt; è¿æ†çš„æƒ¯æ€§çŸ©é˜µ</p>
</li>
</ul>
<p>urdfæ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span> = <span class="string">"car"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span> =<span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯è§†åŒ–æ ‡ç­¾ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 1.å½¢çŠ¶ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- ç«‹æ–¹ä½“ --&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- &lt;box size = "0.2 0.2 0.2" /&gt; --&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- åœ†æŸ± --&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- &lt;cylinder radius = "0.2" length = "2" /&gt; --&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- çƒä½“ --&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- &lt;sphere radius = "0.2" /&gt; --&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- çš®è‚¤ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mesh</span> <span class="attr">filename</span> = <span class="string">"package://urdf01_rviz/meshes/autolabor_mini.stl"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 2. åç§»é‡å’Œå€¾æ–œå¼§åº¦ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0 0 0"</span> <span class="attr">rpy</span>=<span class="string">"1.57 0 1.57"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 3. é¢œè‰² --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span> = <span class="string">"car_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span> = <span class="string">"0.3 0.4 0.2 1"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="joint"><a href="#joint" class="headerlink" title="joint"></a>joint</h4><p>urdf ä¸­çš„ joint æ ‡ç­¾ç”¨äºæè¿°æœºå™¨äººå…³èŠ‚çš„è¿åŠ¨å­¦å’ŒåŠ¨åŠ›å­¦å±æ€§ï¼Œè¿˜å¯ä»¥æŒ‡å®šå…³èŠ‚è¿åŠ¨çš„å®‰å…¨æé™</p>
<p>æœºå™¨äººçš„ä¸¤ä¸ªéƒ¨ä»¶(åˆ†åˆ«ç§°ä¹‹ä¸º parent link ä¸ child link)ä»¥â€å…³èŠ‚â€çš„å½¢å¼ç›¸è¿æ¥</p>
<p>ä¸åŒçš„å…³èŠ‚æœ‰ä¸åŒçš„è¿åŠ¨å½¢å¼ï¼šæ—‹è½¬ã€æ»‘åŠ¨ã€å›ºå®šã€æ—‹è½¬é€Ÿåº¦ã€æ—‹è½¬è§’åº¦é™åˆ¶â€¦.</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/å®˜æ–¹02_link.webp" alt="å®˜æ–¹02_link" style="zoom:50%;">

<p>å±æ€§ï¼š</p>
<ul>
<li>name â€”&gt; ä¸ºå…³èŠ‚å‘½å</li>
<li>type â€”&gt; å…³èŠ‚è¿åŠ¨å½¢å¼<ul>
<li><font color="Violetred">continuous</font>ï¼šæ—‹è½¬å…³èŠ‚ï¼Œå¯ä»¥ç»•å•è½´æ— é™æ—‹è½¬</li>
<li>revoluteï¼šæ—‹è½¬å…³èŠ‚ï¼Œç±»ä¼¼äº continuesï¼Œä½†æ˜¯æœ‰æ—‹è½¬è§’åº¦é™åˆ¶</li>
<li>prismaticï¼šæ»‘åŠ¨å…³èŠ‚ï¼Œæ²¿æŸä¸€è½´çº¿ç§»åŠ¨çš„å…³èŠ‚ï¼Œæœ‰ä½ç½®æé™</li>
<li>planerï¼šå¹³é¢å…³èŠ‚ï¼Œå…è®¸åœ¨å¹³é¢æ­£äº¤æ–¹å‘ä¸Šå¹³ç§»æˆ–æ—‹è½¬</li>
<li>floatingï¼šæµ®åŠ¨å…³èŠ‚ï¼Œå…è®¸è¿›è¡Œå¹³ç§»ã€æ—‹è½¬è¿åŠ¨</li>
<li><font color="Violetred">fixed</font>ï¼šå›ºå®šå…³èŠ‚ï¼Œä¸å…è®¸è¿åŠ¨çš„ç‰¹æ®Šå…³èŠ‚</li>
</ul>
</li>
</ul>
<p>å­æ ‡ç­¾</p>
<ul>
<li><p>parent(å¿…éœ€çš„)</p>
<p>parent linkçš„åå­—æ˜¯ä¸€ä¸ªå¼ºåˆ¶çš„å±æ€§ï¼š</p>
<ul>
<li>linkï¼šçˆ¶çº§è¿æ†çš„åå­—ï¼Œæ˜¯è¿™ä¸ªlinkåœ¨æœºå™¨äººç»“æ„æ ‘ä¸­çš„åå­—</li>
</ul>
</li>
<li><p>child(å¿…éœ€çš„)</p>
<p>child linkçš„åå­—æ˜¯ä¸€ä¸ªå¼ºåˆ¶çš„å±æ€§ï¼š</p>
<ul>
<li>linkï¼šå­çº§è¿æ†çš„åå­—ï¼Œæ˜¯è¿™ä¸ªlinkåœ¨æœºå™¨äººç»“æ„æ ‘ä¸­çš„åå­—</li>
</ul>
</li>
<li><p>origin</p>
<ul>
<li>å±æ€§ï¼šxyz=å„è½´çº¿ä¸Šçš„åç§»é‡ rpy=å„è½´çº¿ä¸Šçš„åç§»å¼§åº¦</li>
</ul>
</li>
<li><p>axis</p>
<ul>
<li>å±æ€§ï¼šxyzç”¨äºè®¾ç½®å›´ç»•å“ªä¸ªå…³èŠ‚è½´è¿åŠ¨</li>
</ul>
</li>
</ul>
<p>éœ€æ±‚ï¼šåˆ›å»ºæœºå™¨äººæ¨¡å‹ï¼Œåº•ç›˜ä¸ºé•¿æ–¹ä½“ï¼Œåœ¨é•¿æ–¹ä½“çš„å‰é¢æ·»åŠ ä¸€æ‘„åƒå¤´ï¼Œæ‘„åƒå¤´å¯ä»¥æ²¿ç€ Z è½´ 360 åº¦æ—‹è½¬</p>
<p>urdfæ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span> = <span class="string">"car"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1. åº•ç›˜link --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span> = <span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span> = <span class="string">"0.3 0.2 0.1"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0 0 0"</span> <span class="attr">rpy</span> = <span class="string">"0 0 0"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span> = <span class="string">"car_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span> = <span class="string">"0.3 0.4 0.2 0.5"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2. æ‘„åƒå¤´link --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span> = <span class="string">"camera"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span>=<span class="string">"0.02 0.05 0.05"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0 0 0.027"</span> <span class="attr">rpy</span> = <span class="string">"0 0 0"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span> = <span class="string">"camere_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span> = <span class="string">"0 0 1 0.5"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 3. å…³èŠ‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span>  <span class="attr">name</span> = <span class="string">"camerabase"</span> <span class="attr">type</span> = <span class="string">"continuous"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- çˆ¶çº§link --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span> = <span class="string">"base_link"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å­çº§link --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span> = <span class="string">"camera"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®åç§»é‡ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨æ„è¿™é‡Œçš„åç§»æ˜¯ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„åç§», è¦è€ƒè™‘ä¸åµŒå…¥éœ€è¦å¦å¤–å¢åŠ åç§»é‡ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span> = <span class="string">"-0.12 0 0.05"</span> <span class="attr">rpy</span> =<span class="string">"0 0 0"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®å…³èŠ‚æ—‹è½¬å‚è€ƒçš„åæ ‡è½´ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">"0 0 1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>launchæ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1. åœ¨å‚æ•°æœåŠ¡å™¨è½½å…¥urdfæ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‚æ•°ånameå›ºå®š robot_description --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span> = <span class="string">"robot_description"</span> <span class="attr">textfile</span>= <span class="string">"$(find urdf01_rviz)/urdf/urdf/demo03.urdf"</span>  /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2. å¯åŠ¨ rviz --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span>  <span class="attr">pkg</span> = <span class="string">"rviz"</span> <span class="attr">type</span> = <span class="string">"rviz"</span> <span class="attr">name</span> = <span class="string">"rviz"</span> <span class="attr">args</span> = <span class="string">"-d $(find urdf01_rviz)/config/show_car.rviz"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        åªæœ‰è¿™ä¸¤å¥:</span></span><br><span class="line"><span class="comment">            è¡¨ç°:è®¾ç½®æ˜¾ç¤ºçš„ä½ç½®ä¸é¢œè‰²å¼‚å¸¸</span></span><br><span class="line"><span class="comment">            æç¤º:No transform from [camera] to [base_link]   </span></span><br><span class="line"><span class="comment">            åŸå› :rvizä¸­æ˜¾ç¤ºURDFæ—¶ï¼Œå¿…é¡»å‘å¸ƒä¸åŒéƒ¨ä»¶ä¹‹é—´çš„åæ ‡ç³»å…³ç³»</span></span><br><span class="line"><span class="comment">            è§£å†³:ROSä¸­æä¾›äº†å…³äºæœºå™¨äººæ¨¡å‹æ˜¾ç¤ºçš„åæ ‡å‘å¸ƒç›¸å…³èŠ‚ç‚¹ï¼ˆä¸¤ä¸ªï¼‰</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  å…³èŠ‚çŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  æœºå™¨äººçŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">type</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">name</span>=<span class="string">"robot_state_publisher"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>çŠ¶æ€å‘å¸ƒèŠ‚ç‚¹åœ¨æ­¤æ˜¯å¿…é¡»çš„</p>
<p>å…³èŠ‚è¿åŠ¨æ§åˆ¶èŠ‚ç‚¹(å¯é€‰)ï¼Œä¼šç”Ÿæˆå…³èŠ‚æ§åˆ¶çš„UIï¼Œç”¨äºæµ‹è¯•å…³èŠ‚è¿åŠ¨æ˜¯å¦æ­£å¸¸</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¯é€‰:ç”¨äºæ§åˆ¶å…³èŠ‚è¿åŠ¨çš„èŠ‚ç‚¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher_gui"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher_gui"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher_gui"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ³¨æ„ï¼Œæ‘„åƒå¤´çš„åç§»è®¾ç½®ä¸º0.027æ˜¯ä¸ºäº†é¿å…æ—‹è½¬æ§åˆ¶æ—¶0.025å’Œåº•ç›˜è´´åˆå¯èƒ½å‡ºç°æ—‹è½¬æŠ–åŠ¨ç°è±¡</p>
</blockquote>
<p><strong>base_footprintä¼˜åŒ–urdf</strong></p>
<p>å‰é¢å®ç°çš„æœºå™¨äººæ¨¡å‹æ˜¯åŠæ²‰åˆ°åœ°ä¸‹çš„ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹åº•ç›˜çš„ä¸­å¿ƒç‚¹ä½äºåœ°å›¾åŸç‚¹ä¸Š</p>
<p>å¯ä»¥å°†åˆå§‹ link è®¾ç½®ä¸ºä¸€ä¸ªå°ºå¯¸æå°çš„ link(æ¯”å¦‚åŠå¾„ä¸º 0.001m çš„çƒä½“ï¼Œæˆ–è¾¹é•¿ä¸º 0.001m çš„ç«‹æ–¹ä½“)ï¼Œç„¶åå†åœ¨åˆå§‹ link ä¸Šæ·»åŠ åº•ç›˜ç­‰åˆšä½“ï¼Œè¿™æ ·è™½ç„¶ä»ç„¶å­˜åœ¨åˆå§‹linkåŠæ²‰çš„ç°è±¡ï¼Œä½†æ˜¯åŸºæœ¬å¯ä»¥å¿½ç•¥äº†</p>
<p>è¿™ä¸ªåˆå§‹ link ä¸€èˆ¬ç§°ä¹‹ä¸º base_footprintï¼Œåœ¨rvizä¸­å°†åæ ‡ç³»æ¢ä¸ºbase_footprintå‘ç°æœºå™¨äººå·²ç»å›åˆ°åœ°é¢ï¼Œè¿™ç§æ–¹æ³•é¿å…äº†åç§»å¯¼è‡´çš„æ··ä¹±</p>
<p>ä¿®æ”¹åçš„urdfæ–‡ä»¶</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span> = <span class="string">"car"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ ä¸€ä¸ªå°ºå¯¸æå°çš„link,å†å»å…³è”base_link,</span></span><br><span class="line"><span class="comment">    å…³èŠ‚é«˜åº¦å’Œbase_linkä¸‹æ²‰ä¸€è‡´(åŠä¸ªåº•ç›˜é«˜åº¦)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span> = <span class="string">"base_footprint"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span> = <span class="string">"0.001 0.001 0.001"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1. åº•ç›˜link --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span> = <span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span> = <span class="string">"0.3 0.2 0.1"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0 0 0"</span> <span class="attr">rpy</span> = <span class="string">"0 0 0"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span> = <span class="string">"car_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span> = <span class="string">"0.3 0.4 0.2 0.5"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2. æ‘„åƒå¤´link --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span> = <span class="string">"camera"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span>=<span class="string">"0.02 0.05 0.05"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0 0 0.027"</span> <span class="attr">rpy</span> = <span class="string">"0 0 0"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span> = <span class="string">"camere_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span> = <span class="string">"0 0 1 0.5"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å…³è”base_footprint ä¸base_link--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span>  <span class="attr">name</span> = <span class="string">"link2footfrint"</span> <span class="attr">type</span> = <span class="string">"fixed"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- çˆ¶çº§link --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span> = <span class="string">"base_footprint"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å­çº§link --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span> = <span class="string">"base_link"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®åç§»é‡ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span> = <span class="string">"0 0 0.05"</span> <span class="attr">rpy</span> =<span class="string">"0 0 0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span>   </span><br><span class="line">    <span class="comment">&lt;!-- 3. å…³èŠ‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span>  <span class="attr">name</span> = <span class="string">"camera2base"</span> <span class="attr">type</span> = <span class="string">"continuous"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- çˆ¶çº§link --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span> = <span class="string">"base_link"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å­çº§link --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span> = <span class="string">"camera"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®åç§»é‡ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨æ„è¿™é‡Œçš„åç§»æ˜¯ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„åç§», è¦è€ƒè™‘ä¸åµŒå…¥éœ€è¦å¦å¤–å¢åŠ åç§»é‡ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span> = <span class="string">"-0.12 0 0.05"</span> <span class="attr">rpy</span> =<span class="string">"0 0 0"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®å…³èŠ‚æ—‹è½¬å‚è€ƒçš„åæ ‡è½´ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">"0 0 1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="urdfå®æ“"><a href="#urdfå®æ“" class="headerlink" title="urdfå®æ“"></a>urdfå®æ“</h4><p>éœ€æ±‚æè¿°ï¼šåˆ›å»ºä¸€ä¸ªå››è½®åœ†æŸ±çŠ¶æœºå™¨äººæ¨¡å‹ï¼Œåº•ç›˜ä¸ºåœ†æŸ±çŠ¶ï¼ŒåŠå¾„ 10cmï¼Œé«˜ 8cmï¼Œå››è½®ç”±ä¸¤ä¸ªé©±åŠ¨è½®å’Œä¸¤ä¸ªä¸‡å‘æ”¯æ’‘è½®ç»„æˆï¼Œä¸¤ä¸ªé©±åŠ¨è½®åŠå¾„ä¸º 3.25cmï¼Œè½®èƒå®½åº¦1.5cmï¼Œä¸¤ä¸ªä¸‡å‘è½®ä¸ºçƒçŠ¶ï¼ŒåŠå¾„ 0.75cmï¼Œåº•ç›˜ç¦»åœ°é—´è·ä¸º 1.5cm(ä¸ä¸‡å‘è½®ç›´å¾„ä¸€è‡´)</p>
<p>åç§»å¤šä½¿ç”¨jointæ¥å®ç°ï¼Œlinkå†…originä¸€èˆ¬éƒ½è®¾ä¸º0ï¼Œè¿™æ ·èƒ½ä¿è¯åæ ‡åŸç‚¹åœ¨ç‰©ä½“ä¸­å¿ƒ</p>
<blockquote>
<p>å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œjointæ”¹å˜äº†ä¸¤ä¸ªåæ ‡ç³»åŸç‚¹çš„ä½ç½®ï¼Œlinkä¸æ”¹å˜åŸç‚¹ä½ç½®ï¼Œåªæ˜¯æ”¹å˜äº†åç§»é‡</p>
</blockquote>
<p>å®ç°æµç¨‹ï¼š</p>
<p>åˆ›å»ºæœºå™¨äººæ¨¡å‹å¯ä»¥åˆ†æ­¥éª¤å®ç°</p>
<ol>
<li>æ–°å»º urdf æ–‡ä»¶ï¼Œå¹¶ä¸ launch æ–‡ä»¶é›†æˆ</li>
<li>æ­å»ºåº•ç›˜</li>
<li>åœ¨åº•ç›˜ä¸Šæ·»åŠ ä¸¤ä¸ªé©±åŠ¨è½®</li>
<li>åœ¨åº•ç›˜ä¸Šæ·»åŠ ä¸¤ä¸ªä¸‡å‘è½®</li>
</ol>
<p>launchæ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"robot_description"</span> <span class="attr">textfile</span>=<span class="string">"$(find urdf01_rviz)/urdf/urdf/test.urdf"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span> = <span class="string">"rviz"</span> <span class="attr">type</span> = <span class="string">"rviz"</span> <span class="attr">name</span> = <span class="string">"rviz"</span> <span class="attr">args</span> = <span class="string">"-d $(find urdf01_rviz)/config/show_car.rviz"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  å…³èŠ‚çŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  æœºå™¨äººçŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">type</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">name</span>=<span class="string">"robot_state_publisher"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ æ§åˆ¶å…³èŠ‚è¿åŠ¨çš„èŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher_gui"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher_gui"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher_gui"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>urdfæ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"mycar"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½® base_footprint  --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"base_footprint"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">"0.001"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ åº•ç›˜ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        å‚æ•°</span></span><br><span class="line"><span class="comment">            å½¢çŠ¶:åœ†æŸ± </span></span><br><span class="line"><span class="comment">            åŠå¾„:10cm -&gt; 0.1m</span></span><br><span class="line"><span class="comment">            é«˜åº¦:8cm  -&gt; 0.08m</span></span><br><span class="line"><span class="comment">            ç¦»åœ°:1.5cm-&gt; 0.015m</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"0.1"</span> <span class="attr">length</span>=<span class="string">"0.08"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- åç§»å°½é‡å»jointè®¾ç½® --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"base_link_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"0.8 0.3 0.1 0.5"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span>       </span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ å…³èŠ‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"base_link2base_footprint"</span> <span class="attr">type</span>=<span class="string">"fixed"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_footprint"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"base_link"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å…³èŠ‚zè®¾ç½®: è½¦èº«é«˜åº¦/2 + ç¦»åœ°è·ç¦» 0.08/2+0.015--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.055"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ é©±åŠ¨è½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        é©±åŠ¨è½®æ˜¯ä¾§ç¿»çš„åœ†æŸ±</span></span><br><span class="line"><span class="comment">        å‚æ•°</span></span><br><span class="line"><span class="comment">            åŠå¾„: 3.25 cm -&gt; 0.0325m</span></span><br><span class="line"><span class="comment">            å®½åº¦: 1.5  cm -&gt; 0.015m</span></span><br><span class="line"><span class="comment">            é¢œè‰²: é»‘è‰² -&gt; (0,0,0)</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"left_wheel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"0.0325"</span> <span class="attr">length</span>=<span class="string">"0.015"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"1.5707 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"wheel_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"0.0 0.0 0.0 1"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"right_wheel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"0.0325"</span> <span class="attr">length</span>=<span class="string">"0.015"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"-1.5707 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"wheel_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"0.0 0.0 0.0 1"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ å…³èŠ‚ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å…³èŠ‚è®¾ç½®:</span></span><br><span class="line"><span class="comment">            x = 0</span></span><br><span class="line"><span class="comment">            y = åº•ç›˜çš„åŠå¾„ + è½®èƒå®½åº¦ / 2 = 10 + 1.5/2 = 10.75cm = 0.1075m</span></span><br><span class="line"><span class="comment">            z = ç¦»åœ°é—´è· + åº•ç›˜é•¿åº¦ / 2 - è½®èƒåŠå¾„ = 1.5 + 4 - 3.25 = 2.25(cm)</span></span><br><span class="line"><span class="comment">            axis = 0 1 0</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"left_wheel2base_link"</span> <span class="attr">type</span>=<span class="string">"continuous"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_link"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"left_wheel"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.1075 -0.0225"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">"0 1 0"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"right_wheel2base_link"</span> <span class="attr">type</span>=<span class="string">"continuous"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_link"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"right_wheel"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 -0.1075 -0.0225"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">"0 1 0"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ ä¸‡å‘è½®(æ”¯æ’‘è½®) --&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        å‚æ•°</span></span><br><span class="line"><span class="comment">            å½¢çŠ¶: çƒä½“</span></span><br><span class="line"><span class="comment">            åŠå¾„: 0.75 cm</span></span><br><span class="line"><span class="comment">            é¢œè‰²: é»‘è‰²</span></span><br><span class="line"><span class="comment">    --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"front_wheel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">"0.0075"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"wheel_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"0.0 0.0 0.0 1.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"back_wheel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">"0.0075"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"wheel_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"0.0 0.0 0.0 1.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        å…³èŠ‚è®¾ç½®:</span></span><br><span class="line"><span class="comment">        x = è‡ªå®šä¹‰</span></span><br><span class="line"><span class="comment">        y = 0</span></span><br><span class="line"><span class="comment">        z = åº•ç›˜é•¿åº¦ / 2 + ç¦»åœ°é—´è· - è½®èƒåŠå¾„ = 0.08 / 2 + 0.015 / 2 = 0.0475 </span></span><br><span class="line"><span class="comment">        axis= 1 1 1</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"front_wheel2base_link"</span> <span class="attr">type</span>=<span class="string">"continuous"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_link"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"front_wheel"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.08 0.0 -0.0475"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">"1 1 1"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"back_wheel2base_link"</span> <span class="attr">type</span>=<span class="string">"continuous"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_link"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"back_wheel"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"-0.08 0.0 -0.0475"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">"1 1 1"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä»£ç ä¼¼ä¹æœ‰äº›å†—é•¿ï¼Œå¤ç”¨æ€§å·®</p>
<h4 id="urdfå·¥å…·"><a href="#urdfå·¥å…·" class="headerlink" title="urdfå·¥å…·"></a>urdfå·¥å…·</h4><p>åœ¨ ROS ä¸­ï¼Œæä¾›äº†ä¸€äº›å·¥å…·æ¥æ–¹ä¾¿ URDF æ–‡ä»¶çš„ç¼–å†™</p>
<ul>
<li><code>check_urdf</code>å‘½ä»¤å¯ä»¥æ£€æŸ¥å¤æ‚çš„ urdf æ–‡ä»¶æ˜¯å¦å­˜åœ¨è¯­æ³•é—®é¢˜</li>
<li><code>urdf_to_graphiz</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹ urdf æ¨¡å‹ç»“æ„ï¼Œæ˜¾ç¤ºä¸åŒ link çš„å±‚çº§å…³ç³»</li>
</ul>
<p>é¦–å…ˆéœ€è¦å®‰è£…ï¼Œå®‰è£…å‘½ä»¤ï¼š<code>sudo apt install liburdfdom-tools</code></p>
<p>åœ¨urdfæ‰€åœ¨æ–‡ä»¶å¤¹æ‰“å¼€ç»ˆç«¯ï¼Œè°ƒç”¨<code>check_urdf [urdfæ–‡ä»¶]</code>ï¼Œå¦‚æœä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè¯´æ˜æ–‡ä»¶åˆæ³•ï¼Œå¦åˆ™éæ³•</p>
<p>è¿›å…¥urdfæ–‡ä»¶æ‰€å±ç›®å½•ï¼Œè°ƒç”¨:<code>urdf_to_graphiz [urdfæ–‡ä»¶]</code>ï¼Œå½“å‰ç›®å½•ä¸‹ä¼šç”Ÿæˆ pdf æ–‡ä»¶ï¼Œä½¿ç”¨<code>evince</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹pdf</p>
<h3 id="URDFä¼˜åŒ–"><a href="#URDFä¼˜åŒ–" class="headerlink" title="URDFä¼˜åŒ–"></a>URDFä¼˜åŒ–</h3><p>å‰é¢ URDF æ–‡ä»¶æ„å»ºæœºå™¨äººæ¨¡å‹çš„è¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨è‹¥å¹²é—®é¢˜</p>
<ol>
<li>åœ¨è®¾è®¡å…³èŠ‚çš„ä½ç½®æ—¶ï¼Œéœ€è¦æŒ‰ç…§ä¸€å®šçš„å…¬å¼è®¡ç®—ï¼Œå…¬å¼æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯åœ¨ URDF ä¸­ä¾èµ–äºäººå·¥è®¡ç®—ï¼Œå­˜åœ¨ä¸ä¾¿ï¼Œå®¹æ˜“è®¡ç®—å¤±è¯¯ï¼Œä¸”å½“æŸäº›å‚æ•°å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿˜éœ€è¦é‡æ–°è®¡ç®—</li>
<li>URDF ä¸­çš„éƒ¨åˆ†å†…å®¹æ˜¯é«˜åº¦é‡å¤çš„ï¼Œé©±åŠ¨è½®ä¸æ”¯æ’‘è½®çš„è®¾è®¡å®ç°ï¼Œä¸åŒè½®å­åªæ˜¯éƒ¨åˆ†å‚æ•°ä¸åŒï¼Œå½¢çŠ¶ã€é¢œè‰²ã€ç¿»è½¬é‡éƒ½æ˜¯ä¸€è‡´çš„ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ„å»ºå¤æ‚çš„æœºå™¨äººæ¨¡å‹æ—¶ï¼Œæ›´æ˜¯æ˜“äºå‡ºç°é«˜åº¦é‡å¤çš„è®¾è®¡ï¼ŒæŒ‰ç…§ä¸€èˆ¬çš„ç¼–ç¨‹æ¶‰åŠåˆ°é‡å¤ä»£ç åº”è¯¥è€ƒè™‘å°è£…</li>
</ol>
<p>åœ¨ ROS ä¸­ï¼Œå·²ç»ç»™å‡ºäº†ç±»ä¼¼ç¼–ç¨‹çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œç§°ä¹‹ä¸º<strong>Xacro</strong></p>
<p>Xacro æ˜¯ XML Macros çš„ç¼©å†™ï¼ŒXacro æ˜¯ä¸€ç§ XML å®è¯­è¨€ï¼Œæ˜¯å¯ç¼–ç¨‹çš„ XML</p>
<p>Xacro å¯ä»¥å£°æ˜å˜é‡ï¼Œå¯ä»¥é€šè¿‡æ•°å­¦è¿ç®—æ±‚è§£ï¼Œä½¿ç”¨æµç¨‹æ§åˆ¶æ§åˆ¶æ‰§è¡Œé¡ºåºï¼Œè¿˜å¯ä»¥é€šè¿‡ç±»ä¼¼å‡½æ•°çš„å®ç°ï¼Œå°è£…å›ºå®šçš„é€»è¾‘ï¼Œå°†é€»è¾‘ä¸­éœ€è¦çš„å¯å˜çš„æ•°æ®ä»¥å‚æ•°çš„æ–¹å¼æš´éœ²å‡ºå»ï¼Œä»è€Œæé«˜ä»£ç å¤ç”¨ç‡ä»¥åŠç¨‹åºçš„å®‰å…¨æ€§ã€‚</p>
<h4 id="Xacroä½“éªŒ"><a href="#Xacroä½“éªŒ" class="headerlink" title="Xacroä½“éªŒ"></a>Xacroä½“éªŒ</h4><p><font color="Violetred">æ³¨æ„ï¼šè¯¥æ¡ˆä¾‹ç¼–å†™ç”Ÿæˆçš„æ˜¯éæ³•çš„ URDF æ–‡ä»¶ï¼Œç›®çš„åœ¨äºæ¼”ç¤º Xacro çš„æç®€ä½¿ç”¨ä»¥åŠä¼˜ç‚¹</font></p>
<p>ç¼–å†™ Xacro æ–‡ä»¶ï¼Œä»¥å˜é‡çš„æ–¹å¼å°è£…å±æ€§(å¸¸é‡åŠå¾„ã€é«˜åº¦ã€è½¦è½®åŠå¾„â€¦)ï¼Œä»¥å‡½æ•°çš„æ–¹å¼å°è£…é‡å¤å®ç°(è½¦è½®çš„æ·»åŠ )</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"mycar"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å±æ€§å°è£… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"wheel_radius"</span> <span class="attr">value</span>=<span class="string">"0.0325"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"wheel_length"</span> <span class="attr">value</span>=<span class="string">"0.0015"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"PI"</span> <span class="attr">value</span>=<span class="string">"3.1415927"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"base_link_length"</span> <span class="attr">value</span>=<span class="string">"0.08"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"lidi_space"</span> <span class="attr">value</span>=<span class="string">"0.015"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">"wheel_func"</span> <span class="attr">params</span>=<span class="string">"wheel_name flag"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"${wheel_name}_wheel"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"${wheel_radius}"</span> <span class="attr">length</span>=<span class="string">"${wheel_length}"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0 0 0"</span> <span class="attr">rpy</span>=<span class="string">"${PI / 2} 0 0"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"wheel_color"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"0 0 0 0.3"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 3-2.joint --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"${wheel_name}2link"</span> <span class="attr">type</span>=<span class="string">"continuous"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_link"</span>  /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"${wheel_name}_wheel"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">                x æ— åç§»</span></span><br><span class="line"><span class="comment">                y è½¦ä½“åŠå¾„</span></span><br><span class="line"><span class="comment">                z z= è½¦ä½“é«˜åº¦ / 2 + ç¦»åœ°é—´è· - è½¦è½®åŠå¾„</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0 ${0.1 * flag} ${(base_link_length / 2 + lidi_space - wheel_radius) * -1}"</span> <span class="attr">rpy</span>=<span class="string">"0 0 0"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">"0 1 0"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:wheel_func</span> <span class="attr">wheel_name</span>=<span class="string">"left"</span> <span class="attr">flag</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:wheel_func</span> <span class="attr">wheel_name</span>=<span class="string">"right"</span> <span class="attr">flag</span>=<span class="string">"-1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å‘½ä»¤è¡Œè¿›å…¥ xacroæ–‡ä»¶æ‰€å±ç›®å½•ï¼Œæ‰§è¡Œ:<code>rosrun xacro xacro xxx.xacro &gt; xxx.urdf</code>, ä¼šå°† xacro æ–‡ä»¶è§£æä¸º urdf æ–‡ä»¶(åŒä¸€ç›®å½•ä¸‹)</p>
<h4 id="Xacroè¯­æ³•è¯¦è§£"><a href="#Xacroè¯­æ³•è¯¦è§£" class="headerlink" title="Xacroè¯­æ³•è¯¦è§£"></a>Xacroè¯­æ³•è¯¦è§£</h4><p>xacro æä¾›äº†å¯ç¼–ç¨‹æ¥å£ï¼Œç±»ä¼¼äºè®¡ç®—æœºè¯­è¨€ï¼ŒåŒ…æ‹¬å˜é‡å£°æ˜è°ƒç”¨ã€å‡½æ•°å£°æ˜ä¸è°ƒç”¨ç­‰è¯­æ³•å®ç°</p>
<p>åœ¨ä½¿ç”¨ xacro ç”Ÿæˆ urdf æ—¶ï¼Œæ ¹æ ‡ç­¾<code>robot</code>ä¸­å¿…é¡»åŒ…å«å‘½åç©ºé—´å£°æ˜</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:xacro="http://wiki.ros.org/xacro"</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å±æ€§ä¸ç®—æ•°è¿ç®—</strong></p>
<p>ç”¨äºå°è£… URDF ä¸­çš„ä¸€äº›å­—æ®µï¼Œæ¯”å¦‚ï¼šPAI å€¼ï¼Œå°è½¦çš„å°ºå¯¸ï¼Œè½®å­åŠå¾„ â€¦.</p>
<p>å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"PI"</span> <span class="attr">value</span>=<span class="string">"3.1415927"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å±æ€§è°ƒç”¨ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ${å±æ€§åç§°} --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">UseProperty</span> <span class="attr">name</span> = <span class="string">"${PI}"</span>/&gt;</span> </span><br></pre></td></tr></tbody></table></figure>

<p>ç®—æœ¯è¿ç®—ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--${æ•°å­¦è¡¨è¾¾å¼}--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">UseProperty1</span> <span class="attr">result</span> = <span class="string">"${PI/2}"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®</strong></p>
<p>ç±»ä¼¼äºå‡½æ•°å®ç°ï¼Œæé«˜ä»£ç å¤ç”¨ç‡ï¼Œä¼˜åŒ–ä»£ç ç»“æ„ï¼Œæé«˜å®‰å…¨æ€§</p>
<p>å®å®šä¹‰ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">"å®åç§°"</span> <span class="attr">params</span>=<span class="string">"å‚æ•°åˆ—è¡¨(å¤šå‚æ•°ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”)"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    .....</span><br><span class="line"></span><br><span class="line">    å‚æ•°è°ƒç”¨æ ¼å¼: ${å‚æ•°å}</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å®è°ƒç”¨ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xacro:å®åç§°</span> <span class="attr">å‚æ•°1</span>=<span class="string">""</span> <span class="attr">å‚æ•°2</span>=<span class="string">""</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–‡ä»¶åŒ…å«</strong></p>
<p>æœºå™¨äººç”±å¤šéƒ¨ä»¶ç»„æˆï¼Œä¸åŒéƒ¨ä»¶å¯èƒ½å°è£…ä¸ºå•ç‹¬çš„ xacro æ–‡ä»¶ï¼Œæœ€åå†å°†ä¸åŒçš„æ–‡ä»¶é›†æˆï¼Œç»„åˆä¸ºå®Œæ•´æœºå™¨äººï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶åŒ…å«å®ç°</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"xxx"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"my_base.xacro"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"my_camera.xacro"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"my_laser.xacro"</span> /&gt;</span></span><br><span class="line">      ....</span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="Xacroå®Œæ•´ä½¿ç”¨"><a href="#Xacroå®Œæ•´ä½¿ç”¨" class="headerlink" title="Xacroå®Œæ•´ä½¿ç”¨"></a>Xacroå®Œæ•´ä½¿ç”¨</h4><p>éœ€æ±‚æè¿°ï¼šä½¿ç”¨ Xacro ä¼˜åŒ– URDF ç‰ˆçš„å°è½¦åº•ç›˜æ¨¡å‹å®ç°</p>
<p>ç¼–å†™ Xacro æ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://www.ros.org/wiki/xacro"</span> <span class="attr">name</span>=<span class="string">"mycar"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°è£…å¸¸é‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"PI"</span> <span class="attr">value</span>=<span class="string">"3.1415927"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"footprint_radius"</span> <span class="attr">value</span>=<span class="string">"0.001"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®:é»‘è‰²è®¾ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"black"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"0.0 0.0 0.0 1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åº•ç›˜å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"base_radius"</span> <span class="attr">value</span>=<span class="string">"0.1"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"base_length"</span> <span class="attr">value</span>=<span class="string">"0.08"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"ground_distance"</span> <span class="attr">value</span>=<span class="string">"0.015"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½® base_footprint  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"base_footprint"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">"${footprint_radius}"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ åº•ç›˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"${base_radius}"</span> <span class="attr">length</span>=<span class="string">"${base_length}"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"base_link_color"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"0.8 0.3 0.1 0.5"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span>       </span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ å…³èŠ‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"base_link2base_footprint"</span> <span class="attr">type</span>=<span class="string">"fixed"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_footprint"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"base_link"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å…³èŠ‚zè®¾ç½®: è½¦èº«é«˜åº¦/2 + ç¦»åœ°è·ç¦»--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 ${base_length/2 + ground_distance}"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"wheel_radius"</span> <span class="attr">value</span>=<span class="string">"0.0325"</span> /&gt;</span><span class="comment">&lt;!-- åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"wheel_length"</span> <span class="attr">value</span>=<span class="string">"0.015"</span> /&gt;</span><span class="comment">&lt;!-- å®½åº¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"wheel_joint_z"</span> <span class="attr">value</span>=<span class="string">"${-(base_length/2 + ground_distance - wheel_radius)}"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        direction: left or right</span></span><br><span class="line"><span class="comment">        flag: 1 or -1</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span> = <span class="string">"wheel_func"</span> <span class="attr">params</span>=<span class="string">"direction flag"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"${direction}_wheel"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"${wheel_radius}"</span> <span class="attr">length</span>=<span class="string">"${wheel_length}"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"${flag*PI/2} 0.0 0.0"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"black"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">link</span>&gt;</span>   </span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"${direction}_wheel2base_link"</span> <span class="attr">type</span>=<span class="string">"continuous"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_link"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"${direction}_wheel"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 ${flag*(base_radius)} ${wheel_joint_z}"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">"0 1 0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:wheel_func</span> <span class="attr">direction</span>=<span class="string">"left"</span> <span class="attr">flag</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:wheel_func</span> <span class="attr">direction</span>=<span class="string">"right"</span> <span class="attr">flag</span>=<span class="string">"-1"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¸‡å‘è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span> = <span class="string">"support_wheel_radius"</span> <span class="attr">value</span> =<span class="string">"0.0075"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"support_wheel_joint_z"</span> <span class="attr">value</span>=<span class="string">"${-(base_length/2 + ground_distance - support_wheel_radius)}"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¸‡å‘è½®(æ”¯æ’‘è½®)å® --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span> = <span class="string">"add_support_wheel"</span> <span class="attr">params</span>=<span class="string">"direction flag"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"${direction}_wheel"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">"${support_wheel_radius}"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"black"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"${direction}_wheel2base_link"</span> <span class="attr">type</span>=<span class="string">"continuous"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_link"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"${direction}_wheel"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"${flag*(base_radius - support_wheel_radius)} 0.0 ${support_wheel_joint_z}"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">"1 1 1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">direction</span>=<span class="string">"front"</span> <span class="attr">flag</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">direction</span>=<span class="string">"back"</span> <span class="attr">flag</span>=<span class="string">"-1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¯¹æ¯”ä¹‹å‰çš„ç‰ˆæœ¬å®ç°äº†ä»£ç å¤ç”¨</p>
<p>é›†æˆlaunchæ–‡ä»¶ï¼š<font color="Violetred">åœ¨ launch æ–‡ä»¶ä¸­ç›´æ¥åŠ è½½ xacro</font></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;param name="robot_description" textfile="$(find urdf01_rviz)/urdf/urdf/test.urdf" /&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"robot_description"</span> <span class="attr">command</span> = <span class="string">"$(find xacro)/xacro $(find urdf01_rviz)/urdf/xacro/test.urdf.xacro"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span> = <span class="string">"rviz"</span> <span class="attr">type</span> = <span class="string">"rviz"</span> <span class="attr">name</span> = <span class="string">"rviz"</span> <span class="attr">args</span> = <span class="string">"-d $(find urdf01_rviz)/config/show_car.rviz"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  å…³èŠ‚çŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  æœºå™¨äººçŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">type</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">name</span>=<span class="string">"robot_state_publisher"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ æ§åˆ¶å…³èŠ‚è¿åŠ¨çš„èŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher_gui"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher_gui"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher_gui"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ ¸å¿ƒä»£ç ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"robot_description"</span> <span class="attr">command</span> = <span class="string">"$(find xacro)/xacro $(find urdf01_rviz)/urdf/xacro/test.urdf.xacro"</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åŠ è½½<code>robot_description</code>æ—¶ä½¿ç”¨<code>command</code>å±æ€§ï¼Œå±æ€§å€¼å°±æ˜¯è°ƒç”¨ xacro åŠŸèƒ½åŒ…çš„ xacro ç¨‹åºç›´æ¥è§£æ xacro æ–‡ä»¶</p>
<h4 id="Xacroå®æ“"><a href="#Xacroå®æ“" class="headerlink" title="Xacroå®æ“"></a>Xacroå®æ“</h4><p>éœ€æ±‚æè¿°ï¼šåœ¨å‰é¢å°è½¦åº•ç›˜åŸºç¡€ä¹‹ä¸Šï¼Œæ·»åŠ æ‘„åƒå¤´å’Œé›·è¾¾ä¼ æ„Ÿå™¨</p>
<p>å®ç°åˆ†æï¼š</p>
<p>æœºå™¨äººæ¨¡å‹ç”±å¤šéƒ¨ä»¶ç»„æˆï¼Œå¯ä»¥å°†ä¸åŒç»„ä»¶è®¾ç½®è¿›å•ç‹¬æ–‡ä»¶ï¼Œæœ€ç»ˆé€šè¿‡æ–‡ä»¶åŒ…å«å®ç°ç»„ä»¶çš„æ‹¼è£…ã€‚</p>
<p>å®ç°æµç¨‹ï¼š</p>
<ol>
<li>é¦–å…ˆç¼–å†™æ‘„åƒå¤´å’Œé›·è¾¾çš„ xacro æ–‡ä»¶</li>
<li>ç„¶åå†ç¼–å†™ä¸€ä¸ªç»„åˆæ–‡ä»¶ï¼Œç»„åˆåº•ç›˜ã€æ‘„åƒå¤´ä¸é›·è¾¾</li>
<li>æœ€åï¼Œé€šè¿‡ launch æ–‡ä»¶å¯åŠ¨ Rviz å¹¶æ˜¾ç¤ºæ¨¡å‹</li>
</ol>
<p>**æ‘„åƒå¤´Xacro **</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://www.ros.org/wiki/xacro"</span> <span class="attr">name</span>=<span class="string">"camera"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‘„åƒå¤´å±æ€§ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        è¿æ†å±æ€§ï¼šåšåº¦ã€å®½åº¦ã€é«˜åº¦</span></span><br><span class="line"><span class="comment">        å…³èŠ‚å±æ€§ï¼šx y z</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"camera_length"</span> <span class="attr">value</span>=<span class="string">"0.02"</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´é•¿åº¦(x) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"camera_width"</span> <span class="attr">value</span>=<span class="string">"0.02"</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®½åº¦(y) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"camera_height"</span> <span class="attr">value</span>=<span class="string">"0.02"</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´é«˜åº¦(z) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"camera_x"</span> <span class="attr">value</span>=<span class="string">"0.08"</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®‰è£…çš„xåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"camera_y"</span> <span class="attr">value</span>=<span class="string">"0.0"</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®‰è£…çš„yåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"camera_z"</span> <span class="attr">value</span>=<span class="string">"${base_length / 2 + camera_height / 2}"</span> /&gt;</span> <span class="comment">&lt;!-- æ‘„åƒå¤´å®‰è£…çš„zåæ ‡:åº•ç›˜é«˜åº¦ / 2 + æ‘„åƒå¤´é«˜åº¦ / 2  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‘„åƒå¤´å…³èŠ‚ä»¥åŠlink --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"camera"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span>=<span class="string">"${camera_length} ${camera_width} ${camera_height}"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"black"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"camera2base_link"</span> <span class="attr">type</span>=<span class="string">"fixed"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_link"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"camera"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"${camera_x} ${camera_y} ${camera_z}"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>é›·è¾¾Xacro</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://www.ros.org/wiki/xacro"</span> <span class="attr">name</span>=<span class="string">"laser"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é›·è¾¾æ”¯æ¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"support_length"</span> <span class="attr">value</span>=<span class="string">"0.15"</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶é•¿åº¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"support_radius"</span> <span class="attr">value</span>=<span class="string">"0.01"</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"support_x"</span> <span class="attr">value</span>=<span class="string">"0.0"</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶å®‰è£…çš„xåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"support_y"</span> <span class="attr">value</span>=<span class="string">"0.0"</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶å®‰è£…çš„yåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"support_z"</span> <span class="attr">value</span>=<span class="string">"${base_length / 2 + support_length / 2}"</span> /&gt;</span> <span class="comment">&lt;!-- æ”¯æ¶å®‰è£…çš„zåæ ‡:åº•ç›˜é«˜åº¦ / 2 + æ”¯æ¶é«˜åº¦ / 2  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"support"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"${support_radius}"</span> <span class="attr">length</span>=<span class="string">"${support_length}"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"red"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"0.8 0.2 0.0 0.8"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"support2base_link"</span> <span class="attr">type</span>=<span class="string">"fixed"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"base_link"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"support"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"${support_x} ${support_y} ${support_z}"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é›·è¾¾å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"laser_length"</span> <span class="attr">value</span>=<span class="string">"0.05"</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾é•¿åº¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"laser_radius"</span> <span class="attr">value</span>=<span class="string">"0.03"</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾åŠå¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"laser_x"</span> <span class="attr">value</span>=<span class="string">"0.0"</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾å®‰è£…çš„xåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"laser_y"</span> <span class="attr">value</span>=<span class="string">"0.0"</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾å®‰è£…çš„yåæ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"laser_z"</span> <span class="attr">value</span>=<span class="string">"${support_length / 2 + laser_length / 2}"</span> /&gt;</span> <span class="comment">&lt;!-- é›·è¾¾å®‰è£…çš„zåæ ‡:æ”¯æ¶é«˜åº¦ / 2 + é›·è¾¾é«˜åº¦ / 2  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é›·è¾¾å…³èŠ‚ä»¥åŠlink --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"laser"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"${laser_radius}"</span> <span class="attr">length</span>=<span class="string">"${laser_length}"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"black"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"laser2support"</span> <span class="attr">type</span>=<span class="string">"fixed"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">"support"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">"laser"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"${laser_x} ${laser_y} ${laser_z}"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»„åˆåº•ç›˜æ‘„åƒå¤´ä¸é›·è¾¾</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"my_car_camera"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç»„åˆå°è½¦åº•ç›˜ä¸æ‘„åƒå¤´ä¸é›·è¾¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"base.urdf.xacro"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"camera.urdf.xacro"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"laser.urdf.xacro"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>launch æ–‡ä»¶</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"robot_description"</span> <span class="attr">command</span>=<span class="string">"$(find xacro)/xacro $(find urdf01_rviz)/urdf/xacro/combination.urdf.xacro"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span> = <span class="string">"rviz"</span> <span class="attr">type</span> = <span class="string">"rviz"</span> <span class="attr">name</span> = <span class="string">"rviz"</span> <span class="attr">args</span> = <span class="string">"-d $(find urdf01_rviz)/config/show_car.rviz"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  å…³èŠ‚çŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  æœºå™¨äººçŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">type</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">name</span>=<span class="string">"robot_state_publisher"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ æ§åˆ¶å…³èŠ‚è¿åŠ¨çš„èŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher_gui"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher_gui"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher_gui"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="Rvizæ§åˆ¶è¿åŠ¨"><a href="#Rvizæ§åˆ¶è¿åŠ¨" class="headerlink" title="Rvizæ§åˆ¶è¿åŠ¨"></a>Rvizæ§åˆ¶è¿åŠ¨</h3><p>Arbotix æ˜¯ä¸€æ¬¾æ§åˆ¶ç”µæœºã€èˆµæœºçš„æ§åˆ¶æ¿ï¼Œå¹¶æä¾›ç›¸åº”çš„ ros åŠŸèƒ½åŒ…</p>
<p>è¿™ä¸ªåŠŸèƒ½åŒ…ä¸ä»…å¯ä»¥é©±åŠ¨çœŸå®çš„ Arbotix æ§åˆ¶æ¿ï¼Œå®ƒè¿˜æä¾›ä¸€ä¸ªå·®é€Ÿæ§åˆ¶å™¨ï¼Œé€šè¿‡æ¥å—é€Ÿåº¦æ§åˆ¶æŒ‡ä»¤æ›´æ–°æœºå™¨äººçš„ joint çŠ¶æ€ï¼Œä»è€Œå¸®åŠ©æˆ‘ä»¬å®ç°æœºå™¨äººåœ¨ rviz ä¸­çš„è¿åŠ¨</p>
<p>Arbotixä½¿ç”¨æµç¨‹ï¼š</p>
<ol>
<li>å®‰è£… Arbotix</li>
<li>åˆ›å»ºæ–°åŠŸèƒ½åŒ…ï¼Œå‡†å¤‡æœºå™¨äºº urdfã€xacro æ–‡ä»¶</li>
<li>æ·»åŠ  Arbotix é…ç½®æ–‡ä»¶</li>
<li>ç¼–å†™ launch æ–‡ä»¶é…ç½® Arbotix</li>
<li>å¯åŠ¨ launch æ–‡ä»¶å¹¶æ§åˆ¶æœºå™¨äººæ¨¡å‹è¿åŠ¨</li>
</ol>
<p><strong>å®‰è£… Arbotix</strong></p>
<p>æ–¹å¼1ï¼šå‘½ä»¤è¡Œè°ƒç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-&lt;&lt;VersionName()&gt;&gt;-arbotix</span><br><span class="line">sudo apt-get install ros-noetic-arbotix</span><br></pre></td></tr></tbody></table></figure>

<p>å°† &lt;&lt;VsersionName()&gt;&gt; æ›¿æ¢æˆå½“å‰ ROS ç‰ˆæœ¬åç§°ï¼Œå¦‚æœæç¤ºåŠŸèƒ½åŒ…æ— æ³•å®šä½ï¼Œè¯·é‡‡ç”¨æ–¹å¼2</p>
<p>æ–¹å¼2ï¼šæºç å®‰è£…</p>
<p>å…ˆä» github ä¸‹è½½æºç ï¼Œç„¶åè°ƒç”¨ catkin_make ç¼–è¯‘</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/vanadiumlabs/arbotix_ros.git</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ›å»ºæ–°åŠŸèƒ½åŒ…ï¼Œå‡†å¤‡æœºå™¨äºº urdfã€xacro</strong></p>
<p>urdf å’Œ xacro è°ƒç”¨ä¸Šä¸€è®²å®ç°å³å¯</p>
<p><strong>æ·»åŠ  arbotix æ‰€éœ€çš„é…ç½®æ–‡ä»¶</strong></p>
<p>åœ¨configæ–‡ä»¶å¤¹ä¸‹å¢åŠ æ–‡ä»¶<code>control.yaml</code></p>
<p>èŒƒæœ¬ï¼š</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯¥æ–‡ä»¶æ˜¯æ§åˆ¶å™¨é…ç½®,ä¸€ä¸ªæœºå™¨äººæ¨¡å‹å¯èƒ½æœ‰å¤šä¸ªæ§åˆ¶å™¨ï¼Œæ¯”å¦‚: åº•ç›˜ã€æœºæ¢°è‡‚ã€å¤¹æŒå™¨(æœºæ¢°æ‰‹)....</span></span><br><span class="line"><span class="comment"># å› æ­¤ï¼Œæ ¹ name æ˜¯ controller</span></span><br><span class="line"><span class="attr">controllers:</span> {</span><br><span class="line">   <span class="comment"># å•æ§åˆ¶å™¨è®¾ç½®</span></span><br><span class="line">   <span class="attr">base_controller:</span> {</span><br><span class="line">          <span class="comment">#ç±»å‹: å·®é€Ÿæ§åˆ¶å™¨</span></span><br><span class="line">       <span class="attr">type:</span> <span class="string">diff_controller</span>,</span><br><span class="line">       <span class="comment">#å‚è€ƒåæ ‡(ä¸€èˆ¬æ˜¯æ ¹åæ ‡ç³»)</span></span><br><span class="line">       <span class="attr">base_frame_id:</span> <span class="string">base_footprint</span>, </span><br><span class="line">       <span class="comment">#ä¸¤ä¸ªè½®å­ä¹‹é—´çš„é—´è·</span></span><br><span class="line">       <span class="attr">base_width:</span> <span class="number">0.2</span>,</span><br><span class="line">       <span class="comment">#æ§åˆ¶é¢‘ç‡</span></span><br><span class="line">       <span class="attr">ticks_meter:</span> <span class="number">2000</span>, </span><br><span class="line">       <span class="comment">#PIDæ§åˆ¶å‚æ•°ï¼Œä½¿æœºå™¨äººè½¦è½®å¿«é€Ÿè¾¾åˆ°é¢„æœŸé€Ÿåº¦</span></span><br><span class="line">       <span class="attr">Kp:</span> <span class="number">12</span>, </span><br><span class="line">       <span class="attr">Kd:</span> <span class="number">12</span>, </span><br><span class="line">       <span class="attr">Ki:</span> <span class="number">0</span>, </span><br><span class="line">       <span class="attr">Ko:</span> <span class="number">50</span>, </span><br><span class="line">       <span class="comment">#åŠ é€Ÿé™åˆ¶</span></span><br><span class="line">       <span class="attr">accel_limit:</span> <span class="number">1.0</span> </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>launch æ–‡ä»¶ä¸­é…ç½® arbotix èŠ‚ç‚¹</strong></p>
<p>å¢æ·»éƒ¨åˆ†</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">"arbotix"</span> <span class="attr">pkg</span>=<span class="string">"arbotix_python"</span> <span class="attr">type</span>=<span class="string">"arbotix_driver"</span> <span class="attr">output</span>=<span class="string">"screen"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">file</span>=<span class="string">"$(find my_urdf05_rviz)/config/hello.yaml"</span> <span class="attr">command</span>=<span class="string">"load"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"sim"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><p>node è°ƒç”¨äº† arbotix_python åŠŸèƒ½åŒ…ä¸‹çš„ arbotix_driver èŠ‚ç‚¹</p>
</li>
<li><p>rosparamï¼šarbotix é©±åŠ¨æœºå™¨äººè¿è¡Œæ—¶ï¼Œéœ€è¦è·å–æœºå™¨äººä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ file åŠ è½½é…ç½®æ–‡ä»¶</p>
</li>
<li><p>paramï¼šåœ¨ä»¿çœŸç¯å¢ƒä¸‹ï¼Œéœ€è¦é…ç½® sim ä¸º true</p>
</li>
</ul>
<p><strong>å¯åŠ¨ launch æ–‡ä»¶å¹¶æ§åˆ¶æœºå™¨äººæ¨¡å‹è¿åŠ¨</strong></p>
<p>é…ç½® rvizï¼š</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/Snipaste_2025-06-15_19-48-15.webp" alt="Snipaste_2025-06-15_19-48-15" style="zoom: 50%;">

<p>æ§åˆ¶å°è½¦è¿åŠ¨ï¼š</p>
<p>å‘å¸ƒ cmd_vel è¯é¢˜æ¶ˆæ¯æ§åˆ¶å°è½¦è¿åŠ¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rostopic pub -r 10 /cmd_vel [TAB] [TAB]</span><br></pre></td></tr></tbody></table></figure>

<h3 id="URDFé›†æˆGazebo"><a href="#URDFé›†æˆGazebo" class="headerlink" title="URDFé›†æˆGazebo"></a>URDFé›†æˆGazebo</h3><h4 id="åŸºæœ¬é›†æˆæµç¨‹"><a href="#åŸºæœ¬é›†æˆæµç¨‹" class="headerlink" title="åŸºæœ¬é›†æˆæµç¨‹"></a>åŸºæœ¬é›†æˆæµç¨‹</h4><p><strong>åˆ›å»ºåŠŸèƒ½åŒ…</strong></p>
<p>å¯¼å…¥ä¾èµ–åŒ…: urdfã€xacroã€gazebo_rosã€gazebo_ros_controlã€gazebo_plugins</p>
<p><strong>ç¼–å†™URDFæ–‡ä»¶</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"mycar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span>=<span class="string">"0.5 0.2 0.1"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span> <span class="attr">name</span>=<span class="string">"yellow"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">rgba</span>=<span class="string">"1 1 0.0 0.5"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®ç¢°æ’å‚æ•° --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¦‚æœæ˜¯æ ‡å‡†å‡ ä½•ç‰©ä½“,ç›´æ¥å¤åˆ¶ visual çš„ geometry å’Œ origin å³å¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">box</span> <span class="attr">size</span>=<span class="string">"0.5 0.2 0.1"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®æƒ¯æ€§çŸ©é˜µ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ç›¸å½“äºè®¾ç½®é‡å¿ƒåç§»,å¦‚æœè´¨é‡å‡åŒ€åŸºæœ¬å°±å’Œå…³èŠ‚ä¸€æ · --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä¸åŒç»´åº¦ä¸Šçš„æƒ¯æ€§å€¼ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">"1"</span> <span class="attr">ixy</span>=<span class="string">"0.0"</span> <span class="attr">ixz</span>=<span class="string">"0.0"</span> <span class="attr">iyy</span>=<span class="string">"1"</span> <span class="attr">iyz</span>=<span class="string">"0.0"</span> <span class="attr">izz</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- gzeboæœ‰è‡ªå·±çš„é¢œè‰²è®¾ç½®æ ‡ç­¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span> =<span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨æ„è¿™é‡ŒGazoboå’Œé¢œè‰²é¦–å­—æ¯å¿…é¡»å¤§å†™ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Red<span class="tag">&lt;/<span class="name">material</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å½“ URDF éœ€è¦ä¸ Gazebo é›†æˆæ—¶ï¼Œå’Œ Rviz æœ‰æ˜æ˜¾åŒºåˆ«ï¼š</p>
<p>1.å¿…é¡»ä½¿ç”¨ collision æ ‡ç­¾ï¼Œå› ä¸ºæ—¢ç„¶æ˜¯ä»¿çœŸç¯å¢ƒï¼Œé‚£ä¹ˆå¿…ç„¶æ¶‰åŠåˆ°ç¢°æ’æ£€æµ‹ï¼Œcollision æä¾›ç¢°æ’æ£€æµ‹çš„ä¾æ®ã€‚</p>
<p>2.å¿…é¡»ä½¿ç”¨ inertial æ ‡ç­¾ï¼Œæ­¤æ ‡ç­¾æ ‡æ³¨äº†å½“å‰æœºå™¨äººæŸä¸ªåˆšä½“éƒ¨åˆ†çš„æƒ¯æ€§çŸ©é˜µï¼Œç”¨äºä¸€äº›åŠ›å­¦ç›¸å…³çš„ä»¿çœŸè®¡ç®—ã€‚</p>
<p>3.é¢œè‰²è®¾ç½®ï¼Œä¹Ÿéœ€è¦é‡æ–°ä½¿ç”¨ gazebo æ ‡ç­¾æ ‡æ³¨ï¼Œå› ä¸ºä¹‹å‰çš„é¢œè‰²è®¾ç½®ä¸ºäº†æ–¹ä¾¿è°ƒè¯•åŒ…å«é€æ˜åº¦ï¼Œä»¿çœŸç¯å¢ƒä¸‹æ²¡æœ‰æ­¤é€‰é¡¹</p>
<p><strong>å¯åŠ¨Gazeboå¹¶æ˜¾ç¤ºæ¨¡å‹</strong></p>
<p>launch æ–‡ä»¶å®ç°</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°† Urdf æ–‡ä»¶çš„å†…å®¹åŠ è½½åˆ°å‚æ•°æœåŠ¡å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"robot_description"</span> <span class="attr">textfile</span> = <span class="string">"$(find urdf02_gazebo)/urdf/demo01_helloworld.urdf"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ gazebo --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find gazebo_ros)/launch/empty_world.launch"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨ gazebo ä¸­æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"gazebo_ros"</span> <span class="attr">type</span>=<span class="string">"spawn_model"</span> <span class="attr">name</span>=<span class="string">"model"</span> <span class="attr">args</span>=<span class="string">"-urdf -model mycar -param robot_description"</span>  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä»£ç è§£é‡Šï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find gazebo_ros)/launch/empty_world.launch"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯åŠ¨ Gazebo çš„ä»¿çœŸç¯å¢ƒï¼Œå½“å‰ç¯å¢ƒä¸ºç©ºç¯å¢ƒ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"gazebo_ros"</span> <span class="attr">type</span>=<span class="string">"spawn_model"</span> <span class="attr">name</span>=<span class="string">"model"</span> <span class="attr">args</span>=<span class="string">"-urdf -model mycar -param robot_description"</span>  /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    åœ¨ Gazebo ä¸­åŠ è½½ä¸€ä¸ªæœºå™¨äººæ¨¡å‹ï¼Œè¯¥åŠŸèƒ½ç”± gazebo_ros ä¸‹çš„ spawn_model æä¾›:</span></span><br><span class="line"><span class="comment">    -urdf åŠ è½½çš„æ˜¯ urdf æ–‡ä»¶</span></span><br><span class="line"><span class="comment">    -model mycar æ¨¡å‹åç§°æ˜¯ mycar</span></span><br><span class="line"><span class="comment">    -param robot_description ä»å‚æ•° robot_description ä¸­è½½å…¥æ¨¡å‹</span></span><br><span class="line"><span class="comment">    -x æ¨¡å‹è½½å…¥çš„ x åæ ‡</span></span><br><span class="line"><span class="comment">    -y æ¨¡å‹è½½å…¥çš„ y åæ ‡</span></span><br><span class="line"><span class="comment">    -z æ¨¡å‹è½½å…¥çš„ z åæ ‡</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="ç›¸å…³è®¾ç½®"><a href="#ç›¸å…³è®¾ç½®" class="headerlink" title="ç›¸å…³è®¾ç½®"></a>ç›¸å…³è®¾ç½®</h4><p>è¾ƒä¹‹äº rvizï¼Œgazeboåœ¨é›†æˆ URDF æ—¶ï¼Œéœ€è¦åšäº›è®¸ä¿®æ”¹</p>
<p>æ¯”å¦‚ï¼šå¿…é¡»æ·»åŠ  collision ç¢°æ’å±æ€§ç›¸å…³å‚æ•°ã€å¿…é¡»æ·»åŠ  inertial æƒ¯æ€§çŸ©é˜µç›¸å…³å‚æ•°</p>
<p>å¦å¤–ï¼Œå¦‚æœç›´æ¥ç§»æ¤ Rviz ä¸­æœºå™¨äººçš„é¢œè‰²è®¾ç½®æ˜¯æ²¡æœ‰æ˜¾ç¤ºçš„ï¼Œé¢œè‰²è®¾ç½®ä¹Ÿå¿…é¡»åšç›¸åº”çš„å˜æ›´</p>
<p><strong>collision</strong></p>
<p>å¦‚æœæœºå™¨äººlinkæ˜¯æ ‡å‡†çš„å‡ ä½•ä½“å½¢çŠ¶ï¼Œå’Œlinkçš„visualå±æ€§è®¾ç½®ä¸€è‡´å³å¯</p>
<p><strong>inertial</strong></p>
<p>æƒ¯æ€§çŸ©é˜µçš„è®¾ç½®éœ€è¦ç»“åˆlinkçš„è´¨é‡ä¸å¤–å½¢å‚æ•°åŠ¨æ€ç”Ÿæˆï¼Œæ ‡å‡†çš„çƒä½“ã€åœ†æŸ±ä¸ç«‹æ–¹ä½“çš„æƒ¯æ€§çŸ©é˜µå…¬å¼å¦‚ä¸‹(å°è£…ä¸º xacro å®ç°)ï¼š</p>
<p>çƒä½“æƒ¯æ€§çŸ©é˜µï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Macro for inertia matrix --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">"sphere_inertial_matrix"</span> <span class="attr">params</span>=<span class="string">"m r"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">"${m}"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">"${2*m*r*r/5}"</span> <span class="attr">ixy</span>=<span class="string">"0"</span> <span class="attr">ixz</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">iyy</span>=<span class="string">"${2*m*r*r/5}"</span> <span class="attr">iyz</span>=<span class="string">"0"</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">izz</span>=<span class="string">"${2*m*r*r/5}"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>åœ†æŸ±æƒ¯æ€§çŸ©é˜µï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">"cylinder_inertial_matrix"</span> <span class="attr">params</span>=<span class="string">"m r h"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">"${m}"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">"${m*(3*r*r+h*h)/12}"</span> <span class="attr">ixy</span> = <span class="string">"0"</span> <span class="attr">ixz</span> = <span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">iyy</span>=<span class="string">"${m*(3*r*r+h*h)/12}"</span> <span class="attr">iyz</span> = <span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">izz</span>=<span class="string">"${m*r*r/2}"</span> /&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç«‹æ–¹ä½“æƒ¯æ€§çŸ©é˜µï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">"Box_inertial_matrix"</span> <span class="attr">params</span>=<span class="string">"m l w h"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">"${m}"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">"${m*(w*w + h*h)/12}"</span> <span class="attr">ixy</span> = <span class="string">"0"</span> <span class="attr">ixz</span> = <span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">iyy</span>=<span class="string">"${m*(h*h + l*l)/12}"</span> <span class="attr">iyz</span>= <span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">izz</span>=<span class="string">"${m*(l*l + w*w)/12}"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>åŸåˆ™ä¸Šï¼Œé™¤äº† base_footprint å¤–ï¼Œæœºå™¨äººçš„æ¯ä¸ªåˆšä½“éƒ¨åˆ†éƒ½éœ€è¦è®¾ç½®æƒ¯æ€§çŸ©é˜µï¼Œä¸”æƒ¯æ€§çŸ©é˜µå¿…é¡»ç»è®¡ç®—å¾—å‡ºï¼Œå¦‚æœéšæ„å®šä¹‰åˆšä½“éƒ¨åˆ†çš„æƒ¯æ€§çŸ©é˜µï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¼è‡´æœºå™¨äººåœ¨ Gazebo ä¸­å‡ºç°æŠ–åŠ¨ï¼Œç§»åŠ¨ç­‰ç°è±¡</p>
<p>åœ¨ gazebo ä¸­æ˜¾ç¤º link çš„é¢œè‰²ï¼Œå¿…é¡»è¦ä½¿ç”¨æŒ‡å®šçš„æ ‡ç­¾</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">"linkèŠ‚ç‚¹åç§°"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Blue<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>material æ ‡ç­¾ä¸­ï¼Œè®¾ç½®çš„å€¼åŒºåˆ†å¤§å°å†™ï¼Œé¢œè‰²å¯ä»¥è®¾ç½®ä¸º Red Blue Green Black</p>
<h4 id="å®æ“"><a href="#å®æ“" class="headerlink" title="å®æ“"></a>å®æ“</h4><p>éœ€æ±‚æè¿°ï¼šå°†ä¹‹å‰çš„æœºå™¨äººæ¨¡å‹(xacroç‰ˆ)æ˜¾ç¤ºåœ¨ gazebo ä¸­</p>
<p>å®ç°æµç¨‹ï¼š</p>
<ol>
<li>éœ€è¦ç¼–å†™å°è£…æƒ¯æ€§çŸ©é˜µç®—æ³•çš„ xacro æ–‡ä»¶</li>
<li>ä¸ºæœºå™¨äººæ¨¡å‹ä¸­çš„æ¯ä¸€ä¸ª link æ·»åŠ  collision å’Œ inertial æ ‡ç­¾ï¼Œå¹¶ä¸”é‡ç½®é¢œè‰²å±æ€§</li>
<li>åœ¨ launch æ–‡ä»¶ä¸­å¯åŠ¨ gazebo å¹¶æ·»åŠ æœºå™¨äººæ¨¡å‹</li>
</ol>
<p><strong>ç¼–å†™å°è£…æƒ¯æ€§çŸ©é˜µç®—æ³•çš„ xacro æ–‡ä»¶</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://www.ros.org/wiki/xacro"</span> <span class="attr">name</span>=<span class="string">"base"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Macro for inertia matrix --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">"sphere_inertial_matrix"</span> <span class="attr">params</span>=<span class="string">"m r"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">"${m}"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">"${2*m*r*r/5}"</span> <span class="attr">ixy</span>=<span class="string">"0"</span> <span class="attr">ixz</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">iyy</span>=<span class="string">"${2*m*r*r/5}"</span> <span class="attr">iyz</span>=<span class="string">"0"</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">izz</span>=<span class="string">"${2*m*r*r/5}"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">"cylinder_inertial_matrix"</span> <span class="attr">params</span>=<span class="string">"m r h"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">"${m}"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">"${m*(3*r*r+h*h)/12}"</span> <span class="attr">ixy</span> = <span class="string">"0"</span> <span class="attr">ixz</span> = <span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">iyy</span>=<span class="string">"${m*(3*r*r+h*h)/12}"</span> <span class="attr">iyz</span> = <span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">izz</span>=<span class="string">"${m*r*r/2}"</span> /&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">"Box_inertial_matrix"</span> <span class="attr">params</span>=<span class="string">"m l w h"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">"${m}"</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">"${m*(w*w + h*h)/12}"</span> <span class="attr">ixy</span> = <span class="string">"0"</span> <span class="attr">ixz</span> = <span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">iyy</span>=<span class="string">"${m*(h*h + l*l)/12}"</span> <span class="attr">iyz</span>= <span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">izz</span>=<span class="string">"${m*(l*l + w*w)/12}"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¤åˆ¶ç›¸å…³ xacro æ–‡ä»¶ï¼Œå¹¶è®¾ç½® collision inertial ä»¥åŠ color ç­‰å‚æ•°</strong></p>
<p>å°†ä¸Šä¸€èŠ‚çš„xacroæ–‡ä»¶å¤åˆ¶ä¸€ä»½è¿›è¡Œä¿®æ”¹</p>
<p>ä»¥åº•ç›˜ä¸ºä¾‹ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">...  </span><br><span class="line">	<span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"base_mass"</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ åº•ç›˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"${base_radius}"</span> <span class="attr">length</span>=<span class="string">"${base_length}"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"${base_radius}"</span> <span class="attr">length</span>=<span class="string">"${base_length}"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è°ƒç”¨æƒ¯æ€§çŸ©é˜µå‡½æ•° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xacro:cylinder_inertial_matrix</span> <span class="attr">m</span>=<span class="string">"${base_mass}"</span> <span class="attr">r</span>=<span class="string">"${base_radius}"</span> <span class="attr">h</span>=<span class="string">"${base_length}"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">"base_link"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Yellow<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line">...</span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span>=<span class="string">"wheel_mass"</span> <span class="attr">value</span>=<span class="string">"0.05"</span> /&gt;</span><span class="comment">&lt;!-- è´¨é‡ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é©±åŠ¨è½®å® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        direction: left or right</span></span><br><span class="line"><span class="comment">        flag: 1 or -1</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span> = <span class="string">"wheel_func"</span> <span class="attr">params</span>=<span class="string">"direction flag"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"${direction}_wheel"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"${wheel_radius}"</span> <span class="attr">length</span>=<span class="string">"${wheel_length}"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"${flag*PI/2} 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">radius</span>=<span class="string">"${wheel_radius}"</span> <span class="attr">length</span>=<span class="string">"${wheel_length}"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"${flag*PI/2} 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xacro:cylinder_inertial_matrix</span> <span class="attr">m</span>=<span class="string">"${wheel_mass}"</span> <span class="attr">r</span>=<span class="string">"${wheel_radius}"</span> <span class="attr">h</span>=<span class="string">"${wheel_length}"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">link</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">"${direction}_wheel"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Red<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:wheel_func</span> <span class="attr">direction</span>=<span class="string">"left"</span> <span class="attr">flag</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:wheel_func</span> <span class="attr">direction</span>=<span class="string">"right"</span> <span class="attr">flag</span>=<span class="string">"-1"</span> /&gt;</span></span><br><span class="line">...</span><br><span class="line">    <span class="comment">&lt;!-- ä¸‡å‘è½®å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:property</span> <span class="attr">name</span> = <span class="string">"support_wheel_mass"</span> <span class="attr">value</span> =<span class="string">"0.01"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¸‡å‘è½®(æ”¯æ’‘è½®)å® --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span> = <span class="string">"add_support_wheel"</span> <span class="attr">params</span>=<span class="string">"direction flag"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">"${direction}_wheel"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">"${support_wheel_radius}"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">sphere</span> <span class="attr">radius</span>=<span class="string">"${support_wheel_radius}"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">"0.0 0.0 0.0"</span> <span class="attr">rpy</span>=<span class="string">"0.0 0.0 0.0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xacro:sphere_inertial_matrix</span> <span class="attr">m</span>=<span class="string">"${support_wheel_mass}"</span> <span class="attr">r</span>=<span class="string">"${support_wheel_radius}"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">"${direction}_wheel"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Red<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">direction</span>=<span class="string">"front"</span> <span class="attr">flag</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:add_support_wheel</span> <span class="attr">direction</span>=<span class="string">"back"</span> <span class="attr">flag</span>=<span class="string">"-1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸»è¦åˆ é™¤åŸæœ‰visualä¸‹çš„materialæ ‡ç­¾ï¼Œç„¶ååœ¨linkæ ‡ç­¾å†…å¢åŠ collisionæ ‡ç­¾ä»¥åŠè°ƒç”¨æƒ¯æ€§çŸ©é˜µå‡½æ•°ï¼Œåœ¨linkæ ‡ç­¾å¤–ä½¿ç”¨gazeboä¸‹çš„materialé™„åŠ é¢œè‰²</p>
<p>å¦‚æœæœºå™¨äººæ¨¡å‹åœ¨ Gazebo ä¸­äº§ç”Ÿäº†æŠ–åŠ¨ï¼Œæ»‘åŠ¨ï¼Œç¼“æ…¢ä½ç§»è¯¸å¦‚æ­¤ç±»æƒ…å†µï¼Œéœ€è¦è€ƒè™‘ï¼š</p>
<ol>
<li>æƒ¯æ€§çŸ©é˜µæ˜¯å¦è®¾ç½®äº†ï¼Œä¸”è®¾ç½®æ˜¯å¦æ­£ç¡®åˆç†</li>
<li>è½¦è½®ç¿»è½¬éœ€è¦ä¾èµ–äº PI å€¼ï¼Œå¦‚æœ PI å€¼ç²¾åº¦åä½ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´ä¸Šè¿°æƒ…å†µäº§ç”Ÿ</li>
</ol>
<p>åŒç†ä¿®æ”¹cameraå’Œlaserï¼Œå…·ä½“ä»£ç ä¸é™„</p>
<h4 id="ä»¿çœŸç¯å¢ƒæ­å»º"><a href="#ä»¿çœŸç¯å¢ƒæ­å»º" class="headerlink" title="ä»¿çœŸç¯å¢ƒæ­å»º"></a>ä»¿çœŸç¯å¢ƒæ­å»º</h4><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å°†æœºå™¨äººæ¨¡å‹æ˜¾ç¤ºåœ¨ Gazebo ä¹‹ä¸­äº†ï¼Œä½†æ˜¯å½“å‰é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ Gazebo ä¸­æœºå™¨äººæ¨¡å‹æ˜¯åœ¨ empty world ä¸­ï¼Œå¹¶æ²¡æœ‰ç±»ä¼¼äºæˆ¿é—´ã€å®¶å…·ã€é“è·¯ã€æ ‘æœ¨â€¦ ä¹‹ç±»çš„ä»¿çœŸç‰©</p>
<p>Gazebo ä¸­åˆ›å»ºä»¿çœŸå®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>æ–¹å¼1: ç›´æ¥æ·»åŠ å†…ç½®ç»„ä»¶åˆ›å»ºä»¿çœŸç¯å¢ƒ</li>
<li>æ–¹å¼2: æ‰‹åŠ¨ç»˜åˆ¶ä»¿çœŸç¯å¢ƒ(æ›´ä¸ºçµæ´»)</li>
</ul>
<p>ä¹Ÿè¿˜å¯ä»¥ç›´æ¥ä¸‹è½½ä½¿ç”¨å®˜æ–¹æˆ–ç¬¬ä¸‰æ–¹æé«˜çš„ä»¿çœŸç¯å¢ƒæ’ä»¶</p>
<p>å°†ä¹‹å‰ä¸‹è½½çš„èµ„æºä¸­box_house.worldç§»åŠ¨åˆ°å½“å‰åŠŸèƒ½åŒ…ç›®å½•ä¸‹çš„worldsæ–‡ä»¶å¤¹ä¸­</p>
<p>æ”¹å†™launchæ–‡ä»¶</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"robot_description"</span> <span class="attr">command</span>=<span class="string">"$(find xacro)/xacro $(find urdf02_gazebo)/urdf/xacro/combination.urdf.xacro"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ gazebo --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find gazebo_ros)/launch/empty_world.launch"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">"world_name"</span> <span class="attr">value</span>=<span class="string">"$(find urdf02_gazebo)/worlds/box_house.world"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨ gazebo ä¸­æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"gazebo_ros"</span> <span class="attr">type</span>=<span class="string">"spawn_model"</span> <span class="attr">name</span>=<span class="string">"model"</span> <span class="attr">args</span>=<span class="string">"-urdf -model mycar -param robot_description"</span>  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ ¸å¿ƒä»£ç ï¼šå¯åŠ¨ empty_world åï¼Œå†æ ¹æ®<code>arg</code>åŠ è½½è‡ªå®šä¹‰çš„ä»¿çœŸç¯å¢ƒ</p>
<p>æ³¨æ„ï¼Œ<font color="Violetred">argçš„nameå›ºå®šï¼Œåªèƒ½æ˜¯<code>world_name</code></font></p>
<p>å½“å‰ Gazebo æä¾›çš„ä»¿çœŸé“å…·æœ‰é™ï¼Œè¿˜å¯ä»¥ä¸‹è½½å®˜æ–¹æ”¯æŒï¼Œå¯ä»¥æä¾›æ›´ä¸ºä¸°å¯Œçš„ä»¿çœŸå®ç°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/osrf/gazebo_models</span><br></pre></td></tr></tbody></table></figure>

<p>å°†å¾—åˆ°çš„gazebo_modelsæ–‡ä»¶å¤¹å†…å®¹å¤åˆ¶åˆ° /usr/share/gazebo-*/models</p>
<p>é‡å¯ Gazeboï¼Œé€‰æ‹©å·¦ä¾§èœå•æ çš„ insert å¯ä»¥é€‰æ‹©å¹¶æ’å…¥ç›¸å…³é“å…·äº†</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun gazebo_ros gazebo</span><br></pre></td></tr></tbody></table></figure>

<h3 id="URDFã€Gazeboä¸Rvizç»¼åˆåº”ç”¨"><a href="#URDFã€Gazeboä¸Rvizç»¼åˆåº”ç”¨" class="headerlink" title="URDFã€Gazeboä¸Rvizç»¼åˆåº”ç”¨"></a>URDFã€Gazeboä¸Rvizç»¼åˆåº”ç”¨</h3><p>æœ¬èŠ‚ä¸­å¤§é‡é…ç½®æ–‡ä»¶æ¥æºäºå®˜æ–¹ç½‘ç«™ï¼Œä½†æ˜¯ç½‘ç«™å·²ç»æ›´æ–°åˆ°ROS2äº†ï¼Œå¯èƒ½æœ‰çš„ç›´æ¥å¤åˆ¶æ•™ç¨‹é‡Œé¢çš„äº†</p>
<h4 id="æœºå™¨äººè¿åŠ¨æ§åˆ¶"><a href="#æœºå™¨äººè¿åŠ¨æ§åˆ¶" class="headerlink" title="æœºå™¨äººè¿åŠ¨æ§åˆ¶"></a>æœºå™¨äººè¿åŠ¨æ§åˆ¶</h4><p>gazebo ä¸­å·²ç»å¯ä»¥æ­£å¸¸æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹äº†ï¼Œé‚£ä¹ˆå¦‚ä½•åƒåœ¨ rviz ä¸­ä¸€æ ·æ§åˆ¶æœºå™¨äººè¿åŠ¨å‘¢ï¼Ÿ</p>
<p>éœ€è¦æ¶‰åŠåˆ°rosä¸­çš„ç»„ä»¶ï¼šros_control</p>
<p>ros_control æ˜¯ä¸€ç»„è½¯ä»¶åŒ…ï¼Œå®ƒåŒ…å«äº†æ§åˆ¶å™¨æ¥å£ï¼Œæ§åˆ¶å™¨ç®¡ç†å™¨ï¼Œä¼ è¾“å’Œç¡¬ä»¶æ¥å£</p>
<p>ros_control æ˜¯ä¸€å¥—è§„èŒƒï¼Œä¸åŒçš„æœºå™¨äººå¹³å°åªè¦æŒ‰ç…§è¿™å¥—è§„èŒƒå®ç°ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯ä¸ROS ç¨‹åºå…¼å®¹ï¼Œé€šè¿‡è¿™å¥—è§„èŒƒï¼Œå®ç°äº†ä¸€ç§å¯æ’æ‹”çš„æ¶æ„è®¾è®¡ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºè®¾è®¡çš„æ•ˆç‡ä¸çµæ´»æ€§</p>
<p>è¿åŠ¨æ§åˆ¶å®ç°æµç¨‹Gazeboï¼š</p>
<ol>
<li>ç¼–å†™ä¸€ä¸ªå•ç‹¬çš„ xacro æ–‡ä»¶ï¼Œä¸ºæœºå™¨äººæ¨¡å‹æ·»åŠ ä¼ åŠ¨è£…ç½®ä»¥åŠæ§åˆ¶å™¨</li>
<li>å°†æ­¤æ–‡ä»¶é›†æˆè¿›xacroæ–‡ä»¶</li>
<li>å¯åŠ¨ Gazebo å¹¶å‘å¸ƒ /cmd_vel æ¶ˆæ¯æ§åˆ¶æœºå™¨äººè¿åŠ¨</li>
</ol>
<p>ä¸º joint æ·»åŠ ä¼ åŠ¨è£…ç½®ä»¥åŠæ§åˆ¶å™¨ï¼š</p>
<p>æ–°å»º Xacro æ–‡ä»¶ï¼Œé…ç½®ä¸¤è½®å·®é€Ÿï¼š(ç›´æ¥å¤åˆ¶)</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"my_car_move"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¼ åŠ¨å®ç°:ç”¨äºè¿æ¥æ§åˆ¶å™¨ä¸å…³èŠ‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:macro</span> <span class="attr">name</span>=<span class="string">"joint_trans"</span> <span class="attr">params</span>=<span class="string">"joint_name"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Transmission is important to link the joints and the controller --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transmission</span> <span class="attr">name</span>=<span class="string">"${joint_name}_trans"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>transmission_interface/SimpleTransmission<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">"${joint_name}"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">hardwareInterface</span>&gt;</span>hardware_interface/VelocityJointInterface<span class="tag">&lt;/<span class="name">hardwareInterface</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">actuator</span> <span class="attr">name</span>=<span class="string">"${joint_name}_motor"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">hardwareInterface</span>&gt;</span>hardware_interface/VelocityJointInterface<span class="tag">&lt;/<span class="name">hardwareInterface</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mechanicalReduction</span>&gt;</span>1<span class="tag">&lt;/<span class="name">mechanicalReduction</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">actuator</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">transmission</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xacro:macro</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¯ä¸€ä¸ªé©±åŠ¨è½®éƒ½éœ€è¦é…ç½®ä¼ åŠ¨è£…ç½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- éœ€è¦ä¿®æ”¹çš„ä½ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:joint_trans</span> <span class="attr">joint_name</span>=<span class="string">"left_wheel2base_link"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:joint_trans</span> <span class="attr">joint_name</span>=<span class="string">"right_wheel2base_link"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">"differential_drive_controller"</span> <span class="attr">filename</span>=<span class="string">"libgazebo_ros_diff_drive.so"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">rosDebugLevel</span>&gt;</span>Debug<span class="tag">&lt;/<span class="name">rosDebugLevel</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">publishWheelTF</span>&gt;</span>true<span class="tag">&lt;/<span class="name">publishWheelTF</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">robotNamespace</span>&gt;</span>/<span class="tag">&lt;/<span class="name">robotNamespace</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">publishTf</span>&gt;</span>1<span class="tag">&lt;/<span class="name">publishTf</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">publishWheelJointState</span>&gt;</span>true<span class="tag">&lt;/<span class="name">publishWheelJointState</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">alwaysOn</span>&gt;</span>true<span class="tag">&lt;/<span class="name">alwaysOn</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">updateRate</span>&gt;</span>100.0<span class="tag">&lt;/<span class="name">updateRate</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">legacyMode</span>&gt;</span>true<span class="tag">&lt;/<span class="name">legacyMode</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">leftJoint</span>&gt;</span>left_wheel2base_link<span class="tag">&lt;/<span class="name">leftJoint</span>&gt;</span> <span class="comment">&lt;!-- å·¦è½® --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">rightJoint</span>&gt;</span>right_wheel2base_link<span class="tag">&lt;/<span class="name">rightJoint</span>&gt;</span> <span class="comment">&lt;!-- å³è½® --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">wheelSeparation</span>&gt;</span>${base_link_radius * 2}<span class="tag">&lt;/<span class="name">wheelSeparation</span>&gt;</span> <span class="comment">&lt;!-- è½¦è½®é—´è· --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">wheelDiameter</span>&gt;</span>${wheel_radius * 2}<span class="tag">&lt;/<span class="name">wheelDiameter</span>&gt;</span> <span class="comment">&lt;!-- è½¦è½®ç›´å¾„ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">broadcastTF</span>&gt;</span>1<span class="tag">&lt;/<span class="name">broadcastTF</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">wheelTorque</span>&gt;</span>30<span class="tag">&lt;/<span class="name">wheelTorque</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">wheelAcceleration</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">wheelAcceleration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">commandTopic</span>&gt;</span>cmd_vel<span class="tag">&lt;/<span class="name">commandTopic</span>&gt;</span> <span class="comment">&lt;!-- è¿åŠ¨æ§åˆ¶è¯é¢˜ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">odometryFrame</span>&gt;</span>odom<span class="tag">&lt;/<span class="name">odometryFrame</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">odometryTopic</span>&gt;</span>odom<span class="tag">&lt;/<span class="name">odometryTopic</span>&gt;</span> <span class="comment">&lt;!-- é‡Œç¨‹è®¡è¯é¢˜ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">robotBaseFrame</span>&gt;</span>base_footprint<span class="tag">&lt;/<span class="name">robotBaseFrame</span>&gt;</span> <span class="comment">&lt;!-- æ ¹åæ ‡ç³» --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å°†ä¸Šè¿° xacro æ–‡ä»¶é›†æˆè¿›æ€»çš„æœºå™¨äººæ¨¡å‹xacroæ–‡ä»¶</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"my_car_camera"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŒ…å«æƒ¯æ€§çŸ©é˜µ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"head.xacro"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç»„åˆå°è½¦åº•ç›˜ä¸æ‘„åƒå¤´ä¸é›·è¾¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"base.urdf.xacro"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"camera.urdf.xacro"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"laser.urdf.xacro"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿åŠ¨æ§åˆ¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"$(find urdf02_gazebo)/urdf/gazebo/move.xacro"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>launchæ–‡ä»¶ä¸å˜ï¼ˆå…ˆå¯åŠ¨gazeboè™šæ‹Ÿç¯å¢ƒï¼Œå†å¯åŠ¨rvizï¼‰</p>
<p>ä½¿ç”¨å‘½ä»¤æ§åˆ¶å°è½¦è¿åŠ¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun teleop_twist_keyboard  teleop_twist_keyboard.py</span><br></pre></td></tr></tbody></table></figure>

<h4 id="RvizæŸ¥çœ‹é‡Œç¨‹è®¡ä¿¡æ¯"><a href="#RvizæŸ¥çœ‹é‡Œç¨‹è®¡ä¿¡æ¯" class="headerlink" title="RvizæŸ¥çœ‹é‡Œç¨‹è®¡ä¿¡æ¯"></a>RvizæŸ¥çœ‹é‡Œç¨‹è®¡ä¿¡æ¯</h4><p>é‡Œç¨‹è®¡ï¼šåˆ©ç”¨ä»ç§»åŠ¨ä¼ æ„Ÿå™¨è·å¾—çš„æ•°æ®æ¥ä¼°è®¡ç‰©ä½“ä½ç½®éšæ—¶é—´çš„å˜åŒ–è€Œæ”¹å˜çš„æ–¹æ³•</p>
<p>å¯åŠ¨ Rvizï¼ˆ<font color="Violetred">è®°ä½ä¸€å®šæ˜¯å¸¦ä¸Šä¸¤ä¸ªçŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ä¸€èµ·</font>ï¼‰</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span> = <span class="string">"rviz"</span> <span class="attr">type</span> = <span class="string">"rviz"</span> <span class="attr">name</span> = <span class="string">"rviz"</span> <span class="attr">args</span> = <span class="string">"-d $(find urdf01_rviz)/config/show_car.rviz"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  å…³èŠ‚çŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  æœºå™¨äººçŠ¶æ€å‘å¸ƒèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">type</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">name</span>=<span class="string">"robot_state_publisher"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ‰§è¡Œ launch æ–‡ä»¶åï¼Œåœ¨ Rviz ä¸­æ·»åŠ å›¾ç¤ºç»„ä»¶ï¼š</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/21_Rvizæ˜¾ç¤ºé‡Œç¨‹è®¡æ•°æ®.webp" alt="21_Rvizæ˜¾ç¤ºé‡Œç¨‹è®¡æ•°æ®" style="zoom: 50%;">

<h4 id="é›·è¾¾ä¿¡æ¯ä»¿çœŸ"><a href="#é›·è¾¾ä¿¡æ¯ä»¿çœŸ" class="headerlink" title="é›·è¾¾ä¿¡æ¯ä»¿çœŸ"></a>é›·è¾¾ä¿¡æ¯ä»¿çœŸ</h4><p>é›·è¾¾ä»¿çœŸåŸºæœ¬æµç¨‹:</p>
<ol>
<li>å·²ç»åˆ›å»ºå®Œæ¯•çš„æœºå™¨äººæ¨¡å‹ï¼Œç¼–å†™ä¸€ä¸ªå•ç‹¬çš„ xacro æ–‡ä»¶ï¼Œä¸ºæœºå™¨äººæ¨¡å‹æ·»åŠ é›·è¾¾é…ç½®ï¼›</li>
<li>å°†æ­¤æ–‡ä»¶é›†æˆè¿›xacroæ–‡ä»¶ï¼›</li>
<li>å¯åŠ¨ Gazeboï¼Œä½¿ç”¨ Rviz æ˜¾ç¤ºé›·è¾¾ä¿¡æ¯ã€‚</li>
</ol>
<p>æ–°å»º Xacro æ–‡ä»¶ï¼Œé…ç½®é›·è¾¾ä¼ æ„Ÿå™¨ä¿¡æ¯ï¼š(ç›´æ¥å¤åˆ¶)</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"my_sensors"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- é›·è¾¾ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">"laser"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sensor</span> <span class="attr">type</span>=<span class="string">"ray"</span> <span class="attr">name</span>=<span class="string">"rplidar"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pose</span>&gt;</span>0 0 0 0 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">visualize</span>&gt;</span>true<span class="tag">&lt;/<span class="name">visualize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">update_rate</span>&gt;</span>5.5<span class="tag">&lt;/<span class="name">update_rate</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ray</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scan</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- é›·è¾¾å‚æ•° --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">horizontal</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- é‡‡æ ·ä¸ªæ•°,ä¸ä»¿çœŸå‹åŠ›æŒ‚é’© --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">samples</span>&gt;</span>360<span class="tag">&lt;/<span class="name">samples</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">resolution</span>&gt;</span>1<span class="tag">&lt;/<span class="name">resolution</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- é‡‡æ ·å¼§åº¦èŒƒå›´ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">min_angle</span>&gt;</span>-3<span class="tag">&lt;/<span class="name">min_angle</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">max_angle</span>&gt;</span>3<span class="tag">&lt;/<span class="name">max_angle</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">horizontal</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">scan</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é‡‡æ ·è·ç¦»èŒƒå›´ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">range</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">min</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">min</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">max</span>&gt;</span>30.0<span class="tag">&lt;/<span class="name">max</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- è·ç¦»ç²¾åº¦ --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">resolution</span>&gt;</span>0.01<span class="tag">&lt;/<span class="name">resolution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">range</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä»¿çœŸå™ªå£° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">noise</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">type</span>&gt;</span>gaussian<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mean</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">mean</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">stddev</span>&gt;</span>0.01<span class="tag">&lt;/<span class="name">stddev</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">noise</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ray</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">"gazebo_rplidar"</span> <span class="attr">filename</span>=<span class="string">"libgazebo_ros_laser.so"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">topicName</span>&gt;</span>/scan<span class="tag">&lt;/<span class="name">topicName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">frameName</span>&gt;</span>laser<span class="tag">&lt;/<span class="name">frameName</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sensor</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>gazebo reference / frameName è¿™ä¸¤ä¸ªä½ç½®çš„åç§°å’Œå®šä¹‰é›·è¾¾çš„linkåç§°éœ€è¦ç›¸åŒ</p>
<p>é›†æˆåˆ°æ€»çš„xacro æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"my_car_camera"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">&lt;!-- é›·è¾¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"$(find urdf02_gazebo)/urdf/gazebo/laser.xacro"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>launchæ–‡ä»¶ä¸å˜ï¼Œå…ˆå¯åŠ¨gazeboå†å¯åŠ¨rviz</p>
<p>æ·»åŠ é›·è¾¾ä¿¡æ¯æ˜¾ç¤ºæ’ä»¶</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/é›·è¾¾ä»¿çœŸ2.webp" alt="é›·è¾¾ä»¿çœŸ2" style="zoom: 50%;">

<h4 id="æ‘„åƒå¤´ä¿¡æ¯ä»¿çœŸ"><a href="#æ‘„åƒå¤´ä¿¡æ¯ä»¿çœŸ" class="headerlink" title="æ‘„åƒå¤´ä¿¡æ¯ä»¿çœŸ"></a>æ‘„åƒå¤´ä¿¡æ¯ä»¿çœŸ</h4><p>æ­¥éª¤ç±»ä¼¼é›·è¾¾</p>
<p>æ–°å»º Xacro æ–‡ä»¶ï¼Œé…ç½®æ‘„åƒå¤´ä¼ æ„Ÿå™¨ä¿¡æ¯ï¼š(ç›´æ¥å¤åˆ¶)</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"my_sensors"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- è¢«å¼•ç”¨çš„link --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">"camera"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç±»å‹è®¾ç½®ä¸º camara --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sensor</span> <span class="attr">type</span>=<span class="string">"camera"</span> <span class="attr">name</span>=<span class="string">"camera_node"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">update_rate</span>&gt;</span>30.0<span class="tag">&lt;/<span class="name">update_rate</span>&gt;</span> <span class="comment">&lt;!-- æ›´æ–°é¢‘ç‡ --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- æ‘„åƒå¤´åŸºæœ¬ä¿¡æ¯è®¾ç½® --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">camera</span> <span class="attr">name</span>=<span class="string">"head"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">horizontal_fov</span>&gt;</span>1.3962634<span class="tag">&lt;/<span class="name">horizontal_fov</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">width</span>&gt;</span>1280<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">height</span>&gt;</span>720<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">format</span>&gt;</span>R8G8B8<span class="tag">&lt;/<span class="name">format</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">clip</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">near</span>&gt;</span>0.02<span class="tag">&lt;/<span class="name">near</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">far</span>&gt;</span>300<span class="tag">&lt;/<span class="name">far</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">noise</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">type</span>&gt;</span>gaussian<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mean</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">mean</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">stddev</span>&gt;</span>0.007<span class="tag">&lt;/<span class="name">stddev</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">noise</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">camera</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- æ ¸å¿ƒæ’ä»¶ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">"gazebo_camera"</span> <span class="attr">filename</span>=<span class="string">"libgazebo_ros_camera.so"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">alwaysOn</span>&gt;</span>true<span class="tag">&lt;/<span class="name">alwaysOn</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">updateRate</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">updateRate</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä¸ºè¯é¢˜è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cameraName</span>&gt;</span>/camera<span class="tag">&lt;/<span class="name">cameraName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">imageTopicName</span>&gt;</span>image_raw<span class="tag">&lt;/<span class="name">imageTopicName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cameraInfoTopicName</span>&gt;</span>camera_info<span class="tag">&lt;/<span class="name">cameraInfoTopicName</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- linkåç§° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">frameName</span>&gt;</span>camera<span class="tag">&lt;/<span class="name">frameName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hackBaseline</span>&gt;</span>0.07<span class="tag">&lt;/<span class="name">hackBaseline</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionK1</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionK1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionK2</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionK2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionK3</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionK3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionT1</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionT1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">distortionT2</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortionT2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sensor</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>é›†æˆåˆ°æ€»çš„xacroæ–‡ä»¶</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"my_car_camera"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">&lt;!-- æ‘„åƒå¤´ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"$(find urdf02_gazebo)/urdf/gazebo/camera.xacro"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>launchæ–‡ä»¶ä¸å˜ï¼Œå…ˆå¯åŠ¨gazeboå†å¯åŠ¨rviz</p>
<p>åœ¨ Rviz ä¸­æ·»åŠ æ‘„åƒå¤´ç»„ä»¶</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/æ‘„åƒå¤´ä»¿çœŸ3.webp" alt="æ‘„åƒå¤´ä»¿çœŸ3" style="zoom:50%;">

<h4 id="kinectä¿¡æ¯ä»¿çœŸ"><a href="#kinectä¿¡æ¯ä»¿çœŸ" class="headerlink" title="kinectä¿¡æ¯ä»¿çœŸ"></a>kinectä¿¡æ¯ä»¿çœŸ</h4><p>kinectæ˜¯æ·±åº¦ä¿¡æ¯æ‘„åƒå¤´</p>
<p>æ­¥éª¤ç±»ä¼¼ä¸Šè¿°</p>
<p>æ–°å»º Xacro æ–‡ä»¶ï¼Œé…ç½® kineticä¼ æ„Ÿå™¨ä¿¡æ¯(ç›´æ¥å¤åˆ¶)ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"my_sensors"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">"kinect linkåç§°"</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">sensor</span> <span class="attr">type</span>=<span class="string">"depth"</span> <span class="attr">name</span>=<span class="string">"camera"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">always_on</span>&gt;</span>true<span class="tag">&lt;/<span class="name">always_on</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">update_rate</span>&gt;</span>20.0<span class="tag">&lt;/<span class="name">update_rate</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">camera</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">horizontal_fov</span>&gt;</span>${60.0*PI/180.0}<span class="tag">&lt;/<span class="name">horizontal_fov</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">format</span>&gt;</span>R8G8B8<span class="tag">&lt;/<span class="name">format</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">width</span>&gt;</span>640<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">height</span>&gt;</span>480<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">clip</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">near</span>&gt;</span>0.05<span class="tag">&lt;/<span class="name">near</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">far</span>&gt;</span>8.0<span class="tag">&lt;/<span class="name">far</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">camera</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">"kinect_camera_controller"</span> <span class="attr">filename</span>=<span class="string">"libgazebo_ros_openni_kinect.so"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cameraName</span>&gt;</span>camera<span class="tag">&lt;/<span class="name">cameraName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">alwaysOn</span>&gt;</span>true<span class="tag">&lt;/<span class="name">alwaysOn</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">updateRate</span>&gt;</span>10<span class="tag">&lt;/<span class="name">updateRate</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">imageTopicName</span>&gt;</span>rgb/image_raw<span class="tag">&lt;/<span class="name">imageTopicName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">depthImageTopicName</span>&gt;</span>depth/image_raw<span class="tag">&lt;/<span class="name">depthImageTopicName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">pointCloudTopicName</span>&gt;</span>depth/points<span class="tag">&lt;/<span class="name">pointCloudTopicName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cameraInfoTopicName</span>&gt;</span>rgb/camera_info<span class="tag">&lt;/<span class="name">cameraInfoTopicName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">depthImageCameraInfoTopicName</span>&gt;</span>depth/camera_info<span class="tag">&lt;/<span class="name">depthImageCameraInfoTopicName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">frameName</span>&gt;</span>kinect linkåç§°<span class="tag">&lt;/<span class="name">frameName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">baseline</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">baseline</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_k1</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_k1</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_k2</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_k2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_k3</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_k3</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_t1</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_t1</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distortion_t2</span>&gt;</span>0.0<span class="tag">&lt;/<span class="name">distortion_t2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">pointCloudCutoff</span>&gt;</span>0.4<span class="tag">&lt;/<span class="name">pointCloudCutoff</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">sensor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥æŠŠä¸Šä¸€æ­¥cameraçš„xacroæ³¨é‡Šæ‰ï¼ŒæŠŠcameraæ¢æˆkinect</p>
<p>é›†æˆåˆ°æ€»çš„xacro æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">"my_car_camera"</span> <span class="attr">xmlns:xacro</span>=<span class="string">"http://wiki.ros.org/xacro"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">&lt;!-- æ‘„åƒå¤´ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;xacro:include filename="$(find urdf02_gazebo)/urdf/gazebo/camera.xacro"/&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- kinect --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xacro:include</span> <span class="attr">filename</span>=<span class="string">"$(find urdf02_gazebo)/urdf/gazebo/kinect.xacro"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>launchæ–‡ä»¶ä¸å˜ï¼Œå…ˆå¯åŠ¨gazeboå†å¯åŠ¨rviz</p>
<p>kinect ç‚¹äº‘æ•°æ®æ˜¾ç¤ºï¼š</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/ç‚¹äº‘æ•°æ®_é»˜è®¤.webp" alt="ç‚¹äº‘æ•°æ®_é»˜è®¤" style="zoom:50%;">

<p>ä½†åœ¨rvizä¸­æ˜¾ç¤ºæ—¶é”™ä½</p>
<p>åŸå› ï¼šåœ¨kinectä¸­å›¾åƒæ•°æ®ä¸ç‚¹äº‘æ•°æ®ä½¿ç”¨äº†ä¸¤å¥—åæ ‡ç³»ç»Ÿï¼Œä¸”ä¸¤å¥—åæ ‡ç³»ç»Ÿä½å§¿å¹¶ä¸ä¸€è‡´</p>
<p>åœ¨æ’ä»¶ä¸­ä¸ºkinectè®¾ç½®åæ ‡ç³»ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶çš„<code>&lt;frameName&gt;</code>æ ‡ç­¾å†…å®¹</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">frameName</span>&gt;</span>camera_depth<span class="tag">&lt;/<span class="name">frameName</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å‘å¸ƒæ–°è®¾ç½®çš„åæ ‡ç³»åˆ°kinectè¿æ†çš„åæ ‡å˜æ¢å…³ç³»ï¼Œåœ¨å¯åŠ¨rvizçš„launchä¸­ï¼Œæ·»åŠ </p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ·»åŠ ç‚¹äº‘åæ ‡ç³»åˆ°kinectåæ ‡ç³»çš„å˜åŒ–=æ¢  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"tf2_ros"</span> <span class="attr">type</span>=<span class="string">"static_transform_publisher"</span> <span class="attr">name</span>=<span class="string">"static_transform_publisher"</span> <span class="attr">args</span> =<span class="string">" 0 0 0 -1.57 0 -1.57 /camera /camera_depth"</span>/&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸ºä»€ä¹ˆæ˜¯-1.57ï¼šé€†ç€è½´æ–¹å‘çœ‹é€†æ—¶é’ˆæ—‹è½¬ä¸ºæ­£</p>
<p>å¯åŠ¨rvizï¼Œé‡æ–°æ˜¾ç¤º</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æœ¬ç« ä¸»è¦ä»‹ç»äº†ROSä¸­ä»¿çœŸå®ç°æ¶‰åŠçš„ä¸‰å¤§çŸ¥è¯†ç‚¹ï¼š</p>
<ul>
<li>URDF(Xacro)</li>
<li>Rviz</li>
<li>Gazebo</li>
</ul>
<p>URDF æ˜¯ç”¨äºæè¿°æœºå™¨äººæ¨¡å‹çš„ xml æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ ‡ç­¾å…·ä»£è¡¨ä¸åŒå«ä¹‰ï¼ŒURDF ç¼–å†™æœºå™¨äººæ¨¡å‹ä»£ç å†—ä½™ï¼Œxacro å¯ä»¥ä¼˜åŒ– URDF å®ç°ï¼Œä»£ç å®ç°æ›´ä¸ºç²¾ç®€ã€é«˜æ•ˆã€æ˜“è¯»</p>
<p>rvizéœ€è¦<strong>å·²æœ‰æ•°æ®</strong>ï¼Œå¼ºè°ƒæŠŠå·²æœ‰çš„æ•°æ®å¯è§†åŒ–æ˜¾ç¤º</p>
<p>rvizæä¾›äº†å¾ˆå¤šæ’ä»¶ï¼Œè¿™äº›æ’ä»¶å¯ä»¥æ˜¾ç¤ºå›¾åƒã€æ¨¡å‹ã€è·¯å¾„ç­‰ä¿¡æ¯ï¼Œä½†æ˜¯å‰æéƒ½æ˜¯è¿™äº›æ•°æ®å·²ç»ä»¥è¯é¢˜ã€å‚æ•°çš„å½¢å¼å‘å¸ƒï¼Œrvizåšçš„äº‹æƒ…å°±æ˜¯è®¢é˜…è¿™äº›æ•°æ®ï¼Œå¹¶å®Œæˆå¯è§†åŒ–çš„æ¸²æŸ“</p>
<p>gazeboæ˜¯<strong>ä¸‰ç»´ç‰©ç†ä»¿çœŸå¹³å°</strong>ï¼Œåˆ›å»ºè™šæ‹Ÿçš„ä»¿çœŸç¯å¢ƒï¼Œ**ä¸éœ€è¦æ•°æ®ï¼Œè€Œæ˜¯åˆ›é€ æ•°æ®ï¼Œ**ä¸ä»…å¯ä»¥ä»¿çœŸæœºå™¨äººçš„è¿åŠ¨åŠŸèƒ½ï¼Œè¿˜å¯ä»¥ä»¿çœŸæœºå™¨äººçš„ä¼ æ„Ÿå™¨æ•°æ®</p>
<h2 id="æœºå™¨äººå¯¼èˆª-ä»¿çœŸ"><a href="#æœºå™¨äººå¯¼èˆª-ä»¿çœŸ" class="headerlink" title="æœºå™¨äººå¯¼èˆª(ä»¿çœŸ)"></a>æœºå™¨äººå¯¼èˆª(ä»¿çœŸ)</h2><p>å¯¼èˆªæ˜¯æœºå™¨äººç³»ç»Ÿä¸­æœ€é‡è¦çš„æ¨¡å—ä¹‹ä¸€</p>
<h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>åœ¨ROSä¸­æœºå™¨äººå¯¼èˆª(Navigation)ç”±å¤šä¸ªåŠŸèƒ½åŒ…ç»„åˆå®ç°ï¼ŒROS ä¸­åˆç§°ä¹‹ä¸ºå¯¼èˆªåŠŸèƒ½åŒ…é›†</p>
<p>å…³äºå¯¼èˆªæ¨¡å—ï¼Œå®˜æ–¹ä»‹ç»ï¼šä¸€ä¸ªäºŒç»´å¯¼èˆªå †æ ˆï¼Œå®ƒæ¥æ”¶æ¥è‡ªé‡Œç¨‹è®¡ã€ä¼ æ„Ÿå™¨æµå’Œç›®æ ‡å§¿æ€çš„ä¿¡æ¯ï¼Œå¹¶è¾“å‡ºå‘é€åˆ°ç§»åŠ¨åº•ç›˜çš„å®‰å…¨é€Ÿåº¦å‘½ä»¤</p>
<p>ROS ä¸­å¯¼èˆªç›¸å…³çš„åŠŸèƒ½åŒ…é›†ä¸ºæœºå™¨äººå¯¼èˆªæä¾›äº†ä¸€å¥—é€šç”¨çš„å®ç°ï¼Œå¼€å‘è€…ä¸å†éœ€è¦å…³æ³¨äºå¯¼èˆªç®—æ³•ã€ç¡¬ä»¶äº¤äº’ç­‰åå¤æ‚ã€ååº•å±‚çš„å®ç°ï¼Œè¿™äº›å®ç°éƒ½ç”±æ›´ä¸“ä¸šçš„ç ”å‘äººå‘˜ç®¡ç†ã€è¿­ä»£å’Œç»´æŠ¤ï¼Œå¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºä¸Šå±‚åŠŸèƒ½ï¼Œè€Œå¯¹äºå¯¼èˆªåŠŸèƒ½çš„è°ƒç”¨ï¼Œåªéœ€è¦æ ¹æ®è‡ªèº«æœºå™¨äººç›¸å…³å‚æ•°åˆç†è®¾ç½®å„æ¨¡å—çš„é…ç½®æ–‡ä»¶å³å¯</p>
<blockquote>
<p>ç®€è€Œè¨€ä¹‹è°ƒå‚</p>
</blockquote>
<h4 id="å¯¼èˆªæ¨¡å—ç®€ä»‹"><a href="#å¯¼èˆªæ¨¡å—ç®€ä»‹" class="headerlink" title="å¯¼èˆªæ¨¡å—ç®€ä»‹"></a>å¯¼èˆªæ¨¡å—ç®€ä»‹</h4><p>ROS å®˜æ–¹ä¸ºäº†æä¾›äº†ä¸€å¼ å¯¼èˆªåŠŸèƒ½åŒ…é›†çš„å›¾ç¤ºï¼Œè¯¥å›¾ä¸­å›Šæ‹¬äº† ROS å¯¼èˆªçš„ä¸€äº›å…³é”®æŠ€æœ¯ï¼š</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/02_å¯¼èˆªå®˜æ–¹æ¶æ„.webp" alt="02_å¯¼èˆªå®˜æ–¹æ¶æ„" style="zoom: 80%;">

<p>è¿™ä¸ªå›¾çš„è§£è¯»ï¼š</p>
<p>å…ˆçœ‹å›¾ä¾‹ï¼š</p>
<ul>
<li>provided nodeï¼šå¿…é¡»èŠ‚ç‚¹</li>
<li>optional provided nodeï¼šå¯é€‰æ‹©èŠ‚ç‚¹</li>
<li>platform specific nodeï¼šå¹³å°ç›¸å…³èŠ‚ç‚¹</li>
</ul>
<p>å¤–éƒ¨æ•°æ®è¾“å…¥ï¼š</p>
<ul>
<li><strong>map_server</strong>ï¼šè¯»å–æˆ–å‘å¸ƒé™æ€ç¯å¢ƒåœ°å›¾ï¼ˆoccupancy gridï¼‰ï¼Œä¾›å…¨å±€è§„åˆ’å™¨å’Œä»£ä»·åœ°å›¾ä½¿ç”¨</li>
<li><strong>sensor sources</strong>ï¼šå„ç±»ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆæ¿€å…‰é›·è¾¾ã€æ·±åº¦ç›¸æœºç­‰ï¼‰ï¼Œç”¨äºæ„å»ºå±€éƒ¨ç¯å¢ƒçš„ä»£ä»·åœ°å›¾</li>
<li><strong>odometry source</strong>ï¼šé‡Œç¨‹è®¡æ•°æ®ï¼ˆè½¦è½®ç¼–ç å™¨ã€æƒ¯å¯¼ç­‰ï¼‰ï¼Œæä¾›æœºå™¨äººç›¸å¯¹è¿åŠ¨ä¿¡æ¯</li>
<li><strong>amcl</strong>ï¼šè‡ªé€‚åº” Monteâ€‘Carlo æœ¬åœ°åŒ–ï¼ˆAdaptive Monte Carlo Localizationï¼‰ï¼Œç»“åˆä¼ æ„Ÿå™¨ä¸åœ°å›¾ç»™å‡ºæœºå™¨äººåœ¨åœ°å›¾ä¸­çš„å…¨å±€ä½å§¿</li>
<li><strong>sensor transforms</strong>ï¼šTF æ•° æ®ï¼Œè´Ÿè´£æŠŠå„ä¸ªä¼ æ„Ÿå™¨åæ ‡ç³»å’Œæœºå™¨äººåŸºåº§ï¼ˆbase_linkï¼‰åæ ‡ç³»å¯¹é½</li>
</ul>
<p>move_base æ ¸å¿ƒï¼š</p>
<ul>
<li><strong>global_costmap</strong>ï¼šç”¨é™æ€åœ°å›¾ï¼ˆmap_serverï¼‰ä»¥åŠéƒ¨åˆ†ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆé™æ€éšœç¢ï¼‰æ„å»ºçš„å…¨å±€ä»£ä»·æ …æ ¼ï¼ˆoccupancy gridï¼‰ï¼Œä¸»è¦ç”¨äºè§„åˆ’ä»å½“å‰ä½ç½®åˆ°ç›®æ ‡ä½ç½®çš„å…¨å±€è·¯å¾„</li>
<li><strong>global_planner</strong>ï¼šåŸºäº <code>global_costmap</code> å’Œ <code>amcl</code> æä¾›çš„ä½å§¿ï¼Œè¿è¡Œ A*ã€Dijkstra æˆ– Navfn ç­‰ç®—æ³•ï¼Œç”Ÿæˆä¸€æ¡ä»èµ·ç‚¹åˆ°ç›®æ ‡ç‚¹çš„å…¨å±€è·¯å¾„</li>
<li><strong>local_costmap</strong>ï¼šåŠ¨æ€åœ°æ•´åˆä¼ æ„Ÿå™¨å®æ—¶æ•°æ®ï¼Œæ„å»ºæœºå™¨äººå‘¨å›´çš„å±€éƒ¨ä»£ä»·æ …æ ¼ï¼Œç”¨äºé¿éšœ</li>
<li><strong>local_planner</strong>ï¼šæ¥æ”¶å…¨å±€è·¯å¾„ï¼ˆwaypointsï¼‰å’Œ <code>local_costmap</code>ï¼Œç”Ÿæˆå®é™…çš„é€Ÿåº¦å‘½ä»¤ï¼ˆçº¿é€Ÿåº¦ã€è§’é€Ÿåº¦ï¼‰ç»™åº•å±‚è¿åŠ¨æ§åˆ¶å™¨ï¼ˆbase controllerï¼‰ï¼Œåœ¨é¿éšœçš„åŒæ—¶è·Ÿè¸ªå…¨å±€è·¯å¾„</li>
<li><strong>recovery_behaviors</strong>ï¼šå½“å±€éƒ¨è§„åˆ’å¤±è´¥ï¼ˆå¦‚è¢«éšœç¢ç‰©å®Œå…¨åŒ…å›´ã€æ— æ³•å‰è¿›ï¼‰æ—¶ï¼Œè§¦å‘æ¢å¤è¡Œä¸ºï¼šæ¯”å¦‚å‘åé€€ã€æ—‹è½¬æ‰«æã€æ¸…ç©ºå±€éƒ¨åœ°å›¾ç­‰ï¼Œå°è¯•è„±å›°</li>
</ul>
<p>åº•å±‚æ‰§è¡Œï¼š</p>
<ul>
<li><strong>base controller</strong>ï¼šæ¥æ”¶ <code>local_planner</code> è¾“å‡ºçš„é€Ÿåº¦æŒ‡ä»¤ï¼Œé©±åŠ¨æœºå™¨äººåº•ç›˜ï¼ˆç”µæœºã€å·®åˆ†é©±åŠ¨æˆ–è€…å››è½®å…¨å‘ç­‰ï¼‰å»ç§»åŠ¨</li>
</ul>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/Snipaste_2025-06-21_16-22-29.jpg" alt="Snipaste_2025-06-21_16-22-29" style="zoom:80%;">

<p>æ€»ç»“ä¸‹æ¥ï¼Œæ¶‰åŠçš„å…³é”®æŠ€æœ¯æœ‰å¦‚ä¸‹äº”ç‚¹:</p>
<ol>
<li>å…¨å±€åœ°å›¾</li>
<li>è‡ªèº«å®šä½</li>
<li>è·¯å¾„è§„åˆ’</li>
<li>è¿åŠ¨æ§åˆ¶</li>
<li>ç¯å¢ƒæ„ŸçŸ¥</li>
</ol>
<p>æœºå™¨äººå¯¼èˆªå®ç°ä¸æ— äººé©¾é©¶ç±»ä¼¼ï¼Œå…³é”®æŠ€æœ¯ä¹Ÿæ˜¯ç”±ä¸Šè¿°äº”ç‚¹ç»„æˆï¼Œåªæ˜¯æ— äººé©¾é©¶æ˜¯åŸºäºå®¤å¤–çš„ï¼Œè€Œå½“å‰ä»‹ç»çš„æœºå™¨äººå¯¼èˆªæ›´å¤šæ˜¯åŸºäºå®¤å†…çš„</p>
<p><strong>å…¨å±€åœ°å›¾</strong>ï¼š</p>
<ol>
<li><strong>SLAM</strong>(simultaneous localization and mapping)ï¼Œä¹Ÿç§°ä¸ºCML (Concurrent Mapping and Localization)ï¼Œå³æ—¶å®šä½ä¸åœ°å›¾æ„å»º</li>
<li>SLAMé—®é¢˜ï¼šæœºå™¨äººåœ¨æœªçŸ¥ç¯å¢ƒä¸­ä»ä¸€ä¸ªæœªçŸ¥ä½ç½®å¼€å§‹ç§»åŠ¨,åœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­æ ¹æ®ä½ç½®ä¼°è®¡å’Œåœ°å›¾è¿›è¡Œè‡ªèº«å®šä½ï¼ŒåŒæ—¶åœ¨è‡ªèº«å®šä½çš„åŸºç¡€ä¸Šå»ºé€ å¢é‡å¼åœ°å›¾ï¼Œä»¥ç»˜åˆ¶å‡ºå¤–éƒ¨ç¯å¢ƒçš„å®Œå…¨åœ°å›¾</li>
<li>å¦‚æœè¦å®Œæˆ SLAM ï¼Œæœºå™¨äººå¿…é¡»è¦å…·å¤‡æ„ŸçŸ¥å¤–ç•Œç¯å¢ƒçš„èƒ½åŠ›ï¼Œå°¤å…¶æ˜¯è¦å…·å¤‡è·å–å‘¨å›´ç¯å¢ƒæ·±åº¦ä¿¡æ¯çš„èƒ½åŠ›ã€‚æ„ŸçŸ¥çš„å®ç°éœ€è¦ä¾èµ–äºä¼ æ„Ÿå™¨ï¼Œæ¯”å¦‚ï¼šæ¿€å…‰é›·è¾¾ã€æ‘„åƒå¤´ã€RGB-Dæ‘„åƒå¤´â€¦</li>
<li>SLAM å¯ä»¥ç”¨äºåœ°å›¾ç”Ÿæˆï¼Œè€Œç”Ÿæˆçš„åœ°å›¾è¿˜éœ€è¦è¢«ä¿å­˜ä»¥å¾…åç»­ä½¿ç”¨ï¼Œåœ¨ ROS ä¸­ä¿å­˜åœ°å›¾çš„åŠŸèƒ½åŒ…æ˜¯ map_server</li>
</ol>
<p>SLAM è™½ç„¶æ˜¯æœºå™¨äººå¯¼èˆªçš„é‡è¦æŠ€æœ¯ä¹‹ä¸€ï¼Œä½†æ˜¯äºŒè€…å¹¶ä¸ç­‰ä»·ï¼Œç¡®åˆ‡çš„è®²ï¼ŒSLAM åªæ˜¯å®ç°åœ°å›¾æ„å»ºå’Œå³æ—¶å®šä½</p>
<p><strong>è‡ªèº«å®šä½</strong>ï¼š</p>
<p>å¯¼èˆªå¼€å§‹å’Œè¿‡ç¨‹ä¸­ï¼Œæœºå™¨äººéƒ½éœ€è¦ç¡®å®šå½“å‰è‡ªèº«çš„ä½ç½®</p>
<p>å¦‚æœåœ¨å®¤å¤–ï¼Œé‚£ä¹ˆ GPS æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œè€Œå¦‚æœå®¤å†…ã€éš§é“ã€åœ°ä¸‹æˆ–ä¸€äº›ç‰¹æ®Šçš„å±è”½ GPS ä¿¡å·çš„åŒºåŸŸï¼Œç”±äº GPS ä¿¡å·å¼±åŒ–ç”šè‡³å®Œå…¨ä¸å¯ç”¨ï¼Œé‚£ä¹ˆå°±å¿…é¡»å¦è¾Ÿè¹Šå¾„äº†</p>
<p>å‰é¢æåˆ°çš„ SLAM å°±å¯ä»¥å®ç°è‡ªèº«å®šä½ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒROS ä¸­è¿˜æä¾›äº†ä¸€ä¸ªç”¨äºå®šä½çš„åŠŸèƒ½åŒ…ï¼šamcl (ROS1/Ros2 ç»å…¸å®ç°å·²ç»è€åŒ–ä¸ä¸å¤Ÿé²æ£’)</p>
<p><strong>è·¯å¾„è§„åˆ’ï¼š</strong></p>
<p>åœ¨ ROS ä¸­æä¾›äº† move_base åŒ…æ¥å®ç°è·¯å¾„è§„åˆ™ï¼Œè¯¥åŠŸèƒ½åŒ…ä¸»è¦ç”±ä¸¤å¤§è§„åˆ’å™¨ç»„æˆï¼š</p>
<ol>
<li><p>å…¨å±€è·¯å¾„è§„åˆ’(gloable_planner)</p>
<p>æ ¹æ®ç»™å®šçš„ç›®æ ‡ç‚¹å’Œå…¨å±€åœ°å›¾å®ç°æ€»ä½“çš„è·¯å¾„è§„åˆ’ï¼Œä½¿ç”¨ Dijkstra æˆ– A* ç®—æ³•è¿›è¡Œå…¨å±€è·¯å¾„è§„åˆ’ï¼Œè®¡ç®—æœ€ä¼˜è·¯çº¿ï¼Œä½œä¸ºå…¨å±€è·¯çº¿</p>
</li>
<li><p>æœ¬åœ°æ—¶æ—¶è§„åˆ’(local_planner)</p>
<p>åœ¨å®é™…å¯¼èˆªè¿‡ç¨‹ä¸­ï¼Œæœºå™¨äººå¯èƒ½æ— æ³•æŒ‰ç…§ç»™å®šçš„å…¨å±€æœ€ä¼˜è·¯çº¿è¿è¡Œï¼Œæœ¬åœ°è§„åˆ’çš„ä½œç”¨å°±æ˜¯ä½¿ç”¨ä¸€å®šç®—æ³•(Dynamic Window Approaches) æ¥å®ç°éšœç¢ç‰©çš„è§„é¿ï¼Œå¹¶é€‰å–å½“å‰æœ€ä¼˜è·¯å¾„ä»¥å°½é‡ç¬¦åˆå…¨å±€æœ€ä¼˜è·¯å¾„</p>
</li>
</ol>
<p><strong>è¿åŠ¨æ§åˆ¶</strong>ï¼š</p>
<p>å¯¼èˆªåŠŸèƒ½åŒ…é›†å‡å®šé€šè¿‡è¯é¢˜â€cmd_velâ€å‘å¸ƒ<code>geometry_msgs/Twist</code>ç±»å‹çš„æ¶ˆæ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯åŸºäºæœºå™¨äººçš„åŸºåæ ‡ç³»ï¼Œä¼ é€’çš„æ˜¯è¿åŠ¨å‘½ä»¤ã€‚è¿™æ„å‘³ç€å¿…é¡»æœ‰ä¸€ä¸ªèŠ‚ç‚¹è®¢é˜…â€cmd_velâ€è¯é¢˜ï¼Œå°†è¯¥è¯é¢˜ä¸Šçš„é€Ÿåº¦å‘½ä»¤è½¬æ¢ä¸ºç”µæœºå‘½ä»¤å¹¶å‘é€</p>
<h4 id="å¯¼èˆªä¹‹åæ ‡ç³»"><a href="#å¯¼èˆªä¹‹åæ ‡ç³»" class="headerlink" title="å¯¼èˆªä¹‹åæ ‡ç³»"></a>å¯¼èˆªä¹‹åæ ‡ç³»</h4><p>å®šä½å®ç°éœ€è¦ä¾èµ–äºæœºå™¨äººè‡ªèº«ï¼Œæœºå™¨äººéœ€è¦é€†å‘æ¨å¯¼å‚è€ƒç³»åŸç‚¹å¹¶è®¡ç®—åæ ‡ç³»ç›¸å¯¹å…³ç³»ï¼Œè¯¥è¿‡ç¨‹å®ç°å¸¸ç”¨æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>é€šè¿‡é‡Œç¨‹è®¡å®šä½ï¼šæ—¶æ—¶æ”¶é›†æœºå™¨äººçš„é€Ÿåº¦ä¿¡æ¯è®¡ç®—å¹¶å‘å¸ƒæœºå™¨äººåæ ‡ç³»ä¸çˆ¶çº§å‚è€ƒç³»çš„ç›¸å¯¹å…³ç³»</li>
<li>é€šè¿‡ä¼ æ„Ÿå™¨å®šä½ï¼šé€šè¿‡ä¼ æ„Ÿå™¨æ”¶é›†å¤–ç•Œç¯å¢ƒä¿¡æ¯é€šè¿‡åŒ¹é…è®¡ç®—å¹¶å‘å¸ƒæœºå™¨äººåæ ‡ç³»ä¸çˆ¶çº§å‚è€ƒç³»çš„ç›¸å¯¹å…³ç³»</li>
</ul>
<p>ä¸¤ç§å®šä½æ–¹å¼éƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹</p>
<p>é‡Œç¨‹è®¡å®šä½:</p>
<ul>
<li>ä¼˜ç‚¹ï¼šé‡Œç¨‹è®¡å®šä½ä¿¡æ¯æ˜¯è¿ç»­çš„ï¼Œæ²¡æœ‰ç¦»æ•£çš„è·³è·ƒ</li>
<li>ç¼ºç‚¹ï¼šé‡Œç¨‹è®¡å­˜åœ¨<font color="Violetred">ç´¯è®¡è¯¯å·®</font>ï¼Œä¸åˆ©äºé•¿è·ç¦»æˆ–é•¿æœŸå®šä½</li>
</ul>
<p>ä¼ æ„Ÿå™¨å®šä½:</p>
<ul>
<li>ä¼˜ç‚¹ï¼šæ¯”é‡Œç¨‹è®¡å®šä½æ›´ç²¾å‡†ï¼›</li>
<li>ç¼ºç‚¹ï¼šä¼ æ„Ÿå™¨å®šä½ä¼šå‡ºç°è·³å˜çš„æƒ…å†µï¼Œä¸”ä¼ æ„Ÿå™¨å®šä½åœ¨æ ‡å¿—ç‰©è¾ƒå°‘çš„ç¯å¢ƒä¸‹ï¼Œå…¶å®šä½ç²¾åº¦ä¼šå¤§æ‰“æŠ˜æ‰£</li>
</ul>
<p><strong>åæ ‡ç³»å˜æ¢</strong>ï¼š</p>
<p>ä¸Šè¿°ä¸¤ç§å®šä½å®ç°ä¸­ï¼Œæœºå™¨äººåæ ‡ç³»ä¸€èˆ¬ä½¿ç”¨æœºå™¨äººæ¨¡å‹ä¸­çš„æ ¹åæ ‡ç³»(base_link æˆ– base_footprint)</p>
<ul>
<li>é‡Œç¨‹è®¡å®šä½æ—¶ï¼Œçˆ¶çº§åæ ‡ç³»ä¸€èˆ¬ç§°ä¹‹ä¸º odom</li>
<li>ä¼ æ„Ÿå™¨å®šä½æ—¶ï¼Œçˆ¶çº§å‚è€ƒç³»ä¸€èˆ¬ç§°ä¹‹ä¸º map</li>
</ul>
<p>å½“äºŒè€…ç»“åˆä½¿ç”¨æ—¶ï¼Œmap å’Œ odom éƒ½æ˜¯æœºå™¨äººæ¨¡å‹æ ¹åæ ‡ç³»çš„çˆ¶çº§ï¼Œè¿™æ˜¯ä¸ç¬¦åˆåæ ‡å˜æ¢ä¸­â€å•ç»§æ‰¿â€çš„åŸåˆ™çš„</p>
<p>ä¸€èˆ¬ä¼šå°†è½¬æ¢å…³ç³»è®¾ç½®ä¸ºï¼š<font color="Violetred">map -&gt; odom -&gt; base_link æˆ– base_footprint</font></p>
<blockquote>
<p>å› ä¸ºmapä¸€èˆ¬ç²¾åº¦æ›´é«˜</p>
</blockquote>
<h4 id="å¯¼èˆªæ¡ä»¶è¯´æ˜"><a href="#å¯¼èˆªæ¡ä»¶è¯´æ˜" class="headerlink" title="å¯¼èˆªæ¡ä»¶è¯´æ˜"></a>å¯¼èˆªæ¡ä»¶è¯´æ˜</h4><p><strong>ç¡¬ä»¶</strong></p>
<p>è™½ç„¶å¯¼èˆªåŠŸèƒ½åŒ…é›†è¢«è®¾è®¡æˆå°½å¯èƒ½çš„é€šç”¨ï¼Œåœ¨ä½¿ç”¨æ—¶ä»ç„¶æœ‰ä¸‰ä¸ªä¸»è¦çš„ç¡¬ä»¶é™åˆ¶ï¼š</p>
<ol>
<li>å®ƒæ˜¯ä¸ºå·®é€Ÿé©±åŠ¨çš„è½®å¼æœºå™¨äººè®¾è®¡çš„ã€‚å®ƒå‡è®¾åº•ç›˜å—åˆ°ç†æƒ³çš„è¿åŠ¨å‘½ä»¤çš„æ§åˆ¶å¹¶å¯å®ç°é¢„æœŸçš„ç»“æœï¼Œå‘½ä»¤çš„æ ¼å¼ä¸ºï¼šxé€Ÿåº¦åˆ†é‡ï¼Œyé€Ÿåº¦åˆ†é‡ï¼Œ$\theta$åˆ†é‡</li>
<li>å®ƒéœ€è¦åœ¨åº•ç›˜ä¸Šå®‰è£…ä¸€ä¸ªå•çº¿æ¿€å…‰é›·è¾¾ï¼Œè¿™ä¸ªæ¿€å…‰é›·è¾¾ç”¨äºæ„å»ºåœ°å›¾å’Œå®šä½</li>
<li>å¯¼èˆªåŠŸèƒ½åŒ…é›†æ˜¯ä¸ºæ­£æ–¹å½¢çš„æœºå™¨äººå¼€å‘çš„ï¼Œæ‰€ä»¥<font color="Violetred">æ–¹å½¢æˆ–åœ†å½¢çš„æœºå™¨äººå°†æ˜¯æ€§èƒ½æœ€å¥½çš„</font>ã€‚ å®ƒä¹Ÿå¯ä»¥å·¥ä½œåœ¨ä»»æ„å½¢çŠ¶å’Œå¤§å°çš„æœºå™¨äººä¸Šï¼Œä½†æ˜¯è¾ƒå¤§çš„æœºå™¨äººå°†å¾ˆéš¾é€šè¿‡ç‹­çª„çš„ç©ºé—´</li>
</ol>
<p><strong>è½¯ä»¶</strong></p>
<p>åœ¨ä»¿çœŸç¯å¢ƒä¸‹ï¼Œæœºå™¨äººå¯ä»¥æ­£å¸¸æ¥æ”¶ /cmd_vel æ¶ˆæ¯ï¼Œå¹¶å‘å¸ƒé‡Œç¨‹è®¡æ¶ˆæ¯ï¼Œä¼ æ„Ÿå™¨æ¶ˆæ¯å‘å¸ƒä¹Ÿæ­£å¸¸ï¼Œä¹Ÿå³å¯¼èˆªæ¨¡å—ä¸­çš„è¿åŠ¨æ§åˆ¶å’Œç¯å¢ƒæ„ŸçŸ¥å®ç°å®Œæ¯•</p>
<p>ä¸»è¦å…³æ³¨äº: ä½¿ç”¨ SLAM ç»˜åˆ¶åœ°å›¾ã€åœ°å›¾æœåŠ¡ã€è‡ªèº«å®šä½ä¸è·¯å¾„è§„åˆ’</p>
<h3 id="å¯¼èˆªå®ç°"><a href="#å¯¼èˆªå®ç°" class="headerlink" title="å¯¼èˆªå®ç°"></a>å¯¼èˆªå®ç°</h3><p><strong>å‡†å¤‡å·¥ä½œ</strong></p>
<p>å…ˆå®‰è£…ç›¸å…³çš„ROSåŠŸèƒ½åŒ…ï¼š</p>
<ul>
<li><p>å®‰è£… gmapping åŒ…(ç”¨äºæ„å»ºåœ°å›¾)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ros-noetic-gmapping</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å®‰è£…åœ°å›¾æœåŠ¡åŒ…(ç”¨äºä¿å­˜ä¸è¯»å–åœ°å›¾)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ros-noetic-map-server</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å®‰è£… navigation åŒ…(ç”¨äºå®šä½ä»¥åŠè·¯å¾„è§„åˆ’)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ros-noetic-navigation</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<p>å®‰è£…map-serveræ—¶ä¼šå‡ºç°é”™è¯¯ï¼Œæç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æœ‰ä¸€äº›è½¯ä»¶åŒ…æ— æ³•è¢«å®‰è£…ã€‚å¦‚æœæ‚¨ç”¨çš„æ˜¯ unstable å‘è¡Œç‰ˆï¼Œè¿™ä¹Ÿè®¸æ˜¯</span><br><span class="line">å› ä¸ºç³»ç»Ÿæ— æ³•è¾¾åˆ°æ‚¨è¦æ±‚çš„çŠ¶æ€é€ æˆçš„ã€‚è¯¥ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šæœ‰ä¸€äº›æ‚¨éœ€è¦çš„è½¯ä»¶</span><br><span class="line">åŒ…å°šæœªè¢«åˆ›å»ºæˆ–æ˜¯å®ƒä»¬å·²è¢«ä»æ–°åˆ°(Incoming)ç›®å½•ç§»å‡ºã€‚</span><br><span class="line">ä¸‹åˆ—ä¿¡æ¯å¯èƒ½ä¼šå¯¹è§£å†³é—®é¢˜æœ‰æ‰€å¸®åŠ©ï¼š</span><br><span class="line"></span><br><span class="line">ä¸‹åˆ—è½¯ä»¶åŒ…æœ‰æœªæ»¡è¶³çš„ä¾èµ–å…³ç³»ï¼š</span><br><span class="line"> ros-noetic-map-server : ä¾èµ–: libsdl-image1.2-dev ä½†æ˜¯å®ƒå°†ä¸ä¼šè¢«å®‰è£…</span><br><span class="line">                         ä¾èµ–: libsdl1.2-dev ä½†æ˜¯å®ƒå°†ä¸ä¼šè¢«å®‰è£…</span><br><span class="line">E: æ— æ³•ä¿®æ­£é”™è¯¯ï¼Œå› ä¸ºæ‚¨è¦æ±‚æŸäº›è½¯ä»¶åŒ…ä¿æŒç°çŠ¶ï¼Œå°±æ˜¯å®ƒä»¬ç ´åäº†è½¯ä»¶åŒ…é—´çš„ä¾èµ–å…³ç³»</span><br></pre></td></tr></tbody></table></figure>

<p>éœ€è¦é€šè¿‡é™çº§å…¼å®¹ï¼Œå®‰è£… <code>aptitude</code> å·¥å…·</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install aptitude</span><br><span class="line">sudo aptitude install libsdl-image1.2-dev libsdl1.2-dev</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€‰æ‹© n y y</p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/2301_78615366/article/details/135299929">ROSå®‰è£…è½¯ä»¶åŒ…æœ‰æœªæ»¡è¶³çš„ä¾èµ–å…³ç³»åº”å¦‚ä½•è§£å†³</a></p>
</blockquote>
<p>æ–°å»ºåŠŸèƒ½åŒ…ï¼Œå¹¶å¯¼å…¥ä¾èµ–: gmapping map_server amcl move_base</p>
<blockquote>
<p>å› ä¸ºä¸éœ€è¦ç¼–ç ï¼Œroscpp rospyå¯ä»¥ä¸å¯¼å…¥</p>
</blockquote>
<h4 id="SLAMå»ºå›¾"><a href="#SLAMå»ºå›¾" class="headerlink" title="SLAMå»ºå›¾"></a>SLAMå»ºå›¾</h4><p>SLAMç®—æ³•æœ‰å¤šç§ï¼Œå½“å‰é€‰ç”¨gmapping</p>
<p>gmappingå¯ä»¥æ ¹æ®ç§»åŠ¨æœºå™¨äººé‡Œç¨‹è®¡æ•°æ®å’Œæ¿€å…‰é›·è¾¾æ•°æ®æ¥ç»˜åˆ¶äºŒç»´çš„æ …æ ¼åœ°å›¾</p>
<p>gmapping åŠŸèƒ½åŒ…ä¸­çš„æ ¸å¿ƒèŠ‚ç‚¹æ˜¯ slam_gmapping</p>
<p><strong>èŠ‚ç‚¹å†…å®¹</strong></p>
<p>è®¢é˜…çš„Topicï¼š</p>
<ul>
<li>tf (tf/tfMessage) ï¼šç”¨äºé›·è¾¾ã€åº•ç›˜ä¸é‡Œç¨‹è®¡ä¹‹é—´çš„åæ ‡å˜æ¢æ¶ˆæ¯</li>
<li>scan(sensor_msgs/LaserScan)ï¼šSLAMæ‰€éœ€çš„é›·è¾¾ä¿¡æ¯</li>
</ul>
<p>å‘å¸ƒçš„Topicï¼š</p>
<ul>
<li>map_metadata(nav_msgs/MapMetaData)ï¼šåœ°å›¾å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åœ°å›¾çš„å®½åº¦ã€é«˜åº¦ã€åˆ†è¾¨ç‡ç­‰ï¼Œè¯¥æ¶ˆæ¯ä¼šå›ºå®šæ›´æ–°</li>
<li>map(nav_msgs/OccupancyGrid)ï¼šåœ°å›¾æ …æ ¼æ•°æ®ï¼Œä¸€èˆ¬ä¼šåœ¨rvizä¸­ä»¥å›¾å½¢åŒ–çš„æ–¹å¼æ˜¾ç¤º</li>
<li>~entropy(std_msgs/Float64)ï¼šæœºå™¨äººå§¿æ€åˆ†å¸ƒç†µä¼°è®¡(å€¼è¶Šå¤§ï¼Œä¸ç¡®å®šæ€§è¶Šå¤§)</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼Œ~ä»£è¡¨ç§æœ‰ï¼Œå…·ä½“è§åŸºç¡€çŸ¥è¯†éƒ¨åˆ†çš„åç§°é‡å</p>
</blockquote>
<p>æœåŠ¡ï¼š</p>
<ul>
<li>dynamic_map(nav_msgs/GetMap)ï¼šç”¨äºè·å–åœ°å›¾æ•°æ®</li>
</ul>
<p>å‚æ•°ï¼ˆå‚æ•°è¾ƒå¤šï¼Œä¸‹é¢æ˜¯å‡ ä¸ªè¾ƒä¸ºå¸¸ç”¨çš„å‚æ•°ï¼‰ï¼š</p>
<ul>
<li>~base_frame(string, default:â€base_linkâ€)ï¼šæœºå™¨äººåŸºåæ ‡ç³»</li>
<li>~map_frame(string, default:â€mapâ€)ï¼šåœ°å›¾åæ ‡ç³»</li>
<li>~odom_frame(string, default:â€odomâ€)ï¼šé‡Œç¨‹è®¡åæ ‡ç³»</li>
<li>~map_update_interval(float, default: 5.0)ï¼šåœ°å›¾æ›´æ–°é¢‘ç‡ï¼Œæ ¹æ®æŒ‡å®šçš„å€¼è®¾è®¡æ›´æ–°é—´éš”</li>
<li>~maxUrange(float, default: 80.0)ï¼šæ¿€å…‰æ¢æµ‹çš„æœ€å¤§å¯ç”¨èŒƒå›´(è¶…å‡ºæ­¤é˜ˆå€¼ï¼Œè¢«æˆªæ–­)</li>
<li>~maxRange(float)ï¼šæ¿€å…‰æ¢æµ‹çš„æœ€å¤§èŒƒå›´</li>
</ul>
<p>æ‰€éœ€çš„åæ ‡å˜æ¢ï¼š</p>
<ul>
<li>é›·è¾¾åæ ‡ç³»â†’åŸºåæ ‡ç³»ï¼šä¸€èˆ¬ç”± robot_state_publisher æˆ– static_transform_publisher å‘å¸ƒ</li>
<li>åŸºåæ ‡ç³»â†’é‡Œç¨‹è®¡åæ ‡ç³»ï¼šä¸€èˆ¬ç”±é‡Œç¨‹è®¡èŠ‚ç‚¹å‘å¸ƒ</li>
</ul>
<p>å‘å¸ƒçš„åæ ‡å˜æ¢ï¼š</p>
<ul>
<li>åœ°å›¾åæ ‡ç³»â†’é‡Œç¨‹è®¡åæ ‡ç³»</li>
</ul>
<p><strong>gmappingä½¿ç”¨</strong></p>
<p>launchæ–‡ä»¶ï¼š(ç›´æ¥å¤åˆ¶)</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä»¿çœŸç¯å¢ƒä¸‹valueè®¾ä¸ºtrue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"use_sim_time"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- gmappingèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"gmapping"</span> <span class="attr">type</span>=<span class="string">"slam_gmapping"</span> <span class="attr">name</span>=<span class="string">"slam_gmapping"</span> <span class="attr">output</span>=<span class="string">"screen"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- è®¾ç½®é›·è¾¾è¯é¢˜ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">"scan"</span> <span class="attr">to</span>=<span class="string">"scan"</span>/&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- è®¾ç½®å…³é”®å‚æ•°:åæ ‡ç³» --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"base_frame"</span> <span class="attr">value</span>=<span class="string">"base_footprint"</span>/&gt;</span><span class="comment">&lt;!--åº•ç›˜åæ ‡ç³»--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"map_frame"</span> <span class="attr">value</span>=<span class="string">"map"</span>/&gt;</span> <span class="comment">&lt;!--åœ°å›¾åæ ‡ç³»--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"odom_frame"</span> <span class="attr">value</span>=<span class="string">"odom"</span>/&gt;</span> <span class="comment">&lt;!--é‡Œç¨‹è®¡åæ ‡ç³»--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"map_update_interval"</span> <span class="attr">value</span>=<span class="string">"5.0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"maxUrange"</span> <span class="attr">value</span>=<span class="string">"16.0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"sigma"</span> <span class="attr">value</span>=<span class="string">"0.05"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"kernelSize"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"lstep"</span> <span class="attr">value</span>=<span class="string">"0.05"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"astep"</span> <span class="attr">value</span>=<span class="string">"0.05"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"iterations"</span> <span class="attr">value</span>=<span class="string">"5"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"lsigma"</span> <span class="attr">value</span>=<span class="string">"0.075"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ogain"</span> <span class="attr">value</span>=<span class="string">"3.0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"lskip"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"srr"</span> <span class="attr">value</span>=<span class="string">"0.1"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"srt"</span> <span class="attr">value</span>=<span class="string">"0.2"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"str"</span> <span class="attr">value</span>=<span class="string">"0.1"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"stt"</span> <span class="attr">value</span>=<span class="string">"0.2"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"linearUpdate"</span> <span class="attr">value</span>=<span class="string">"1.0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"angularUpdate"</span> <span class="attr">value</span>=<span class="string">"0.5"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"temporalUpdate"</span> <span class="attr">value</span>=<span class="string">"3.0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"resampleThreshold"</span> <span class="attr">value</span>=<span class="string">"0.5"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"particles"</span> <span class="attr">value</span>=<span class="string">"30"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"xmin"</span> <span class="attr">value</span>=<span class="string">"-50.0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ymin"</span> <span class="attr">value</span>=<span class="string">"-50.0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"xmax"</span> <span class="attr">value</span>=<span class="string">"50.0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ymax"</span> <span class="attr">value</span>=<span class="string">"50.0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"delta"</span> <span class="attr">value</span>=<span class="string">"0.05"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"llsamplerange"</span> <span class="attr">value</span>=<span class="string">"0.01"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"llsamplestep"</span> <span class="attr">value</span>=<span class="string">"0.01"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"lasamplerange"</span> <span class="attr">value</span>=<span class="string">"0.005"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"lasamplestep"</span> <span class="attr">value</span>=<span class="string">"0.005"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">name</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">type</span>=<span class="string">"robot_state_publisher"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"rviz"</span> <span class="attr">type</span>=<span class="string">"rviz"</span> <span class="attr">name</span>=<span class="string">"rviz"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯ä»¥ä¿å­˜ rviz é…ç½®å¹¶åæœŸç›´æ¥ä½¿ç”¨--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    &lt;node pkg="rviz" type="rviz" name="rviz" args="-d $(find nav_demo)/config/nav.rviz"/&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¯åŠ¨è¿‡ç¨‹ï¼š</p>
<ol>
<li>å…ˆå¯åŠ¨ Gazebo ä»¿çœŸç¯å¢ƒ</li>
<li>ç„¶åå†å¯åŠ¨åœ°å›¾ç»˜åˆ¶çš„ launch æ–‡ä»¶</li>
<li>å¯åŠ¨é”®ç›˜é”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼Œç”¨äºæ§åˆ¶æœºå™¨äººè¿åŠ¨å»ºå›¾</li>
<li>åœ¨ rviz ä¸­æ·»åŠ ç»„ä»¶ï¼Œæ˜¾ç¤ºæ …æ ¼åœ°å›¾</li>
</ol>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/slamæ¼”ç¤º.webp" alt="slamæ¼”ç¤º" style="zoom:50%;">

<p>å¯ä»¥é€šè¿‡é”®ç›˜æ§åˆ¶gazeboä¸­çš„æœºå™¨äººè¿åŠ¨</p>
<p>æœºå™¨äººè·‘ä¸€åœˆä¼šè·å¾—å®Œæ•´åœ°å›¾æ•°æ®</p>
<p>æ¥ä¸‹æ¥è¦ä¿å­˜åœ°å›¾ï¼Œç¼–å†™ä¸€ä¸ªlaunchæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">"filename"</span> <span class="attr">value</span>=<span class="string">"$(find nav_demo)/map/nav"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">"map_save"</span> <span class="attr">pkg</span>=<span class="string">"map_server"</span> <span class="attr">type</span>=<span class="string">"map_saver"</span> <span class="attr">args</span>=<span class="string">"-f $(arg filename)"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>SLAMå»ºå›¾å®Œæ¯•åï¼Œæ‰§è¡Œè¯¥launchæ–‡ä»¶å³å¯</p>
<p>åœ¨æŒ‡å®šè·¯å¾„ä¸‹ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œxxx.pgm ä¸ xxx.yaml</p>
<p>xxx.pgm æœ¬è´¨æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œç›´æ¥ä½¿ç”¨å›¾ç‰‡æŸ¥çœ‹ç¨‹åºå³å¯æ‰“å¼€</p>
<p>xxx.yaml ä¿å­˜çš„æ˜¯åœ°å›¾çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œç”¨äºæè¿°å›¾ç‰‡</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜å›¾ç‰‡è·¯å¾„,å›¾ç‰‡ä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚ç¼–è¾‘</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">/home/ros/demo05_ws/src/nav_demo/map/nav.pgm</span></span><br><span class="line"><span class="comment"># åœ°å›¾åˆ»åº¦å°º ç±³/æ¯åƒç´ </span></span><br><span class="line"><span class="attr">resolution:</span> <span class="number">0.050000</span></span><br><span class="line"><span class="comment"># åœ°å›¾ä½å§¿ä¿¡æ¯(ç›¸å¯¹äºrvizåŸç‚¹,x,y,åèˆªè§’)</span></span><br><span class="line"><span class="attr">origin:</span> [<span class="number">-50.000000</span>, <span class="number">-50.000000</span>, <span class="number">0.000000</span>]</span><br><span class="line"><span class="comment"># ç™½è‰²æ˜¯å¯é€šè¡ŒåŒºåŸŸï¼Œé»‘è‰²æ˜¯éšœç¢ç‰©ï¼Œè“ç°æ˜¯æœªçŸ¥åŒºåŸŸ</span></span><br><span class="line"><span class="comment"># å ç”¨é˜ˆå€¼</span></span><br><span class="line"><span class="attr">occupied_thresh:</span> <span class="number">0.65</span></span><br><span class="line"><span class="comment"># ç©ºé—²é˜ˆå€¼</span></span><br><span class="line"><span class="attr">free_thresh:</span> <span class="number">0.196</span></span><br><span class="line"><span class="comment"># äºŒè€…ç»“åˆç”¨äºåˆ¤æ–­æ˜¯ä¸æ˜¯éšœç¢ç‰©</span></span><br><span class="line"><span class="comment"># å–å</span></span><br><span class="line"><span class="attr">negate:</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<p>map_server ä¸­éšœç¢ç‰©è®¡ç®—è§„åˆ™ï¼š</p>
<ol>
<li><p>åœ°å›¾ä¸­çš„æ¯ä¸€ä¸ªåƒç´ å–å€¼åœ¨ [0,255] ä¹‹é—´ï¼Œç™½è‰²ä¸º 255ï¼Œé»‘è‰²ä¸º 0ï¼Œè¯¥å€¼è®¾ä¸º xï¼›</p>
</li>
<li><p>map_server ä¼šå°†åƒç´ å€¼ä½œä¸ºåˆ¤æ–­æ˜¯å¦æ˜¯éšœç¢ç‰©çš„ä¾æ®ï¼Œé¦–å…ˆè®¡ç®—æ¯”ä¾‹ï¼šp = (255 - x) / 255.0ï¼Œç™½è‰²ä¸º0ï¼Œé»‘è‰²ä¸º1</p>
<blockquote>
<p>negateä¸ºtrueï¼Œåˆ™p = x / 255.0</p>
</blockquote>
</li>
<li><p>æ ¹æ®æ­¥éª¤2è®¡ç®—çš„æ¯”ä¾‹åˆ¤æ–­æ˜¯å¦æ˜¯éšœç¢ç‰©ï¼Œå¦‚æœ p &gt; occupied_thresh é‚£ä¹ˆè§†ä¸ºéšœç¢ç‰©ï¼Œå¦‚æœ p &lt; free_thresh é‚£ä¹ˆè§†ä¸ºæ— ç‰©</p>
</li>
</ol>
<h4 id="åœ°å›¾æœåŠ¡"><a href="#åœ°å›¾æœåŠ¡" class="headerlink" title="åœ°å›¾æœåŠ¡"></a>åœ°å›¾æœåŠ¡</h4><p><strong>map_serverèŠ‚ç‚¹</strong></p>
<p>å‘å¸ƒè¯é¢˜ï¼š</p>
<ul>
<li>map_metadataï¼ˆnav_msgs / MapMetaDataï¼‰ï¼šå‘å¸ƒåœ°å›¾å…ƒæ•°æ®</li>
<li>mapï¼ˆnav_msgs / OccupancyGridï¼‰ï¼šåœ°å›¾æ•°æ®</li>
</ul>
<p>æœåŠ¡ï¼š</p>
<ul>
<li>static_mapï¼ˆnav_msgs / GetMapï¼‰ï¼šé€šè¿‡æ­¤æœåŠ¡è·å–åœ°å›¾</li>
</ul>
<p>å‚æ•°ï¼š</p>
<ul>
<li>ã€œframe_idï¼ˆå­—ç¬¦ä¸²ï¼Œé»˜è®¤å€¼ï¼šâ€œmapâ€ï¼‰ï¼šåœ°å›¾åæ ‡ç³»</li>
</ul>
<p>é€šè¿‡ map_server çš„ map_server èŠ‚ç‚¹å¯ä»¥è¯»å–æ …æ ¼åœ°å›¾æ•°æ®ï¼Œç¼–å†™ launch æ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½®åœ°å›¾çš„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">"map"</span> <span class="attr">default</span>=<span class="string">"nav.yaml"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿è¡Œåœ°å›¾æœåŠ¡å™¨ï¼Œå¹¶ä¸”åŠ è½½è®¾ç½®çš„åœ°å›¾--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">"map_server"</span> <span class="attr">pkg</span>=<span class="string">"map_server"</span> <span class="attr">type</span>=<span class="string">"map_server"</span> <span class="attr">args</span>=<span class="string">"$(find nav_demo)/map/$(arg map)"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ‰§è¡Œè¯¥launchæ–‡ä»¶ï¼Œè¯¥èŠ‚ç‚¹ä¼šå‘å¸ƒè¯é¢˜ï¼šmap(nav_msgs/OccupancyGrid)</p>
<p>åœ¨ rviz ä¸­ä½¿ç”¨ map ç»„ä»¶å¯ä»¥æ˜¾ç¤ºæ …æ ¼åœ°å›¾</p>
<h4 id="å®šä½"><a href="#å®šä½" class="headerlink" title="å®šä½"></a>å®šä½</h4><p>SLAMä¸­ä¹ŸåŒ…å«å®šä½ç®—æ³•å®ç°ï¼Œä¸è¿‡SLAMçš„å®šä½æ˜¯ç”¨äºæ„å»ºå…¨å±€åœ°å›¾çš„ï¼Œæ˜¯å±äºå¯¼èˆªå¼€å§‹ä¹‹å‰çš„é˜¶æ®µ</p>
<p>å½“å‰å®šä½æ˜¯ç”¨äºå¯¼èˆªä¸­ï¼Œæœºå™¨äººéœ€è¦æŒ‰ç…§è®¾å®šçš„è·¯çº¿è¿åŠ¨ï¼Œé€šè¿‡å®šä½å¯ä»¥åˆ¤æ–­æœºå™¨äººçš„å®é™…è½¨è¿¹æ˜¯å¦ç¬¦åˆé¢„æœŸ</p>
<p>AMCL(adaptive Monte Carlo Localization) æ˜¯ç”¨äº2Dç§»åŠ¨æœºå™¨äººçš„æ¦‚ç‡å®šä½ç³»ç»Ÿï¼Œå®ƒå®ç°äº†è‡ªé€‚åº”ï¼ˆæˆ–KLDé‡‡æ ·ï¼‰è’™ç‰¹å¡æ´›å®šä½æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®å·²æœ‰åœ°å›¾ä½¿ç”¨ç²’å­æ»¤æ³¢å™¨æ¨ç®—æœºå™¨äººä½ç½®</p>
<p>amclå·²ç»è¢«é›†æˆåˆ°äº†navigationåŒ…</p>
<p>è®¢é˜…çš„Topicï¼š</p>
<ul>
<li><p>scan(sensor_msgs/LaserScan)ï¼šæ¿€å…‰é›·è¾¾æ•°æ®</p>
</li>
<li><p>tf(tf/tfMessage)ï¼šåæ ‡å˜æ¢æ¶ˆæ¯</p>
</li>
<li><p>initialpose(geometry_msgs/PoseWithCovarianceStamped)ï¼šç”¨æ¥åˆå§‹åŒ–ç²’å­æ»¤æ³¢å™¨çš„å‡å€¼å’Œåæ–¹å·®</p>
</li>
<li><p>map(nav_msgs/OccupancyGrid)ï¼šè·å–åœ°å›¾æ•°æ®</p>
</li>
</ul>
<p>å‘å¸ƒçš„Topicï¼š</p>
<ul>
<li><p>amcl_pose(geometry_msgs/PoseWithCovarianceStamped)ï¼šæœºå™¨äººåœ¨åœ°å›¾ä¸­çš„ä½å§¿ä¼°è®¡</p>
</li>
<li><p>particlecloud(geometry_msgs/PoseArray)ï¼šä½å§¿ä¼°è®¡é›†åˆï¼Œrvizä¸­å¯ä»¥è¢« PoseArray è®¢é˜…ç„¶åå›¾å½¢åŒ–æ˜¾ç¤ºæœºå™¨äººçš„ä½å§¿ä¼°è®¡é›†åˆã€‚</p>
</li>
<li><p>tf(tf/tfMessage)ï¼šå‘å¸ƒä» odom åˆ° map çš„è½¬æ¢</p>
</li>
</ul>
<p>æœåŠ¡ï¼š</p>
<ul>
<li><p>global_localization(std_srvs/Empty)ï¼šåˆå§‹åŒ–å…¨å±€å®šä½çš„æœåŠ¡</p>
</li>
<li><p>request_nomotion_update(std_srvs/Empty)ï¼šæ‰‹åŠ¨æ‰§è¡Œæ›´æ–°å’Œå‘å¸ƒæ›´æ–°çš„ç²’å­çš„æœåŠ¡</p>
</li>
<li><p>set_map(nav_msgs/SetMap)ï¼šæ‰‹åŠ¨è®¾ç½®æ–°åœ°å›¾å’Œå§¿æ€çš„æœåŠ¡</p>
</li>
</ul>
<p>è°ƒç”¨çš„æœåŠ¡ï¼š</p>
<ul>
<li>static_map(nav_msgs/GetMap)ï¼šè°ƒç”¨æ­¤æœåŠ¡è·å–åœ°å›¾æ•°æ®</li>
</ul>
<p>å‚æ•°ï¼š</p>
<ul>
<li><p>~odom_model_type(string, default:â€diffâ€)ï¼šé‡Œç¨‹è®¡æ¨¡å‹é€‰æ‹©â€diffâ€,â€omniâ€,â€diff-correctedâ€,â€omni-correctedâ€ (diff å·®é€Ÿã€omni å…¨å‘è½®)</p>
</li>
<li><p>~odom_frame_id(string, default:â€odomâ€)ï¼šé‡Œç¨‹è®¡åæ ‡ç³»</p>
</li>
<li><p>~base_frame_id(string, default:â€base_linkâ€)ï¼šæœºå™¨äººåæ ‡ç³»</p>
</li>
<li><p>~global_frame_id(string, default:â€mapâ€)ï¼šåœ°å›¾åæ ‡ç³»</p>
</li>
</ul>
<p>é‡Œç¨‹è®¡æœ¬èº«ä¹Ÿæ˜¯å¯ä»¥ååŠ©æœºå™¨äººå®šä½çš„ï¼Œä¸è¿‡é‡Œç¨‹è®¡å­˜åœ¨ç´¯è®¡è¯¯å·®ä¸”ä¸€äº›ç‰¹æ®Šæƒ…å†µæ—¶(è½¦è½®æ‰“æ»‘)ä¼šå‡ºç°å®šä½é”™è¯¯çš„æƒ…å†µ</p>
<p>amcl åˆ™å¯ä»¥é€šè¿‡ä¼°ç®—æœºå™¨äººåœ¨åœ°å›¾åæ ‡ç³»ä¸‹çš„å§¿æ€ï¼Œå†ç»“åˆé‡Œç¨‹è®¡æé«˜å®šä½å‡†ç¡®åº¦</p>
<p><strong>ç¼–å†™amclèŠ‚ç‚¹ç›¸å…³çš„launchæ–‡ä»¶</strong></p>
<p>æ‰¾åˆ°amclåŠŸèƒ½åŒ…çš„example</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">roscd amcl</span><br><span class="line">ls examples/</span><br><span class="line">gedit examples/amcl_diff.launch</span><br></pre></td></tr></tbody></table></figure>

<p>ä¿®æ”¹æ¡ˆä¾‹</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"amcl"</span> <span class="attr">type</span>=<span class="string">"amcl"</span> <span class="attr">name</span>=<span class="string">"amcl"</span> <span class="attr">output</span>=<span class="string">"screen"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Publish scans from best pose at a max of 10 Hz --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"odom_model_type"</span> <span class="attr">value</span>=<span class="string">"diff"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"odom_alpha5"</span> <span class="attr">value</span>=<span class="string">"0.1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"gui_publish_rate"</span> <span class="attr">value</span>=<span class="string">"10.0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"laser_max_beams"</span> <span class="attr">value</span>=<span class="string">"30"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"min_particles"</span> <span class="attr">value</span>=<span class="string">"500"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"max_particles"</span> <span class="attr">value</span>=<span class="string">"5000"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"kld_err"</span> <span class="attr">value</span>=<span class="string">"0.05"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"kld_z"</span> <span class="attr">value</span>=<span class="string">"0.99"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"odom_alpha1"</span> <span class="attr">value</span>=<span class="string">"0.2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"odom_alpha2"</span> <span class="attr">value</span>=<span class="string">"0.2"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- translation std dev, m --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"odom_alpha3"</span> <span class="attr">value</span>=<span class="string">"0.8"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"odom_alpha4"</span> <span class="attr">value</span>=<span class="string">"0.2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"laser_z_hit"</span> <span class="attr">value</span>=<span class="string">"0.5"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"laser_z_short"</span> <span class="attr">value</span>=<span class="string">"0.05"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"laser_z_max"</span> <span class="attr">value</span>=<span class="string">"0.05"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"laser_z_rand"</span> <span class="attr">value</span>=<span class="string">"0.5"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"laser_sigma_hit"</span> <span class="attr">value</span>=<span class="string">"0.2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"laser_lambda_short"</span> <span class="attr">value</span>=<span class="string">"0.1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"laser_model_type"</span> <span class="attr">value</span>=<span class="string">"likelihood_field"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;param name="laser_model_type" value="beam"/&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"laser_likelihood_max_dist"</span> <span class="attr">value</span>=<span class="string">"2.0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"update_min_d"</span> <span class="attr">value</span>=<span class="string">"0.2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"update_min_a"</span> <span class="attr">value</span>=<span class="string">"0.5"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é‡Œç¨‹è®¡åæ ‡ç³» --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"odom_frame_id"</span> <span class="attr">value</span>=<span class="string">"odom"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®æœºå™¨äººåæ ‡ç³» --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"base_frame_id"</span> <span class="attr">value</span>=<span class="string">"base_footprint"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åœ°å›¾åæ ‡ç³»é»˜è®¤,ä¸å†™ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"resample_interval"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"transform_tolerance"</span> <span class="attr">value</span>=<span class="string">"0.1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"recovery_alpha_slow"</span> <span class="attr">value</span>=<span class="string">"0.0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"recovery_alpha_fast"</span> <span class="attr">value</span>=<span class="string">"0.0"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç¼–å†™æµ‹è¯•launchæ–‡ä»¶</p>
<p>amclèŠ‚ç‚¹æ˜¯ä¸å¯ä»¥å•ç‹¬è¿è¡Œçš„ï¼Œè¿è¡Œ amcl èŠ‚ç‚¹ä¹‹å‰ï¼Œéœ€è¦å…ˆåŠ è½½å…¨å±€åœ°å›¾ï¼Œç„¶åå¯åŠ¨ rviz æ˜¾ç¤ºå®šä½ç»“æœï¼Œä¸Šè¿°èŠ‚ç‚¹å¯ä»¥é›†æˆè¿›launchæ–‡ä»¶</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨rviz --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">output</span>=<span class="string">"screen"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">pkg</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">type</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">output</span>=<span class="string">"screen"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">"rviz"</span> <span class="attr">pkg</span>=<span class="string">"rviz"</span> <span class="attr">type</span>=<span class="string">"rviz"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨åœ°å›¾æœåŠ¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/launch/nav03_map_server.launch"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- amcl --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/launch/nav04_amcl.launch"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ‰§è¡Œï¼š</p>
<ol>
<li>å…ˆå¯åŠ¨ Gazebo ä»¿çœŸç¯å¢ƒ</li>
<li>å¯åŠ¨é”®ç›˜æ§åˆ¶èŠ‚ç‚¹</li>
<li>å¯åŠ¨é›†æˆåœ°å›¾æœåŠ¡ã€amcl ä¸ rviz çš„ launch æ–‡ä»¶</li>
<li>åœ¨å¯åŠ¨çš„ rviz ä¸­ï¼Œæ·»åŠ RobotModelã€Mapç»„ä»¶ï¼Œåˆ†åˆ«æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹ä¸åœ°å›¾ï¼Œæ·»åŠ  posearray æ’ä»¶ï¼Œè®¾ç½®topicä¸ºparticlecloudæ¥æ˜¾ç¤º amcl é¢„ä¼°çš„å½“å‰æœºå™¨äººçš„ä½å§¿ï¼Œç®­å¤´è¶Šæ˜¯å¯†é›†ï¼Œè¯´æ˜å½“å‰æœºå™¨äººå¤„äºæ­¤ä½ç½®çš„æ¦‚ç‡è¶Šé«˜</li>
<li>é€šè¿‡é”®ç›˜æ§åˆ¶æœºå™¨äººè¿åŠ¨ï¼Œä¼šå‘ç° posearray ä¹Ÿéšä¹‹è€Œæ”¹å˜</li>
</ol>
<h4 id="è·¯å¾„è§„åˆ’"><a href="#è·¯å¾„è§„åˆ’" class="headerlink" title="è·¯å¾„è§„åˆ’"></a>è·¯å¾„è§„åˆ’</h4><p>åœ¨ROSçš„å¯¼èˆªåŠŸèƒ½åŒ…é›†navigationä¸­æä¾›äº† move_base åŠŸèƒ½åŒ…ï¼Œç”¨äºå®ç°æ­¤åŠŸèƒ½ï¼ŒåŒ…åœ¨ä¹‹å‰å·²ç»å®‰è£…</p>
<p>move_base åŠŸèƒ½åŒ…æä¾›äº†åŸºäº<font color="Violetred">åŠ¨ä½œ(action)</font>çš„è·¯å¾„è§„åˆ’å®ç°ï¼Œmove_base å¯ä»¥æ ¹æ®ç»™å®šçš„ç›®æ ‡ç‚¹ï¼Œæ§åˆ¶æœºå™¨äººåº•ç›˜è¿åŠ¨è‡³ç›®æ ‡ä½ç½®ï¼Œå¹¶ä¸”åœ¨è¿åŠ¨è¿‡ç¨‹ä¸­ä¼šè¿ç»­åé¦ˆæœºå™¨äººè‡ªèº«çš„å§¿æ€ä¸ç›®æ ‡ç‚¹çš„çŠ¶æ€ä¿¡æ¯</p>
<blockquote>
<p>Actions æ˜¯ä¸€ç§å®¢æˆ·ç«¯/æœåŠ¡å™¨ (Client/Server) æ¨¡å¼çš„é€šä¿¡æ–¹å¼ï¼Œä¸“ä¸º<strong>é•¿æ—¶é—´è¿è¡Œã€å¯æŠ¢å çš„ä»»åŠ¡</strong>è€Œè®¾è®¡ï¼Œå¹¶æä¾›<strong>è¿›åº¦åé¦ˆ</strong>å’Œ<strong>ç»“æœ</strong></p>
<p>Actions å®é™…ä¸Šæ˜¯å»ºç«‹åœ¨ Topics å’Œ Services (æœåŠ¡) ä¹‹ä¸Šçš„æ›´é«˜çº§åˆ«çš„æŠ½è±¡</p>
</blockquote>
<p>move_baseä¸»è¦ç”±å…¨å±€è·¯å¾„è§„åˆ’ä¸æœ¬åœ°è·¯å¾„è§„åˆ’ç»„æˆ</p>
<p>move_baseåŠŸèƒ½åŒ…ä¸­çš„æ ¸å¿ƒèŠ‚ç‚¹æ˜¯ï¼šmove_base</p>
<p>åŠ¨ä½œè®¢é˜…ï¼š</p>
<ul>
<li><p>move_base/goal(move_base_msgs/MoveBaseActionGoal)ï¼šmove_base çš„è¿åŠ¨è§„åˆ’ç›®æ ‡</p>
</li>
<li><p>move_base/cancel(actionlib_msgs/GoalID)ï¼šå–æ¶ˆç›®æ ‡</p>
</li>
</ul>
<p>åŠ¨ä½œå‘å¸ƒï¼š</p>
<ul>
<li><p>move_base/feedback(move_base_msgs/MoveBaseActionFeedback)ï¼šè¿ç»­åé¦ˆçš„ä¿¡æ¯ï¼ŒåŒ…å«æœºå™¨äººåº•ç›˜åæ ‡</p>
</li>
<li><p>move_base/status(actionlib_msgs/GoalStatusArray)ï¼šå‘é€åˆ°move_baseçš„ç›®æ ‡çŠ¶æ€ä¿¡æ¯</p>
</li>
<li><p>move_base/result(move_base_msgs/MoveBaseActionResult)ï¼šæ“ä½œç»“æœ(æ­¤å¤„ä¸ºç©º)</p>
</li>
</ul>
<p>è®¢é˜…çš„Topicï¼š</p>
<ul>
<li>move_base_simple/goal(geometry_msgs/PoseStamped)ï¼šè¿åŠ¨è§„åˆ’ç›®æ ‡(ä¸actionç›¸æ¯”ï¼Œæ²¡æœ‰è¿ç»­åé¦ˆï¼Œæ— æ³•è¿½è¸ªæœºå™¨äººæ‰§è¡ŒçŠ¶æ€)</li>
</ul>
<p>å‘å¸ƒçš„Topicï¼š</p>
<ul>
<li>cmd_vel(geometry_msgs/Twist)ï¼šè¾“å‡ºåˆ°æœºå™¨äººåº•ç›˜çš„è¿åŠ¨æ§åˆ¶æ¶ˆæ¯</li>
</ul>
<p>æœåŠ¡ï¼š</p>
<ul>
<li><p>~make_plan(nav_msgs/GetPlan)ï¼šè¯·æ±‚è¯¥æœåŠ¡ï¼Œå¯ä»¥è·å–ç»™å®šç›®æ ‡çš„è§„åˆ’è·¯å¾„ï¼Œä½†æ˜¯å¹¶ä¸æ‰§è¡Œè¯¥è·¯å¾„è§„åˆ’</p>
</li>
<li><p>~clear_unknown_space(std_srvs/Empty)ï¼šå…è®¸ç”¨æˆ·ç›´æ¥æ¸…é™¤æœºå™¨äººå‘¨å›´çš„æœªçŸ¥ç©ºé—´</p>
</li>
<li><p>~clear_costmaps(std_srvs/Empty)ï¼šå…è®¸æ¸…é™¤ä»£ä»·åœ°å›¾ä¸­çš„éšœç¢ç‰©ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœºå™¨äººä¸éšœç¢ç‰©ç¢°æ’ï¼Œè¯·æ…ç”¨</p>
</li>
</ul>
<h5 id="ä»£ä»·åœ°å›¾"><a href="#ä»£ä»·åœ°å›¾" class="headerlink" title="ä»£ä»·åœ°å›¾"></a>ä»£ä»·åœ°å›¾</h5><p>ROSä¸­çš„åœ°å›¾å…¶å®å°±æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œè¿™å¼ å›¾ç‰‡æœ‰å®½åº¦ã€é«˜åº¦ã€åˆ†è¾¨ç‡ç­‰å…ƒæ•°æ®ï¼Œåœ¨å›¾ç‰‡ä¸­ä½¿ç”¨ç°åº¦å€¼æ¥è¡¨ç¤ºéšœç¢ç‰©å­˜åœ¨çš„æ¦‚ç‡</p>
<p>SLAMæ„å»ºçš„åœ°å›¾åœ¨å¯¼èˆªä¸­æ˜¯ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ï¼š</p>
<ol>
<li>SLAMæ„å»ºçš„åœ°å›¾æ˜¯é™æ€åœ°å›¾ï¼Œè€Œå¯¼èˆªè¿‡ç¨‹ä¸­ï¼Œéšœç¢ç‰©ä¿¡æ¯æ˜¯å¯å˜çš„ï¼Œå¯¼èˆªä¸­éœ€è¦æ—¶æ—¶è·å–éšœç¢ç‰©ä¿¡æ¯ï¼›</li>
<li>åœ¨é è¿‘éšœç¢ç‰©è¾¹ç¼˜æ—¶ï¼Œæœºå™¨äººå¯èƒ½ç”±äºæƒ¯æ€§ã€ä¸è§„åˆ™å½¢ä½“ä¼šä¸éšœç¢ç‰©äº§ç”Ÿç¢°æ’ï¼Œæ‰€ä»¥æœ€å¥½åœ¨åœ°å›¾çš„éšœç¢ç‰©è¾¹ç¼˜è®¾ç½®è­¦æˆ’åŒº</li>
</ol>
<p>å› æ­¤é™æ€åœ°å›¾æ— æ³•ç›´æ¥åº”ç”¨äºå¯¼èˆªï¼Œå…¶åŸºç¡€ä¹‹ä¸Šéœ€è¦æ·»åŠ ä¸€äº›è¾…åŠ©ä¿¡æ¯çš„åœ°å›¾</p>
<p><strong>ç»„æˆ</strong></p>
<p>ä»£ä»·åœ°å›¾æœ‰ä¸¤å¼ ï¼šglobal_costmap(å…¨å±€ä»£ä»·åœ°å›¾) å’Œ local_costmap(æœ¬åœ°ä»£ä»·åœ°å›¾)ï¼Œå‰è€…ç”¨äºå…¨å±€è·¯å¾„è§„åˆ’ï¼Œåè€…ç”¨äºæœ¬åœ°è·¯å¾„è§„åˆ’</p>
<p>ä¸¤å¼ ä»£ä»·åœ°å›¾éƒ½å¯ä»¥å¤šå±‚å åŠ ï¼š</p>
<ol>
<li>é™æ€åœ°å›¾å±‚ï¼ŒSLAMæ„å»ºçš„é™æ€åœ°å›¾</li>
<li>éšœç¢åœ°å›¾å±‚ï¼Œä¼ æ„Ÿå™¨æ„ŸçŸ¥çš„éšœç¢ç‰©ä¿¡æ¯</li>
<li>è†¨èƒ€å±‚ï¼Œåœ¨ä»¥ä¸Šä¸¤å±‚åœ°å›¾ä¸Šè¿›è¡Œè†¨èƒ€ï¼ˆå‘å¤–æ‰©å¼ ï¼‰ï¼Œä»¥é¿å…æœºå™¨äººçš„å¤–å£³ä¼šæ’ä¸Šéšœç¢ç‰©</li>
<li>è‡ªå®šä¹‰å±‚ï¼Œæ ¹æ®ä¸šåŠ¡è‡ªè®¾è®¡çš„åœ°å›¾æ•°æ®</li>
</ol>
<p><strong>ç¢°æ’ç®—æ³•</strong></p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/ç¢°æ’ç®—æ³•.webp" alt="ç¢°æ’ç®—æ³•" style="zoom:50%;">

<p>ä¸Šå›¾ä¸­ï¼Œæ¨ªè½´æ˜¯è·ç¦»æœºå™¨äººä¸­å¿ƒçš„è·ç¦»ï¼Œçºµè½´æ˜¯ä»£ä»·åœ°å›¾ä¸­æ …æ ¼çš„ç°åº¦å€¼</p>
<ul>
<li>è‡´å‘½éšœç¢ï¼šæ …æ ¼å€¼ä¸º254ï¼Œæ­¤æ—¶éšœç¢ç‰©ä¸æœºå™¨äººä¸­å¿ƒé‡å ï¼Œå¿…ç„¶å‘ç”Ÿç¢°æ’ï¼›</li>
<li>å†…åˆ‡éšœç¢ï¼šæ …æ ¼å€¼ä¸º253ï¼Œæ­¤æ—¶éšœç¢ç‰©å¤„äºæœºå™¨äººçš„å†…åˆ‡åœ†å†…ï¼Œå¿…ç„¶å‘ç”Ÿç¢°æ’ï¼›</li>
<li>å¤–åˆ‡éšœç¢ï¼šæ …æ ¼å€¼ä¸º[128,252]ï¼Œæ­¤æ—¶éšœç¢ç‰©å¤„äºå…¶æœºå™¨äººçš„å¤–åˆ‡åœ†å†…ï¼Œå¤„äºç¢°æ’ä¸´ç•Œï¼Œä¸ä¸€å®šå‘ç”Ÿç¢°æ’ï¼›</li>
<li>éè‡ªç”±ç©ºé—´ï¼šæ …æ ¼å€¼ä¸º(0,127]ï¼Œæ­¤æ—¶æœºå™¨äººå¤„äºéšœç¢ç‰©é™„è¿‘ï¼Œå±äºå±é™©è­¦æˆ’åŒºï¼Œè¿›å…¥æ­¤åŒºåŸŸï¼Œå°†æ¥å¯èƒ½ä¼šå‘ç”Ÿç¢°æ’ï¼›</li>
<li>è‡ªç”±åŒºåŸŸï¼šæ …æ ¼å€¼ä¸º0ï¼Œæ­¤å¤„æœºå™¨äººå¯ä»¥è‡ªç”±é€šè¿‡ï¼›</li>
<li>æœªçŸ¥åŒºåŸŸï¼šæ …æ ¼å€¼ä¸º255ï¼Œè¿˜æ²¡æ¢æ˜æ˜¯å¦æœ‰éšœç¢ç‰©</li>
</ul>
<h5 id="move-baseä½¿ç”¨"><a href="#move-baseä½¿ç”¨" class="headerlink" title="move_baseä½¿ç”¨"></a>move_baseä½¿ç”¨</h5><p><strong>launchæ–‡ä»¶æ¨¡æ¿</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"move_base"</span> <span class="attr">type</span>=<span class="string">"move_base"</span> <span class="attr">respawn</span>=<span class="string">"false"</span> <span class="attr">name</span>=<span class="string">"move_base"</span> <span class="attr">output</span>=<span class="string">"screen"</span> <span class="attr">clear_params</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- costmap_common_params.yaml åŠ è½½åˆ°ä¸¤ä¸ªç©ºé—´ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/param/costmap_common_params.yaml"</span> <span class="attr">command</span>=<span class="string">"load"</span> <span class="attr">ns</span>=<span class="string">"global_costmap"</span> /&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/param/costmap_common_params.yaml"</span> <span class="attr">command</span>=<span class="string">"load"</span> <span class="attr">ns</span>=<span class="string">"local_costmap"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/param/local_costmap_params.yaml"</span> <span class="attr">command</span>=<span class="string">"load"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/param/global_costmap_params.yaml"</span> <span class="attr">command</span>=<span class="string">"load"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/param/base_local_planner_params.yaml"</span> <span class="attr">command</span>=<span class="string">"load"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¯åŠ¨äº† move_base åŠŸèƒ½åŒ…ä¸‹çš„ move_base èŠ‚ç‚¹ï¼Œrespawn ä¸º falseï¼Œæ„å‘³ç€è¯¥èŠ‚ç‚¹å…³é—­åï¼Œä¸ä¼šè¢«é‡å¯ï¼›</p>
<p>clear_params ä¸º trueï¼Œæ„å‘³ç€æ¯æ¬¡å¯åŠ¨è¯¥èŠ‚ç‚¹éƒ½è¦æ¸…ç©ºç§æœ‰å‚æ•°ç„¶åé‡æ–°è½½å…¥ï¼›</p>
<p><strong>é…ç½®æ–‡ä»¶</strong></p>
<p>å…³äºé…ç½®æ–‡ä»¶çš„ç¼–å†™ï¼Œå¯ä»¥å‚è€ƒä¸€äº›æˆç†Ÿçš„æœºå™¨äººçš„è·¯å¾„è§„åˆ’å®ç°</p>
<p><a target="_blank" rel="noopener" href="https://github.com/ROBOTIS-GIT/turtlebot3">ROBOTIS-GIT/turtlebot3: ROS packages for Turtlebot3</a></p>
<p><font color="Violetred">costmap_common_params.yaml</font></p>
<p>è¯¥æ–‡ä»¶æ˜¯move_base åœ¨å…¨å±€è·¯å¾„è§„åˆ’ä¸æœ¬åœ°è·¯å¾„è§„åˆ’æ—¶è°ƒç”¨çš„é€šç”¨å‚æ•°ï¼ŒåŒ…æ‹¬ï¼šæœºå™¨äººçš„å°ºå¯¸ã€è·ç¦»éšœç¢ç‰©çš„å®‰å…¨è·ç¦»ã€ä¼ æ„Ÿå™¨ä¿¡æ¯ç­‰</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æœºå™¨äººå‡ ä½•å‚ï¼Œå¦‚æœæœºå™¨äººæ˜¯åœ†å½¢ï¼Œè®¾ç½® robot_radius,å¦‚æœæ˜¯å…¶ä»–å½¢çŠ¶è®¾ç½® footprint</span></span><br><span class="line"><span class="attr">robot_radius:</span> <span class="number">0.12</span> <span class="comment">#åœ†å½¢</span></span><br><span class="line"><span class="comment"># footprint: [[-0.12, -0.12], [-0.12, 0.12], [0.12, 0.12], [0.12, -0.12]] #æ¡ˆä¾‹æ˜¯æ–¹å½¢ï¼Œå››ä¸ªç‚¹çš„åæ ‡</span></span><br><span class="line"></span><br><span class="line"><span class="attr">obstacle_range:</span> <span class="number">3.0</span> <span class="comment"># ç”¨äºéšœç¢ç‰©æ¢æµ‹ï¼Œæ¯”å¦‚: å€¼ä¸º 3.0ï¼Œæ„å‘³ç€æ£€æµ‹åˆ°è·ç¦»å°äº 3 ç±³çš„éšœç¢ç‰©æ—¶ï¼Œå°±ä¼šå¼•å…¥ä»£ä»·åœ°å›¾</span></span><br><span class="line"><span class="attr">raytrace_range:</span> <span class="number">3.5</span> <span class="comment"># ç”¨äºæ¸…é™¤éšœç¢ç‰©ï¼Œæ¯”å¦‚ï¼šå€¼ä¸º 3.5ï¼Œæ„å‘³ç€æ¸…é™¤ä»£ä»·åœ°å›¾ä¸­ 3.5 ç±³ä»¥å¤–çš„éšœç¢ç‰©</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è†¨èƒ€åŠå¾„ï¼Œæ‰©å±•åœ¨ç¢°æ’åŒºåŸŸä»¥å¤–çš„ä»£ä»·åŒºåŸŸï¼Œä½¿å¾—æœºå™¨äººè§„åˆ’è·¯å¾„é¿å¼€éšœç¢ç‰©</span></span><br><span class="line"><span class="attr">inflation_radius:</span> <span class="number">0.2</span></span><br><span class="line"><span class="comment">#ä»£ä»·æ¯”ä¾‹ç³»æ•°ï¼Œè¶Šå¤§åˆ™ä»£ä»·å€¼è¶Šå°</span></span><br><span class="line"><span class="attr">cost_scaling_factor:</span> <span class="number">3.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ°å›¾ç±»å‹</span></span><br><span class="line"><span class="attr">map_type:</span> <span class="string">costmap</span></span><br><span class="line"><span class="comment">#å¯¼èˆªåŒ…æ‰€éœ€è¦çš„ä¼ æ„Ÿå™¨</span></span><br><span class="line"><span class="attr">observation_sources:</span> <span class="string">scan</span></span><br><span class="line"><span class="comment">#å¯¹ä¼ æ„Ÿå™¨çš„åæ ‡ç³»å’Œæ•°æ®è¿›è¡Œé…ç½®ã€‚è¿™ä¸ªä¹Ÿä¼šç”¨äºä»£ä»·åœ°å›¾æ·»åŠ å’Œæ¸…é™¤éšœç¢ç‰©ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨æ¿€å…‰é›·è¾¾ä¼ æ„Ÿå™¨ç”¨äºåœ¨ä»£ä»·åœ°å›¾æ·»åŠ éšœç¢ç‰©ï¼Œå†æ·»åŠ kinectç”¨äºå¯¼èˆªå’Œæ¸…é™¤éšœç¢ç‰©ã€‚</span></span><br><span class="line"><span class="attr">scan:</span> {<span class="attr">sensor_frame:</span> <span class="string">laser</span>, <span class="attr">data_type:</span> <span class="string">LaserScan</span>, <span class="attr">topic:</span> <span class="string">scan</span>, <span class="attr">marking:</span> <span class="literal">true</span>, <span class="attr">clearing:</span> <span class="literal">true</span>}</span><br></pre></td></tr></tbody></table></figure>

<p>global_costmap_params.yaml</p>
<p>è¯¥æ–‡ä»¶ç”¨äºå…¨å±€ä»£ä»·åœ°å›¾å‚æ•°è®¾ç½®ï¼š</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global_costmap:</span></span><br><span class="line">  <span class="attr">global_frame:</span> <span class="string">map</span> <span class="comment">#åœ°å›¾åæ ‡ç³»</span></span><br><span class="line">  <span class="attr">robot_base_frame:</span> <span class="string">base_footprint</span> <span class="comment">#æœºå™¨äººåæ ‡ç³»</span></span><br><span class="line">  <span class="comment"># ä»¥æ­¤å®ç°åæ ‡å˜æ¢</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">update_frequency:</span> <span class="number">1.0</span> <span class="comment">#ä»£ä»·åœ°å›¾æ›´æ–°é¢‘ç‡ï¼Œå…¨å±€åœ°å›¾é¢‘ç‡ä¸ä¼šå¤ªé«˜</span></span><br><span class="line">  <span class="attr">publish_frequency:</span> <span class="number">1.0</span> <span class="comment">#ä»£ä»·åœ°å›¾çš„å‘å¸ƒé¢‘ç‡</span></span><br><span class="line">  <span class="attr">transform_tolerance:</span> <span class="number">0.5</span> <span class="comment">#ç­‰å¾…åæ ‡å˜æ¢å‘å¸ƒä¿¡æ¯çš„è¶…æ—¶æ—¶é—´ï¼Œä¸€èˆ¬ä¸å¤§äº0.5</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">static_map:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦ä½¿ç”¨ä¸€ä¸ªåœ°å›¾æˆ–è€…åœ°å›¾æœåŠ¡å™¨æ¥åˆå§‹åŒ–å…¨å±€ä»£ä»·åœ°å›¾ï¼Œå¦‚æœä¸ä½¿ç”¨é™æ€åœ°å›¾ï¼Œè¿™ä¸ªå‚æ•°ä¸ºfalse.</span></span><br></pre></td></tr></tbody></table></figure>

<p>local_costmap_params.yaml</p>
<p>è¯¥æ–‡ä»¶ç”¨äºå±€éƒ¨ä»£ä»·åœ°å›¾å‚æ•°è®¾ç½®ï¼š</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_costmap:</span></span><br><span class="line">  <span class="attr">global_frame:</span> <span class="string">odom</span> <span class="comment">#é‡Œç¨‹è®¡åæ ‡ç³»</span></span><br><span class="line">  <span class="attr">robot_base_frame:</span> <span class="string">base_footprint</span> <span class="comment">#æœºå™¨äººåæ ‡ç³»</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">update_frequency:</span> <span class="number">10.0</span> <span class="comment">#ä»£ä»·åœ°å›¾æ›´æ–°é¢‘ç‡ï¼Œå±€éƒ¨åœ°å›¾è¦å¤§ä¸€äº›</span></span><br><span class="line">  <span class="attr">publish_frequency:</span> <span class="number">10.0</span> <span class="comment">#ä»£ä»·åœ°å›¾çš„å‘å¸ƒé¢‘ç‡</span></span><br><span class="line">  <span class="attr">transform_tolerance:</span> <span class="number">0.5</span> <span class="comment">#ç­‰å¾…åæ ‡å˜æ¢å‘å¸ƒä¿¡æ¯çš„è¶…æ—¶æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">static_map:</span> <span class="literal">false</span>  <span class="comment">#ä¸éœ€è¦é™æ€åœ°å›¾ï¼Œå¯ä»¥æå‡å¯¼èˆªæ•ˆæœ</span></span><br><span class="line">  <span class="attr">rolling_window:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦ä½¿ç”¨åŠ¨æ€çª—å£ï¼Œé»˜è®¤ä¸ºfalseï¼Œåœ¨é™æ€çš„å…¨å±€åœ°å›¾ä¸­ï¼Œåœ°å›¾ä¸ä¼šå˜åŒ–</span></span><br><span class="line">  <span class="attr">width:</span> <span class="number">3</span> <span class="comment"># å±€éƒ¨åœ°å›¾å®½åº¦ å•ä½æ˜¯ m</span></span><br><span class="line">  <span class="attr">height:</span> <span class="number">3</span> <span class="comment"># å±€éƒ¨åœ°å›¾é«˜åº¦ å•ä½æ˜¯ m</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="number">0.05</span> <span class="comment"># å±€éƒ¨åœ°å›¾åˆ†è¾¨ç‡ å•ä½æ˜¯ mï¼Œä¸€èˆ¬ä¸é™æ€åœ°å›¾åˆ†è¾¨ç‡ä¿æŒä¸€è‡´</span></span><br></pre></td></tr></tbody></table></figure>

<p>base_local_planner_params</p>
<p>åŸºæœ¬çš„å±€éƒ¨è§„åˆ’å™¨å‚æ•°é…ç½®ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶è®¾å®šäº†æœºå™¨äººçš„æœ€å¤§å’Œæœ€å°é€Ÿåº¦é™åˆ¶å€¼ï¼Œä¹Ÿè®¾å®šäº†åŠ é€Ÿåº¦çš„é˜ˆå€¼</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">TrajectoryPlannerROS:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Robot Configuration Parameters</span></span><br><span class="line">  <span class="attr">max_vel_x:</span> <span class="number">0.5</span> <span class="comment"># X æ–¹å‘æœ€å¤§é€Ÿåº¦</span></span><br><span class="line">  <span class="attr">min_vel_x:</span> <span class="number">0.1</span> <span class="comment"># X æ–¹å‘æœ€å°é€Ÿé€Ÿ</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">max_vel_theta:</span>  <span class="number">1.0</span> <span class="comment"># è§’é€Ÿåº¦</span></span><br><span class="line">  <span class="attr">min_vel_theta:</span> <span class="number">-1.0</span></span><br><span class="line">  <span class="attr">min_in_place_vel_theta:</span> <span class="number">1.0</span> <span class="comment"># åŸåœ°æ—‹è½¬è§’é€Ÿåº¦</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">acc_lim_x:</span> <span class="number">1.0</span> <span class="comment"># X åŠ é€Ÿé™åˆ¶</span></span><br><span class="line">  <span class="attr">acc_lim_y:</span> <span class="number">0.0</span> <span class="comment"># Y åŠ é€Ÿé™åˆ¶</span></span><br><span class="line">  <span class="attr">acc_lim_theta:</span> <span class="number">0.6</span> <span class="comment"># è§’é€Ÿåº¦åŠ é€Ÿé™åˆ¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Goal Tolerance Parametersï¼Œç›®æ ‡å…¬å·®</span></span><br><span class="line">  <span class="attr">xy_goal_tolerance:</span> <span class="number">0.10</span></span><br><span class="line">  <span class="attr">yaw_goal_tolerance:</span> <span class="number">0.05</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Differential-drive robot configuration</span></span><br><span class="line"><span class="comment"># æ˜¯å¦æ˜¯å…¨å‘ç§»åŠ¨æœºå™¨äºº</span></span><br><span class="line">  <span class="attr">holonomic_robot:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Forward Simulation Parametersï¼Œå‰è¿›æ¨¡æ‹Ÿå‚æ•°</span></span><br><span class="line">  <span class="attr">sim_time:</span> <span class="number">0.8</span> <span class="comment"># å¤§ä¸€äº›ä¼šè®©å±€éƒ¨è·¯å¾„è§„åˆ’è´´è¿‘å…¨å±€</span></span><br><span class="line">  <span class="attr">vx_samples:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">vtheta_samples:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">sim_granularity:</span> <span class="number">0.05</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šé…ç½®åœ¨å®æ“ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°æœºå™¨äººåœ¨æœ¬åœ°è·¯å¾„è§„åˆ’æ—¶ä¸å…¨å±€è·¯å¾„è§„åˆ’ä¸ç¬¦è€Œè¿›å…¥è†¨èƒ€åŒºåŸŸå‡ºç°å‡æ­»çš„æƒ…å†µï¼Œå¦‚ä½•å°½é‡é¿å…è¿™ç§æƒ…å½¢å‘¢ï¼Ÿ</p>
<p>å¯ä»¥é‡‡ç”¨ä¸åŒçš„å‚æ•°è®¾ç½®ç­–ç•¥:</p>
<ul>
<li>å…¨å±€ä»£ä»·åœ°å›¾å¯ä»¥å°†è†¨èƒ€åŠå¾„å’Œéšœç¢ç‰©ç³»æ•°è®¾ç½®çš„åå¤§ä¸€äº›</li>
<li>æœ¬åœ°ä»£ä»·åœ°å›¾å¯ä»¥å°†è†¨èƒ€åŠå¾„å’Œéšœç¢ç‰©ç³»æ•°è®¾ç½®çš„åå°ä¸€äº›</li>
</ul>
<p>è¿™æ ·ï¼Œåœ¨å…¨å±€è·¯å¾„è§„åˆ’æ—¶ï¼Œè§„åˆ’çš„è·¯å¾„ä¼šå°½é‡è¿œç¦»éšœç¢ç‰©ï¼Œè€Œæœ¬åœ°è·¯å¾„è§„åˆ’æ—¶ï¼Œæœºå™¨äººå³ä¾¿åç¦»å…¨å±€è·¯å¾„ä¹Ÿä¼šå’Œéšœç¢ç‰©ä¹‹é—´ä¿ç•™æ›´å¤§çš„è‡ªç”±ç©ºé—´ï¼Œä»è€Œé¿å…äº†é™·å…¥â€œå‡æ­»â€çš„æƒ…å½¢</p>
<p><strong>launchæ–‡ä»¶é›†æˆ</strong></p>
<p>å¦‚æœè¦å®ç°å¯¼èˆªï¼Œéœ€è¦é›†æˆåœ°å›¾æœåŠ¡ã€amcl ã€move_base ä¸ Rviz ç­‰</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åœ°å›¾æœåŠ¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/launch/nav03_map_server.launch"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨AMCLèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/launch/nav04_amcl.launch"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿è¡Œmove_baseèŠ‚ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/launch/nav05_path.launch"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿è¡Œrviz --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">pkg</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">type</span>=<span class="string">"joint_state_publisher"</span> <span class="attr">output</span>=<span class="string">"screen"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">pkg</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">type</span>=<span class="string">"robot_state_publisher"</span> <span class="attr">output</span>=<span class="string">"screen"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"rviz"</span> <span class="attr">type</span>=<span class="string">"rviz"</span> <span class="attr">name</span>=<span class="string">"rviz"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>1.å…ˆå¯åŠ¨ Gazebo ä»¿çœŸç¯å¢ƒ(æ­¤è¿‡ç¨‹ç•¥)ï¼›</p>
<p>2.å¯åŠ¨å¯¼èˆªç›¸å…³çš„ launch æ–‡ä»¶ï¼›</p>
<p>3.æ·»åŠ Rvizç»„ä»¶(å‚è€ƒæ¼”ç¤ºç»“æœ),å¯ä»¥å°†é…ç½®æ•°æ®ä¿å­˜ï¼ŒåæœŸç›´æ¥è°ƒç”¨ï¼›</p>
<p>å…¨å±€ä»£ä»·åœ°å›¾ä¸æœ¬åœ°ä»£ä»·åœ°å›¾ç»„ä»¶é…ç½®å¦‚ä¸‹ï¼š</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/rvizä»£ä»·åœ°å›¾.webp" alt="rvizä»£ä»·åœ°å›¾" style="zoom: 67%;">

<p>å…¨å±€è·¯å¾„è§„åˆ’ä¸æœ¬åœ°è·¯å¾„è§„åˆ’ç»„ä»¶é…ç½®å¦‚ä¸‹ï¼š</p>
<img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/YJS1/rvizè·¯å¾„è§„åˆ’.webp" alt="rvizè·¯å¾„è§„åˆ’" style="zoom:67%;">

<p>4.é€šè¿‡Rvizå·¥å…·æ çš„ 2D Nav Goalè®¾ç½®ç›®çš„åœ°å®ç°å¯¼èˆª</p>
<p>5.å¯ä»¥åœ¨å¯¼èˆªè¿‡ç¨‹ä¸­ï¼Œæ·»åŠ æ–°çš„éšœç¢ç‰©ï¼Œæœºå™¨äººä¹Ÿå¯ä»¥è‡ªåŠ¨èº²é¿éšœç¢ç‰©</p>
<h4 id="å¯¼èˆªä¸SLAMå»ºå›¾"><a href="#å¯¼èˆªä¸SLAMå»ºå›¾" class="headerlink" title="å¯¼èˆªä¸SLAMå»ºå›¾"></a>å¯¼èˆªä¸SLAMå»ºå›¾</h4><p>åœ¨SLAMå»ºå›¾ä¸­æ˜¯é€šè¿‡é”®ç›˜æ§åˆ¶æ¥å®ç°çš„ï¼Œç°åœ¨æƒ³ç»“åˆè‡ªä¸»ç§»åŠ¨æ¥å®ç°å»ºå›¾</p>
<p>ä¹‹å‰å¯¼èˆªå®ç°æ—¶ï¼Œæ˜¯é€šè¿‡ map_server åŒ…çš„ map_server èŠ‚ç‚¹æ¥å‘å¸ƒåœ°å›¾ä¿¡æ¯çš„ï¼Œå¦‚æœä¸å…ˆé€šè¿‡SLAMå»ºå›¾ï¼Œé‚£ä¹ˆå¦‚ä½•å‘å¸ƒåœ°å›¾ä¿¡æ¯å‘¢ï¼Ÿ</p>
<p>SLAMå»ºå›¾è¿‡ç¨‹ä¸­æœ¬èº«å°±ä¼šæ—¶æ—¶å‘å¸ƒåœ°å›¾ä¿¡æ¯ï¼Œæ‰€ä»¥æ— éœ€å†ä½¿ç”¨map_serverï¼Œä¸”å¯¼èˆªéœ€è¦å®šä½æ¨¡å—ï¼ŒSLAMæœ¬èº«ä¹Ÿæ˜¯å¯ä»¥å®ç°å®šä½çš„</p>
<p>launchæ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é›†æˆSLAMä¸å¯¼èˆª,å®ç°è‡ªä¸»ç§»åŠ¨çš„åœ°å›¾æ„å»º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- SLAMå®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/launch/nav01_slam.launch"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªmove_base --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"$(find nav_demo)/launch/nav05_path.launch"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>1.é¦–å…ˆè¿è¡Œgazeboä»¿çœŸç¯å¢ƒï¼›</p>
<p>2.ç„¶åæ‰§è¡Œlaunchæ–‡ä»¶ï¼›</p>
<p>3.åœ¨rvizä¸­é€šè¿‡2D Nav Goalè®¾ç½®ç›®æ ‡ç‚¹ï¼Œæœºå™¨äººå¼€å§‹è‡ªä¸»ç§»åŠ¨å¹¶å»ºå›¾äº†ï¼›</p>
<p>4.æœ€åå¯ä»¥ä½¿ç”¨ map_server ä¿å­˜åœ°å›¾</p>
<h3 id="å¯¼èˆªç›¸å…³æ¶ˆæ¯"><a href="#å¯¼èˆªç›¸å…³æ¶ˆæ¯" class="headerlink" title="å¯¼èˆªç›¸å…³æ¶ˆæ¯"></a>å¯¼èˆªç›¸å…³æ¶ˆæ¯</h3><p>åœ¨ä¸Šä¸€èŠ‚çš„å®ç°ä¸­ï¼Œè¿™äº›æ¶ˆæ¯å·²ç»åœ¨rvizä¸­åšäº†å¯è§†åŒ–å¤„ç†ï¼Œæ¯”å¦‚ï¼šåœ°å›¾ã€é›·è¾¾ã€æ‘„åƒå¤´ã€é‡Œç¨‹è®¡ã€è·¯å¾„è§„åˆ’â€¦çš„ç›¸å…³æ¶ˆæ¯åœ¨rvizä¸­æä¾›äº†ç›¸å…³ç»„ä»¶ï¼Œæœ¬èŠ‚ä¸»è¦ä»‹ç»è¿™äº›æ¶ˆæ¯çš„å…·ä½“æ ¼å¼</p>
<h4 id="åœ°å›¾"><a href="#åœ°å›¾" class="headerlink" title="åœ°å›¾"></a>åœ°å›¾</h4><p>åœ°å›¾ç›¸å…³çš„æ¶ˆæ¯ä¸»è¦æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li><p>nav_msgs/MapMetaDataï¼šåœ°å›¾å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åœ°å›¾çš„å®½åº¦ã€é«˜åº¦ã€åˆ†è¾¨ç‡ç­‰ã€‚</p>
</li>
<li><p>nav_msgs/OccupancyGridï¼šåœ°å›¾æ …æ ¼æ•°æ®ï¼Œä¸€èˆ¬ä¼šåœ¨rvizä¸­ä»¥å›¾å½¢åŒ–çš„æ–¹å¼æ˜¾ç¤º</p>
</li>
</ul>
<p><strong>nav_msgs/MapMetaData</strong></p>
<p>è°ƒç”¨<code>rosmsg info nav_msgs/MapMetaData</code>æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">time map_load_time</span><br><span class="line">float32 resolution #åœ°å›¾åˆ†è¾¨ç‡</span><br><span class="line">uint32 width #åœ°å›¾å®½åº¦</span><br><span class="line">uint32 height #åœ°å›¾é«˜åº¦</span><br><span class="line">geometry_msgs/Pose origin #åœ°å›¾ä½å§¿æ•°æ®</span><br><span class="line">  geometry_msgs/Point position</span><br><span class="line">    float64 x</span><br><span class="line">    float64 y</span><br><span class="line">    float64 z</span><br><span class="line">  geometry_msgs/Quaternion orientation</span><br><span class="line">    float64 x</span><br><span class="line">    float64 y</span><br><span class="line">    float64 z</span><br><span class="line">    float64 w</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨åœ°å›¾æ•°æ®ä¸­ï¼ŒæœªçŸ¥åŒºåŸŸä¸º-1ï¼Œç™½è‰²ä¸º 255ï¼Œé»‘è‰²ä¸º 0ï¼Œmap_server ä¼šå°†åƒç´ å€¼ä½œä¸ºåˆ¤æ–­æ˜¯å¦æ˜¯éšœç¢ç‰©çš„ä¾æ®</p>
<p><strong>nav_msgs/OccupancyGrid</strong></p>
<p>è°ƒç”¨ <code>rosmsg info nav_msgs/OccupancyGrid</code>æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">#--- åœ°å›¾å…ƒæ•°æ®</span><br><span class="line">nav_msgs/MapMetaData info</span><br><span class="line">  time map_load_time</span><br><span class="line">  float32 resolution</span><br><span class="line">  uint32 width</span><br><span class="line">  uint32 height</span><br><span class="line">  geometry_msgs/Pose origin</span><br><span class="line">    geometry_msgs/Point position</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">    geometry_msgs/Quaternion orientation</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">      float64 w</span><br><span class="line">#--- åœ°å›¾å†…å®¹æ•°æ®ï¼Œæ•°ç»„é•¿åº¦ = width * height</span><br><span class="line">int8[] data</span><br></pre></td></tr></tbody></table></figure>

<p>å€¼ä¸º0-100ï¼Œåˆ¤æ–­é£é™©ï¼ŒæœªçŸ¥å’Œç©ºé—²åŒºåŸŸéƒ½ä¸º0</p>
<h4 id="é‡Œç¨‹è®¡"><a href="#é‡Œç¨‹è®¡" class="headerlink" title="é‡Œç¨‹è®¡"></a>é‡Œç¨‹è®¡</h4><p>é‡Œç¨‹è®¡ç›¸å…³æ¶ˆæ¯æ˜¯:nav_msgs/Odometryï¼Œè°ƒç”¨<code>rosmsg info nav_msgs/Odometry</code> æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">string child_frame_id</span><br><span class="line">geometry_msgs/PoseWithCovariance pose</span><br><span class="line">  geometry_msgs/Pose pose #é‡Œç¨‹è®¡ä½å§¿</span><br><span class="line">    geometry_msgs/Point position</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">    geometry_msgs/Quaternion orientation</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">      float64 w</span><br><span class="line">  float64[36] covariance</span><br><span class="line">geometry_msgs/TwistWithCovariance twist</span><br><span class="line">  geometry_msgs/Twist twist #é€Ÿåº¦</span><br><span class="line">    geometry_msgs/Vector3 linear</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">    geometry_msgs/Vector3 angular</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z    </span><br><span class="line">  # åæ–¹å·®çŸ©é˜µ</span><br><span class="line">  float64[36] covariance</span><br></pre></td></tr></tbody></table></figure>

<h4 id="åæ ‡å˜æ¢"><a href="#åæ ‡å˜æ¢" class="headerlink" title="åæ ‡å˜æ¢"></a>åæ ‡å˜æ¢</h4><p>åæ ‡å˜æ¢ç›¸å…³æ¶ˆæ¯æ˜¯: tf/tfMessageï¼Œè°ƒç”¨<code>rosmsg info tf/tfMessage</code> æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">geometry_msgs/TransformStamped[] transforms #åŒ…å«äº†å¤šä¸ªåæ ‡ç³»ç›¸å¯¹å…³ç³»æ•°æ®çš„æ•°ç»„</span><br><span class="line">  std_msgs/Header header</span><br><span class="line">    uint32 seq</span><br><span class="line">    time stamp</span><br><span class="line">    string frame_id</span><br><span class="line">  string child_frame_id</span><br><span class="line">  geometry_msgs/Transform transform</span><br><span class="line">    geometry_msgs/Vector3 translation</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">    geometry_msgs/Quaternion rotation</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">      float64 w</span><br></pre></td></tr></tbody></table></figure>

<h4 id="å®šä½-1"><a href="#å®šä½-1" class="headerlink" title="å®šä½"></a>å®šä½</h4><p>å®šä½ç›¸å…³æ¶ˆæ¯æ˜¯:geometry_msgs/PoseArrayï¼Œè°ƒç”¨<code>rosmsg info geometry_msgs/PoseArray</code>æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">geometry_msgs/Pose[] poses #é¢„ä¼°çš„ç‚¹ä½å§¿ç»„æˆçš„æ•°ç»„</span><br><span class="line">  geometry_msgs/Point position</span><br><span class="line">    float64 x</span><br><span class="line">    float64 y</span><br><span class="line">    float64 z</span><br><span class="line">  geometry_msgs/Quaternion orientation</span><br><span class="line">    float64 x</span><br><span class="line">    float64 y</span><br><span class="line">    float64 z</span><br><span class="line">    float64 w</span><br></pre></td></tr></tbody></table></figure>

<h4 id="ç›®æ ‡ç‚¹ä¸è·¯å¾„è§„åˆ’"><a href="#ç›®æ ‡ç‚¹ä¸è·¯å¾„è§„åˆ’" class="headerlink" title="ç›®æ ‡ç‚¹ä¸è·¯å¾„è§„åˆ’"></a>ç›®æ ‡ç‚¹ä¸è·¯å¾„è§„åˆ’</h4><p>ç›®æ ‡ç‚¹ç›¸å…³æ¶ˆæ¯æ˜¯:move_base_msgs/MoveBaseActionGoalï¼Œè°ƒç”¨<code>rosmsg info move_base_msgs/MoveBaseActionGoal</code>æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">actionlib_msgs/GoalID goal_id</span><br><span class="line">  time stamp</span><br><span class="line">  string id</span><br><span class="line">move_base_msgs/MoveBaseGoal goal</span><br><span class="line">  geometry_msgs/PoseStamped target_pose</span><br><span class="line">    std_msgs/Header header</span><br><span class="line">      uint32 seq</span><br><span class="line">      time stamp</span><br><span class="line">      string frame_id</span><br><span class="line">    geometry_msgs/Pose pose #ç›®æ ‡ç‚¹ä½å§¿</span><br><span class="line">      geometry_msgs/Point position</span><br><span class="line">        float64 x</span><br><span class="line">        float64 y</span><br><span class="line">        float64 z</span><br><span class="line">      geometry_msgs/Quaternion orientation</span><br><span class="line">        float64 x</span><br><span class="line">        float64 y</span><br><span class="line">        float64 z</span><br><span class="line">        float64 w</span><br></pre></td></tr></tbody></table></figure>

<p>è·¯å¾„è§„åˆ’ç›¸å…³æ¶ˆæ¯æ˜¯:nav_msgs/Pathï¼Œè°ƒç”¨<code>rosmsg info nav_msgs/Path</code>æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">geometry_msgs/PoseStamped[] poses #ç”±ä¸€ç³»åˆ—ç‚¹ç»„æˆçš„æ•°ç»„</span><br><span class="line">  std_msgs/Header header</span><br><span class="line">    uint32 seq</span><br><span class="line">    time stamp</span><br><span class="line">    string frame_id</span><br><span class="line">  geometry_msgs/Pose pose</span><br><span class="line">    geometry_msgs/Point position</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">    geometry_msgs/Quaternion orientation</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">      float64 w</span><br></pre></td></tr></tbody></table></figure>

<h4 id="æ¿€å…‰é›·è¾¾"><a href="#æ¿€å…‰é›·è¾¾" class="headerlink" title="æ¿€å…‰é›·è¾¾"></a>æ¿€å…‰é›·è¾¾</h4><p>æ¿€å…‰é›·è¾¾ç›¸å…³æ¶ˆæ¯æ˜¯ï¼šsensor_msgs/LaserScanï¼Œè°ƒç”¨<code>rosmsg info sensor_msgs/LaserScan</code>æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">float32 angle_min #èµ·å§‹æ‰«æè§’åº¦(rad)</span><br><span class="line">float32 angle_max #ç»ˆæ­¢æ‰«æè§’åº¦(rad)</span><br><span class="line">float32 angle_increment #æµ‹é‡å€¼ä¹‹é—´çš„è§’è·ç¦»(rad)</span><br><span class="line">float32 time_increment #æµ‹é‡é—´éš”æ—¶é—´(s)</span><br><span class="line">float32 scan_time #æ‰«æé—´éš”æ—¶é—´(s)</span><br><span class="line">float32 range_min #æœ€å°æœ‰æ•ˆè·ç¦»å€¼(m)</span><br><span class="line">float32 range_max #æœ€å¤§æœ‰æ•ˆè·ç¦»å€¼(m)</span><br><span class="line">float32[] ranges #ä¸€ä¸ªå‘¨æœŸçš„æ‰«ææ•°æ®</span><br><span class="line">float32[] intensities #æ‰«æå¼ºåº¦æ•°æ®ï¼Œå¦‚æœè®¾å¤‡ä¸æ”¯æŒå¼ºåº¦æ•°æ®ï¼Œè¯¥æ•°ç»„ä¸ºç©º</span><br></pre></td></tr></tbody></table></figure>

<h4 id="ç›¸æœº"><a href="#ç›¸æœº" class="headerlink" title="ç›¸æœº"></a>ç›¸æœº</h4><p>æ·±åº¦ç›¸æœºç›¸å…³æ¶ˆæ¯æœ‰:sensor_msgs/Imageã€sensor_msgs/CompressedImageã€sensor_msgs/PointCloud2</p>
<p>sensor_msgs/Image å¯¹åº”çš„ä¸€èˆ¬çš„å›¾åƒæ•°æ®</p>
<p>è°ƒç”¨<code>rosmsg info sensor_msgs/Image</code>æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">uint32 height #é«˜åº¦</span><br><span class="line">uint32 width  #å®½åº¦</span><br><span class="line">string encoding #ç¼–ç æ ¼å¼:RGBã€YUVç­‰</span><br><span class="line">uint8 is_bigendian #å›¾åƒå¤§å°ç«¯å­˜å‚¨æ¨¡å¼</span><br><span class="line">uint32 step #ä¸€è¡Œå›¾åƒæ•°æ®çš„å­—èŠ‚æ•°ï¼Œä½œä¸ºæ­¥è¿›å‚æ•°</span><br><span class="line">uint8[] data #å›¾åƒæ•°æ®ï¼Œé•¿åº¦ç­‰äº step * height</span><br></pre></td></tr></tbody></table></figure>

<p>sensor_msgs/CompressedImage å¯¹åº”å‹ç¼©åçš„å›¾åƒæ•°æ®</p>
<p>è°ƒç”¨<code>rosmsg info sensor_msgs/CompressedImage</code>æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">string format #å‹ç¼©ç¼–ç æ ¼å¼(jpegã€pngã€bmp)</span><br><span class="line">uint8[] data #å‹ç¼©åçš„æ•°æ®</span><br></pre></td></tr></tbody></table></figure>

<p>sensor_msgs/PointCloud2 å¯¹åº”çš„æ˜¯ç‚¹äº‘æ•°æ®(å¸¦æœ‰æ·±åº¦ä¿¡æ¯çš„å›¾åƒæ•°æ®)</p>
<p>è°ƒç”¨<code>rosmsg info sensor_msgs/PointCloud2</code>æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å¦‚ä¸‹:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">uint32 height #é«˜åº¦</span><br><span class="line">uint32 width  #å®½åº¦</span><br><span class="line">sensor_msgs/PointField[] fields #æ¯ä¸ªç‚¹çš„æ•°æ®ç±»å‹</span><br><span class="line">  uint8 INT8=1</span><br><span class="line">  uint8 UINT8=2</span><br><span class="line">  uint8 INT16=3</span><br><span class="line">  uint8 UINT16=4</span><br><span class="line">  uint8 INT32=5</span><br><span class="line">  uint8 UINT32=6</span><br><span class="line">  uint8 FLOAT32=7</span><br><span class="line">  uint8 FLOAT64=8</span><br><span class="line">  string name</span><br><span class="line">  uint32 offset</span><br><span class="line">  uint8 datatype</span><br><span class="line">  uint32 count</span><br><span class="line">bool is_bigendian #å›¾åƒå¤§å°ç«¯å­˜å‚¨æ¨¡å¼</span><br><span class="line">uint32 point_step #å•ç‚¹çš„æ•°æ®å­—èŠ‚æ­¥é•¿</span><br><span class="line">uint32 row_step   #ä¸€è¡Œæ•°æ®çš„å­—èŠ‚æ­¥é•¿</span><br><span class="line">uint8[] data      #å­˜å‚¨ç‚¹äº‘çš„æ•°ç»„ï¼Œæ€»é•¿åº¦ä¸º row_step * height</span><br><span class="line">bool is_dense     #æ˜¯å¦æœ‰æ— æ•ˆç‚¹</span><br></pre></td></tr></tbody></table></figure>

<h4 id="æ·±åº¦å›¾åƒè½¬æ¿€å…‰æ•°æ®"><a href="#æ·±åº¦å›¾åƒè½¬æ¿€å…‰æ•°æ®" class="headerlink" title="æ·±åº¦å›¾åƒè½¬æ¿€å…‰æ•°æ®"></a>æ·±åº¦å›¾åƒè½¬æ¿€å…‰æ•°æ®</h4><p>åœ¨è¯¸å¤šSLAMç®—æ³•ä¸­ï¼Œä¸€èˆ¬éƒ½éœ€è¦è®¢é˜…æ¿€å…‰é›·è¾¾æ•°æ®ç”¨äºæ„å»ºåœ°å›¾ï¼Œå› ä¸ºæ¿€å…‰é›·è¾¾å¯ä»¥æ„ŸçŸ¥å‘¨å›´ç¯å¢ƒçš„æ·±åº¦ä¿¡æ¯</p>
<p>æ·±åº¦ç›¸æœºä¹Ÿå…·å¤‡æ„ŸçŸ¥æ·±åº¦ä¿¡æ¯çš„åŠŸèƒ½ï¼Œä¸”æœ€åˆæ¿€å…‰é›·è¾¾ä»·æ ¼æ¯”ä»·æ¯”è¾ƒæ˜‚è´µï¼Œå¯ä»¥é€‰ç”¨æ·±åº¦ç›¸æœºä»£æ›¿æ¿€å…‰é›·è¾¾</p>
<p>ä¸è¿‡äºŒè€…å‘å¸ƒçš„æ¶ˆæ¯ç±»å‹æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå¦‚æœæƒ³è¦å®ç°ä¼ æ„Ÿå™¨çš„ç½®æ¢ï¼Œé‚£ä¹ˆå°±éœ€è¦å°†æ·±åº¦ç›¸æœºå‘å¸ƒçš„ä¸‰ç»´çš„å›¾å½¢ä¿¡æ¯è½¬æ¢æˆäºŒç»´çš„æ¿€å…‰é›·è¾¾ä¿¡æ¯</p>
<p>è¿™ä¸€åŠŸèƒ½å°±æ˜¯é€šè¿‡depthimage_to_laserscanæ¥å®ç°çš„</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šæ·±åº¦ç›¸æœºè¾ƒä¹‹äºæ¿€å…‰é›·è¾¾æ— è®ºæ˜¯æ£€æµ‹èŒƒå›´è¿˜æ˜¯ç²¾åº¦éƒ½æœ‰ä¸å°çš„å·®è·ï¼ŒSLAMæ•ˆæœå¯èƒ½ä¸å¦‚æ¿€å…‰é›·è¾¾ç†æƒ³</p>
<p>å®‰è£…åŒ…ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-noetic-depthimage-to-laserscan</span><br></pre></td></tr></tbody></table></figure>

<p>ä½†éšç€æ—¶é—´å‘å±•å…¶å®æ¿€å…‰é›·è¾¾ä»·æ ¼å·²ç»ä¸‹æ¥äº†ï¼Œè¿™ä¸€èŠ‚å†…å®¹ç•¥</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://yhblogs.cn">ä»Šå¤©ç¡å¤Ÿäº†å—</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://yhblogs.cn/posts/3254549402.html">http://yhblogs.cn/posts/3254549402.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://yhblogs.cn" target="_blank">ãŒã‚“ã°ã‚ã†</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%F0%9F%A4%96ROS/">ğŸ¤–ROS</a></div><div class="post_share"><div class="social-share" data-image="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/wallhaven-1q83qg.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/2715330630.html" title="ç§¦çš‡å²›å‡ºæ¸¸"><img class="cover" src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/wallhaven-4996q1_compressed.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ç§¦çš‡å²›å‡ºæ¸¸</div></div></a></div><div class="next-post pull-right"><a href="/posts/626062709.html" title="ROSåŸºç¡€çŸ¥è¯†"><img class="cover" src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/ros-logo.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ROSåŸºç¡€çŸ¥è¯†</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/3894864178.html" title="ROS2ç†è®º"><img class="cover" src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/wallhaven-5g22q5_1920x1080_compressed.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-30</div><div class="title">ROS2ç†è®º</div></div></a></div><div><a href="/posts/626062709.html" title="ROSåŸºç¡€çŸ¥è¯†"><img class="cover" src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/ros-logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-19</div><div class="title">ROSåŸºç¡€çŸ¥è¯†</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/b_2a1aef95f351a5f7ef72eb81e6838fd6.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">ä»Šå¤©ç¡å¤Ÿäº†å—</div><div class="author-info__description">ç›¸é‡æ˜¯æœ€å°å•ä½çš„å¥‡è¿¹</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">81</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">1</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/202206071549233.webp" target="_blank" title="QQ"><i class="iconfont icon-QQ"></i></a><a class="social-icon" href="https://wuyaohui06022.oss-cn-chengdu.aliyuncs.com/blogwebp/202206071549234.webp" target="_blank" title="å¾®ä¿¡"><i class="iconfont icon-weixin"></i></a><a class="social-icon" href="https://space.bilibili.com/277953459?spm_id_from=333.1007.0.0" target="_blank" title="bilibili"><i class="iconfont icon-bilibili"></i></a><a class="social-icon" href="https://github.com/YaoHui-Wu06022" target="_blank" title="Github"><i class="iconfont icon-GitHub"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">ä¿æŒç†æ™ºï¼Œç›¸ä¿¡æ˜å¤©</div><div class="twopeople"><div class="twopeople"><div class="container" style="height:200px;"><canvas class="illo" width="800" height="800" style="max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;"></canvas></div> <script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js"></script> <script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js"></script> <script id="rendered-js" src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js"></script> <style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%B3%BB%E7%BB%9F%E4%BB%BF%E7%9C%9F"><span class="toc-number">1.</span> <span class="toc-text">æœºå™¨äººç³»ç»Ÿä»¿çœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#URDF%E9%9B%86%E6%88%90Rviz"><span class="toc-number">1.1.</span> <span class="toc-text">URDFé›†æˆRviz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URDF%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">URDFè¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#link"><span class="toc-number">1.2.1.</span> <span class="toc-text">link</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#joint"><span class="toc-number">1.2.2.</span> <span class="toc-text">joint</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#urdf%E5%AE%9E%E6%93%8D"><span class="toc-number">1.2.3.</span> <span class="toc-text">urdfå®æ“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#urdf%E5%B7%A5%E5%85%B7"><span class="toc-number">1.2.4.</span> <span class="toc-text">urdfå·¥å…·</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URDF%E4%BC%98%E5%8C%96"><span class="toc-number">1.3.</span> <span class="toc-text">URDFä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Xacro%E4%BD%93%E9%AA%8C"><span class="toc-number">1.3.1.</span> <span class="toc-text">Xacroä½“éªŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Xacro%E8%AF%AD%E6%B3%95%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.3.2.</span> <span class="toc-text">Xacroè¯­æ³•è¯¦è§£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Xacro%E5%AE%8C%E6%95%B4%E4%BD%BF%E7%94%A8"><span class="toc-number">1.3.3.</span> <span class="toc-text">Xacroå®Œæ•´ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Xacro%E5%AE%9E%E6%93%8D"><span class="toc-number">1.3.4.</span> <span class="toc-text">Xacroå®æ“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rviz%E6%8E%A7%E5%88%B6%E8%BF%90%E5%8A%A8"><span class="toc-number">1.4.</span> <span class="toc-text">Rvizæ§åˆ¶è¿åŠ¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URDF%E9%9B%86%E6%88%90Gazebo"><span class="toc-number">1.5.</span> <span class="toc-text">URDFé›†æˆGazebo</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E9%9B%86%E6%88%90%E6%B5%81%E7%A8%8B"><span class="toc-number">1.5.1.</span> <span class="toc-text">åŸºæœ¬é›†æˆæµç¨‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.5.2.</span> <span class="toc-text">ç›¸å…³è®¾ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D"><span class="toc-number">1.5.3.</span> <span class="toc-text">å®æ“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%BF%E7%9C%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">1.5.4.</span> <span class="toc-text">ä»¿çœŸç¯å¢ƒæ­å»º</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URDF%E3%80%81Gazebo%E4%B8%8ERviz%E7%BB%BC%E5%90%88%E5%BA%94%E7%94%A8"><span class="toc-number">1.6.</span> <span class="toc-text">URDFã€Gazeboä¸Rvizç»¼åˆåº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BF%90%E5%8A%A8%E6%8E%A7%E5%88%B6"><span class="toc-number">1.6.1.</span> <span class="toc-text">æœºå™¨äººè¿åŠ¨æ§åˆ¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Rviz%E6%9F%A5%E7%9C%8B%E9%87%8C%E7%A8%8B%E8%AE%A1%E4%BF%A1%E6%81%AF"><span class="toc-number">1.6.2.</span> <span class="toc-text">RvizæŸ¥çœ‹é‡Œç¨‹è®¡ä¿¡æ¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%B7%E8%BE%BE%E4%BF%A1%E6%81%AF%E4%BB%BF%E7%9C%9F"><span class="toc-number">1.6.3.</span> <span class="toc-text">é›·è¾¾ä¿¡æ¯ä»¿çœŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%91%84%E5%83%8F%E5%A4%B4%E4%BF%A1%E6%81%AF%E4%BB%BF%E7%9C%9F"><span class="toc-number">1.6.4.</span> <span class="toc-text">æ‘„åƒå¤´ä¿¡æ¯ä»¿çœŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#kinect%E4%BF%A1%E6%81%AF%E4%BB%BF%E7%9C%9F"><span class="toc-number">1.6.5.</span> <span class="toc-text">kinectä¿¡æ¯ä»¿çœŸ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.7.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AF%BC%E8%88%AA-%E4%BB%BF%E7%9C%9F"><span class="toc-number">2.</span> <span class="toc-text">æœºå™¨äººå¯¼èˆª(ä»¿çœŸ)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.</span> <span class="toc-text">æ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E6%A8%A1%E5%9D%97%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.1.</span> <span class="toc-text">å¯¼èˆªæ¨¡å—ç®€ä»‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E4%B9%8B%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">2.1.2.</span> <span class="toc-text">å¯¼èˆªä¹‹åæ ‡ç³»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E6%9D%A1%E4%BB%B6%E8%AF%B4%E6%98%8E"><span class="toc-number">2.1.3.</span> <span class="toc-text">å¯¼èˆªæ¡ä»¶è¯´æ˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.2.</span> <span class="toc-text">å¯¼èˆªå®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SLAM%E5%BB%BA%E5%9B%BE"><span class="toc-number">2.2.1.</span> <span class="toc-text">SLAMå»ºå›¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%B0%E5%9B%BE%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.2.2.</span> <span class="toc-text">åœ°å›¾æœåŠ¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%BD%8D"><span class="toc-number">2.2.3.</span> <span class="toc-text">å®šä½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92"><span class="toc-number">2.2.4.</span> <span class="toc-text">è·¯å¾„è§„åˆ’</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E4%BB%B7%E5%9C%B0%E5%9B%BE"><span class="toc-number">2.2.4.1.</span> <span class="toc-text">ä»£ä»·åœ°å›¾</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#move-base%E4%BD%BF%E7%94%A8"><span class="toc-number">2.2.4.2.</span> <span class="toc-text">move_baseä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E4%B8%8ESLAM%E5%BB%BA%E5%9B%BE"><span class="toc-number">2.2.5.</span> <span class="toc-text">å¯¼èˆªä¸SLAMå»ºå›¾</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E7%9B%B8%E5%85%B3%E6%B6%88%E6%81%AF"><span class="toc-number">2.3.</span> <span class="toc-text">å¯¼èˆªç›¸å…³æ¶ˆæ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%B0%E5%9B%BE"><span class="toc-number">2.3.1.</span> <span class="toc-text">åœ°å›¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8C%E7%A8%8B%E8%AE%A1"><span class="toc-number">2.3.2.</span> <span class="toc-text">é‡Œç¨‹è®¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2"><span class="toc-number">2.3.3.</span> <span class="toc-text">åæ ‡å˜æ¢</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%BD%8D-1"><span class="toc-number">2.3.4.</span> <span class="toc-text">å®šä½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87%E7%82%B9%E4%B8%8E%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92"><span class="toc-number">2.3.5.</span> <span class="toc-text">ç›®æ ‡ç‚¹ä¸è·¯å¾„è§„åˆ’</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BF%80%E5%85%89%E9%9B%B7%E8%BE%BE"><span class="toc-number">2.3.6.</span> <span class="toc-text">æ¿€å…‰é›·è¾¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E6%9C%BA"><span class="toc-number">2.3.7.</span> <span class="toc-text">ç›¸æœº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%B1%E5%BA%A6%E5%9B%BE%E5%83%8F%E8%BD%AC%E6%BF%80%E5%85%89%E6%95%B0%E6%8D%AE"><span class="toc-number">2.3.8.</span> <span class="toc-text">æ·±åº¦å›¾åƒè½¬æ¿€å…‰æ•°æ®</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">Â©2022 - 2026 By ä»Šå¤©ç¡å¤Ÿäº†å—</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">You must always have faith in who you areï¼</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>